import{d as fe,b as l,f,s as Q,a as j,e as Le,g as _e,t as be}from"../chunks/B2A7gHtL.js";import{p as de,c as ve,r as t,h as a,f as r,g as e,t as V,a6 as Ae,s as I,a as Ee,u as re,d as o,j as oe,n as he,i as Oe,bd as je,b as He}from"../chunks/qR_TM3YX.js";import{s as Be,g as Ue}from"../chunks/CyMYiLoa.js";import{i as K}from"../chunks/DpBBTLWw.js";import{e as ce,s as ie,b as me,g as ke,r as ye,i as pe,l as Te,a as Se}from"../chunks/BhtVncI_.js";import{g as De}from"../chunks/9SZhwvK0.js";import{g as Ce}from"../chunks/Be_uRYmX.js";import{g as Ve,a as Ie}from"../chunks/CktI4lAE.js";import{i as Ke}from"../chunks/KBP0Pl-D.js";import{b as we}from"../chunks/nnazh41B.js";import{b as Re}from"../chunks/BYXRTvT-.js";import{p as ge,s as Pe,a as qe}from"../chunks/CkAYskLX.js";import{s as Ne,g as ze}from"../chunks/BoJZZ0lI.js";const We=!1,Ge=!1,Jt=Object.freeze(Object.defineProperty({__proto__:null,prerender:We,ssr:Ge},Symbol.toStringTag,{value:"Module"}));var Ye=f('<p class="text-xs text-text-secondary mt-1"> </p>'),$e=f('<div role="alert"><div class="flex items-start gap-3"><div class="flex-shrink-0 w-5 h-5 mt-0.5"><svg class="w-full h-full" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg></div> <div class="flex-1 min-w-0"><p class="text-sm font-medium text-text-primary"> </p> <!></div> <button class="flex-shrink-0 ml-auto p-1 rounded hover:bg-bg-hover text-text-muted hover:text-text-primary transition-colors" aria-label="Close notification"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div>'),Fe=f('<div class="fixed bottom-4 right-4 z-50 space-y-2 max-w-sm" aria-live="polite" aria-relevant="additions removals"></div>');function Xe(R,O){de(O,!1);const m=Ce(),P={success:{color:"bg-accent-green border-accent-green",glow:"glow-green",icon:"M5 13l4 4L19 7"},error:{color:"bg-accent-red border-accent-red",glow:"glow-red",icon:"M6 18L18 6M6 6l12 12"},warning:{color:"bg-accent-amber border-accent-amber",glow:"glow-amber",icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"},info:{color:"bg-accent-cyan border-accent-cyan",glow:"glow-cyan",icon:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}};Ke();var y=Fe();ce(y,5,()=>m.list,v=>v.id,(v,n)=>{const u=Ae(()=>P[e(n).type]);var x=$e(),S=a(x),k=a(S),C=a(k),H=a(C);t(C),t(k);var U=r(k,2),T=a(U),Z=a(T,!0);t(T);var q=r(T,2);{var Y=g=>{var s=Ye(),p=a(s,!0);t(s),V(()=>Q(p,e(n).message)),l(g,s)};K(q,g=>{e(n).message&&g(Y)})}t(U);var ee=r(U,2);t(S),t(x),V(()=>{ie(x,1,`gradient-border glass p-4 rounded-lg shadow-lg ${e(u).color??""} ${e(u).glow??""} animate-in slide-in-from-right-full duration-300`,"svelte-cqwvc2"),me(H,"d",e(u).icon),Q(Z,e(n).title)}),j("click",ee,()=>m.remove(e(n).id)),l(v,x)}),t(y),l(R,y),ve()}fe(["click"]);var Je=f(`<div><label for="gateway-token" class="block text-sm font-medium text-text-secondary mb-2">Access Token <span class="text-text-muted font-normal">(optional)</span></label> <input id="gateway-token" type="password" placeholder="Leave empty to use device pairing" class="w-full px-3 py-2 rounded-lg glass border border-border-default bg-bg-secondary
                     text-text-primary placeholder-text-muted
                     focus:outline-none focus:border-accent-cyan focus:glow-cyan
                     transition-all duration-200"/> <p class="text-xs text-text-muted mt-1">If provided, connects immediately. If empty, your gateway owner will need to approve this device.</p></div>`),Qe=f('<button type="button" class="text-xs text-text-muted hover:text-accent-cyan transition-colors flex items-center gap-1"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg> I have an access token</button>'),Ze=f('<div class="p-3 rounded-lg border border-accent-amber/30 bg-accent-amber/10" role="status"><div class="flex items-start gap-2"><svg class="w-5 h-5 text-accent-amber flex-shrink-0 animate-pulse mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div><p class="text-sm font-medium text-accent-amber">Device Pairing Required</p> <p class="text-xs text-text-muted mt-1">Your gateway owner needs to approve this device. Ask them to run:</p> <code class="block text-xs font-mono text-accent-cyan bg-bg-primary/50 px-2 py-1 rounded mt-1">openclaw devices approve</code></div></div></div>'),et=f('<div class="p-3 rounded-lg border border-accent-red/30 bg-accent-red/10 glow-red" role="alert" aria-live="assertive"><div class="flex items-center gap-2"><svg class="w-4 h-4 text-accent-red flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg> <p class="text-sm text-accent-red"> </p></div></div>'),tt=f('<div class="flex items-center justify-center gap-2"><svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Connecting...</div>'),at=f(`<div class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm" role="dialog" aria-modal="true" aria-labelledby="auth-dialog-title"><div class="w-full max-w-md gradient-border glass p-6 rounded-lg glow-cyan animate-in zoom-in-95 duration-300 svelte-htsx5a"><div class="flex items-center gap-3 mb-6"><div class="w-12 h-12 rounded-lg gradient-bg flex items-center justify-center glow-purple"><svg class="w-6 h-6 text-accent-purple" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div> <div><h2 id="auth-dialog-title" class="text-lg font-semibold gradient-text">Connect to OpenClaw</h2> <p class="text-sm text-text-muted">Enter your gateway credentials to get started</p></div></div> <form class="space-y-4"><div><label for="gateway-url" class="block text-sm font-medium text-text-secondary mb-2">Gateway URL</label> <input id="gateway-url" type="url" placeholder="wss://your-openclaw-gateway.com" class="w-full px-3 py-2 rounded-lg glass border border-border-default bg-bg-secondary
                   text-text-primary placeholder-text-muted
                   focus:outline-none focus:border-accent-cyan focus:glow-cyan
                   transition-all duration-200" required=""/></div> <!> <!> <!> <div class="flex gap-3 pt-2"><button type="button" class="flex-1 px-4 py-2 rounded-lg border border-border-default text-text-secondary
                   hover:bg-bg-hover hover:text-text-primary transition-colors">Cancel</button> <button type="submit" class="flex-1 px-4 py-2 rounded-lg gradient-bg gradient-border glow-cyan
                   text-text-primary font-medium hover:brightness-110 
                   disabled:opacity-50 disabled:cursor-not-allowed
                   transition-all duration-200"><!></button></div></form> <div class="mt-4 pt-4 border-t border-border-default"><p class="text-xs text-text-muted text-center"><!> <br/> Need help? Check the <a href="https://docs.openclaw.ai" target="_blank" class="text-accent-cyan hover:underline">OpenClaw documentation</a>.</p></div></div></div>`);function rt(R,O){de(O,!0);const m=ke(),P=Ce();let y=ge(O,"show",15,!1);const v=m.getConfiguredWsUrl();let n=I(Ee(v||"")),u=I(""),x=I(!1),S=I(""),k=I(!1),C=I(!1);re(()=>{if(typeof window<"u"&&m.initialized){const{url:g,token:s}=m.loadSettings();(!g||!s)&&(!e(n)&&v&&o(n,v,!0),y(!0))}});async function H(){if(!e(n).trim()){o(S,"Gateway URL is required");return}!e(u).trim()&&e(k),o(S,""),o(x,!0),o(C,!1);try{const g=e(u).trim()||"__device_auth__";m.connect(e(n).trim(),g),await new Promise((s,p)=>{const b=setTimeout(()=>{p(new Error("Connection timeout ‚Äî check your gateway URL"))},15e3),_=m.onStateChange(M=>{M.status==="connected"?(clearTimeout(b),_(),s()):M.status==="error"&&(clearTimeout(b),_(),M.error?.includes("pairing")?(o(C,!0),p(new Error("Device pairing required ‚Äî approve this device on your gateway"))):p(new Error(M.error||"Connection failed")))})}),y(!1),o(C,!1),P.success("Connected","Successfully connected to OpenClaw Gateway")}catch(g){o(S,g instanceof Error?g.message:"Connection failed",!0),e(C)||P.error("Connection Failed",e(S))}finally{o(x,!1)}}function U(){y(!1),o(S,"")}let T=I(void 0);re(()=>{if(y()&&e(T)){const g=e(T).querySelectorAll('input:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])');g.length&&g[0].focus()}});function Z(g){if(g.key==="Enter")H();else if(g.key==="Escape")U();else if(g.key==="Tab"&&e(T)){const s=e(T).querySelectorAll('input:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])');if(s.length===0)return;const p=s[0],b=s[s.length-1];g.shiftKey&&document.activeElement===p?(g.preventDefault(),b.focus()):!g.shiftKey&&document.activeElement===b&&(g.preventDefault(),p.focus())}}var q=Le(),Y=oe(q);{var ee=g=>{var s=at(),p=a(s),b=r(a(p),2),_=a(b),M=r(a(_),2);ye(M),t(_);var c=r(_,2);{var G=i=>{var A=Je(),F=r(a(A),2);ye(F),he(2),t(A),V(()=>F.disabled=e(x)),we(F,()=>e(u),X=>o(u,X)),l(i,A)},te=i=>{var A=Qe();j("click",A,()=>o(k,!0)),l(i,A)};K(c,i=>{e(k)?i(G):i(te,!1)})}var h=r(c,2);{var d=i=>{var A=Ze();l(i,A)};K(h,i=>{e(C)&&i(d)})}var w=r(h,2);{var z=i=>{var A=et(),F=a(A),X=r(a(F),2),E=a(X,!0);t(X),t(F),t(A),V(()=>Q(E,e(S))),l(i,A)};K(w,i=>{e(S)&&!e(C)&&i(z)})}var D=r(w,2),ae=a(D),N=r(ae,2),B=a(N);{var L=i=>{var A=tt();l(i,A)},$=i=>{var A=be("Connect");l(i,A)};K(B,i=>{e(x)?i(L):i($,!1)})}t(N),t(D),t(b);var W=r(b,2),se=a(W),ne=a(se);{var ue=i=>{var A=be("Credentials are saved locally and remembered for future sessions.");l(i,A)},le=i=>{var A=be("Your device will be paired with the gateway. The gateway owner will approve your access.");l(i,A)};K(ne,i=>{e(k)?i(ue):i(le,!1)})}he(5),t(se),t(W),t(p),Re(p,i=>o(T,i),()=>e(T)),t(s),V(i=>{M.disabled=e(x),ae.disabled=e(x),N.disabled=i},[()=>e(x)||!e(n).trim()]),j("click",s,U),j("keydown",s,Z),j("click",p,i=>i.stopPropagation()),_e("submit",b,i=>{i.preventDefault(),H()}),we(M,()=>e(n),i=>o(n,i)),j("click",ae,U),l(g,s)};K(Y,g=>{y()&&g(ee)})}l(R,q),ve()}fe(["click","keydown"]);const st=()=>{const R=Ne;return{page:{subscribe:R.page.subscribe},navigating:{subscribe:R.navigating.subscribe},updated:R.updated}},ot={subscribe(R){return st().page.subscribe(R)}};var nt=f('<img src="/logo.png" alt="Cortex" class="w-8 h-8 rounded-lg"/> <span class="text-base font-bold gradient-text tracking-wider">CORTEX</span> <button class="ml-auto p-1 rounded hover:bg-bg-hover text-text-muted hover:text-text-primary transition-colors" aria-label="Collapse navigation"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19l-7-7 7-7m8 14l-7-7 7-7"></path></svg></button>',1),it=f('<button class="mx-auto p-1 rounded hover:bg-bg-hover text-text-muted hover:text-accent-cyan transition-colors" aria-label="Expand navigation"><img src="/logo.png" alt="Cortex" class="w-7 h-7 rounded-lg"/></button>'),lt=f('<div class="px-3 pt-3 pb-1"><span class="text-[10px] font-semibold uppercase tracking-widest text-text-muted/60"> </span></div>'),ct=f('<div class="max-md:hidden pt-2 pb-1"><div class="mx-auto w-6 h-px bg-border-default"></div></div> <div class="hidden max-md:block px-3 pt-3 pb-1"><span class="text-[10px] font-semibold uppercase tracking-widest text-text-muted/60"> </span></div>',1),dt=f("<span> </span>"),vt=f('<span class="hidden max-md:inline"> </span>'),ut=f('<a><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> <!></a>'),pt=f("<!> <!>",1),ft=f('<div class="flex items-center gap-2 px-2 py-1.5 text-xs"><span aria-hidden="true"></span> <span class="text-text-muted truncate"> </span></div>'),xt=f('<div class="max-md:hidden flex justify-center py-1"><span aria-hidden="true"></span> <span class="sr-only"> </span></div> <div class="hidden max-md:flex items-center gap-2 px-2 py-1.5 text-xs"><span aria-hidden="true"></span> <span class="text-text-muted truncate"> </span></div>',1),mt=f('<nav aria-label="Main navigation"><div class="flex items-center gap-2 p-3 border-b border-border-default"><div class="hidden max-md:flex items-center gap-2 w-full"><img src="/logo.png" alt="Cortex" class="w-8 h-8 rounded-lg"/> <span class="text-base font-bold gradient-text tracking-wider">CORTEX</span> <button class="ml-auto p-1.5 rounded-lg hover:bg-bg-hover text-text-muted hover:text-text-primary transition-colors" aria-label="Close navigation"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="max-md:hidden flex items-center gap-2 w-full"><!></div></div> <div class="flex-1 overflow-y-auto py-2"></div> <div class="p-2 border-t border-border-default"><div class="flex justify-center mb-1"><button class="w-6 h-6 flex items-center justify-center rounded-full text-[11px] font-mono font-semibold text-text-muted hover:text-accent-cyan hover:bg-bg-hover transition-colors" title="Keyboard shortcuts (Ctrl+/)" aria-label="Show keyboard shortcuts">?</button></div></div> <div class="p-2 border-t border-border-default" aria-live="polite" role="status"><!></div></nav>');function gt(R,O){de(O,!0);const m=()=>qe(ot,"$page",P),[P,y]=Pe(),v=ke(),n=[{label:"Chat",items:[{label:"Chat",href:"/",icon:"M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z"}]},{label:"Control",items:[{label:"Overview",href:"/overview",icon:"M4 6h16M4 10h16M4 14h16M4 18h16"},{label:"Channels",href:"/channels",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"},{label:"Instances",href:"/instances",icon:"M5.636 18.364a9 9 0 010-12.728m12.728 0a9 9 0 010 12.728M12 12h.01"},{label:"Sessions",href:"/sessions",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},{label:"Usage",href:"/usage",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"},{label:"Cron Jobs",href:"/cron",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},{label:"Approvals",href:"/approvals",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"}]},{label:"Agent",items:[{label:"Agents",href:"/agents",icon:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"},{label:"Skills",href:"/skills",icon:"M13 10V3L4 14h7v7l9-11h-7z"},{label:"Nodes",href:"/nodes",icon:"M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},{label:"Memory",href:"/memory",icon:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"}]},{label:"Settings",items:[{label:"Connection",href:"/settings",icon:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101"},{label:"Gateway Config",href:"/config",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"},{label:"Debug",href:"/debug",icon:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},{label:"Logs",href:"/logs",icon:"M4 6h16M4 12h16m-7 6h7"}]}];let u=ge(O,"collapsed",15,!1),x=ge(O,"mobileOpen",15,!1);function S(h,d){return h==="/"?d==="/":d.startsWith(h)}function k(){x()&&(x(!1),O.onnavigate?.())}var C=mt();let H;var U=a(C),T=a(U),Z=r(a(T),4);t(T);var q=r(T,2),Y=a(q);{var ee=h=>{var d=nt(),w=r(oe(d),4);j("click",w,()=>u(!0)),l(h,d)},g=h=>{var d=it();j("click",d,()=>u(!1)),l(h,d)};K(Y,h=>{u()?h(g,!1):h(ee)})}t(q),t(U);var s=r(U,2);ce(s,21,()=>n,pe,(h,d)=>{var w=pt(),z=oe(w);{var D=B=>{var L=lt(),$=a(L),W=a($,!0);t($),t(L),V(()=>Q(W,e(d).label)),l(B,L)},ae=B=>{var L=ct(),$=r(oe(L),2),W=a($),se=a(W,!0);t(W),t($),V(()=>Q(se,e(d).label)),l(B,L)};K(z,B=>{u()?B(ae,!1):B(D)})}var N=r(z,2);ce(N,17,()=>e(d).items,pe,(B,L)=>{const $=Oe(()=>S(e(L).href,m().url.pathname));var W=ut();let se;var ne=a(W),ue=a(ne);t(ne);var le=r(ne,2);{var i=F=>{var X=dt(),E=a(X,!0);t(X),V(()=>Q(E,e(L).label)),l(F,X)},A=F=>{var X=vt(),E=a(X,!0);t(X),V(()=>Q(E,e(L).label)),l(F,X)};K(le,F=>{u()?F(A,!1):F(i)})}t(W),V(()=>{me(W,"href",e(L).href),me(W,"aria-current",e($)?"page":void 0),se=ie(W,1,`flex items-center gap-2.5 mx-2 my-0.5 px-2.5 py-2 rounded-lg text-sm transition-all duration-200
                 max-md:py-2.5 max-md:text-base
                 ${e($)?"gradient-bg glow-cyan text-accent-cyan font-medium":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,null,se,{"md:justify-center":u()}),me(W,"title",u()?e(L).label:void 0),ie(ne,0,`w-4 h-4 max-md:w-5 max-md:h-5 flex-shrink-0 ${e($)?"text-accent-cyan":""}`),me(ue,"d",e(L).icon)}),j("click",W,k),l(B,W)}),l(h,w)}),t(s);var p=r(s,2),b=a(p),_=a(b);t(b),t(p);var M=r(p,2),c=a(M);{var G=h=>{var d=ft(),w=a(d),z=r(w,2),D=a(z,!0);t(z),t(d),V(()=>{ie(w,1,`w-2 h-2 rounded-full flex-shrink-0
          ${v.state.status==="connected"?"bg-accent-green glow-green":v.state.status==="connecting"||v.state.status==="authenticating"?"bg-amber-500 animate-pulse":"bg-red-500"}`),Q(D,v.state.status==="connected"?`v${v.state.serverVersion??"?"}`:v.state.status)}),l(h,d)},te=h=>{var d=xt(),w=oe(d),z=a(w),D=r(z,2),ae=a(D,!0);t(D),t(w);var N=r(w,2),B=a(N),L=r(B,2),$=a(L,!0);t(L),t(N),V(()=>{ie(z,1,`w-2.5 h-2.5 rounded-full
          ${v.state.status==="connected"?"bg-accent-green glow-green":v.state.status==="connecting"||v.state.status==="authenticating"?"bg-amber-500 animate-pulse":"bg-red-500"}`),Q(ae,v.state.status),ie(B,1,`w-2 h-2 rounded-full flex-shrink-0
          ${v.state.status==="connected"?"bg-accent-green glow-green":v.state.status==="connecting"||v.state.status==="authenticating"?"bg-amber-500 animate-pulse":"bg-red-500"}`),Q($,v.state.status==="connected"?`v${v.state.serverVersion??"?"}`:v.state.status)}),l(h,d)};K(c,h=>{u()?h(te,!1):h(G)})}t(M),t(C),V(()=>H=ie(C,1,`h-full flex flex-col border-r border-border-default bg-bg-secondary/80 transition-all duration-300
         max-md:fixed max-md:inset-y-0 max-md:left-0 max-md:z-50 max-md:w-64 max-md:shadow-2xl
         max-md:transition-transform max-md:duration-300 max-md:ease-in-out`,null,H,{"w-56":!u(),"w-14":u(),"max-md:translate-x-0":x(),"max-md:-translate-x-full":!x()})),j("click",Z,()=>x(!1)),j("click",_,()=>O.onshortcuthelp?.()),l(R,C),ve(),y()}fe(["click"]);function bt(R,O){de(O,!0);let m=ge(O,"showHelp",15,!1);const P=["/","/overview","/channels","/instances","/sessions","/usage","/cron","/approvals","/agents"];function y(){const n=document.activeElement;if(!n)return!1;const u=n.tagName.toLowerCase();return!!(u==="input"||u==="textarea"||u==="select"||n.isContentEditable)}function v(n){const u=n.metaKey||n.ctrlKey;if(n.key==="Escape"){if(m()){m(!1),n.preventDefault();return}document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur?.();return}if(!y()){if(u&&n.key.toLowerCase()==="k"){n.preventDefault(),ze("/").then(()=>{requestAnimationFrame(()=>{document.querySelector("textarea[data-chat-input], input[data-chat-input], textarea, .chat-input textarea")?.focus()})});return}if(u&&n.key==="/"){n.preventDefault(),m(!m());return}if(u&&n.key===","){n.preventDefault(),ze("/settings");return}if(u&&n.key>="1"&&n.key<="9"){const x=parseInt(n.key)-1;x<P.length&&(n.preventDefault(),ze(P[x]));return}}}_e("keydown",je,v),ve()}var ht=f('<kbd class="inline-flex items-center justify-center min-w-[1.75rem] h-7 px-1.5 rounded-md border border-border-default bg-bg-primary/80 text-[11px] font-mono font-medium text-accent-cyan shadow-[0_1px_0_1px_rgba(30,41,59,0.5)]"> </kbd>'),yt=f('<div class="flex items-center justify-between py-1"><span class="text-sm text-text-secondary"> </span> <div class="flex items-center gap-1"></div></div>'),wt=f('<div class="flex items-center gap-1.5 text-xs"><kbd class="inline-flex items-center justify-center w-5 h-5 rounded border border-border-default bg-bg-primary/80 text-[10px] font-mono text-accent-cyan"></kbd> <span class="text-text-muted truncate"> </span></div>'),_t=f('<div class="fixed inset-0 z-[999] flex items-center justify-center bg-black/60 backdrop-blur-sm"><div class="relative w-full max-w-md mx-4 rounded-xl border border-accent-cyan/30 bg-bg-surface/95 backdrop-blur-md shadow-[0_0_30px_rgba(124,77,255,0.15)] overflow-hidden"><div class="flex items-center justify-between px-5 py-4 border-b border-border-default"><h2 class="text-base font-semibold text-text-primary tracking-wide flex items-center gap-2"><svg class="w-4 h-4 text-accent-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg> Keyboard Shortcuts</h2> <button class="p-1 rounded-lg text-text-muted hover:text-text-primary hover:bg-bg-hover transition-colors" aria-label="Close"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div> <div class="px-5 py-4 space-y-2.5"></div> <div class="px-5 pb-4"><div class="rounded-lg border border-border-default/50 bg-bg-primary/40 p-3"><div class="text-[10px] uppercase tracking-widest text-text-muted/60 mb-2 font-semibold">Page Numbers</div> <div class="grid grid-cols-3 gap-x-3 gap-y-1"></div></div></div></div></div>');function kt(R,O){de(O,!0);let m=ge(O,"show",15,!1);const y=typeof navigator<"u"&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"‚åò":"Ctrl",v=[{keys:[y,"K"],desc:"Focus chat input"},{keys:[y,"/"],desc:"Toggle this help"},{keys:[y,","],desc:"Open Settings"},{keys:[y,"1‚Äì9"],desc:"Navigate to page by order"},{keys:["Esc"],desc:"Close modal / deselect"}],n=["Chat","Overview","Channels","Instances","Sessions","Usage","Cron Jobs","Approvals","Agents"];function u(){m(!1)}var x=Le(),S=oe(x);{var k=C=>{var H=_t(),U=a(H),T=a(U),Z=r(a(T),2);t(T);var q=r(T,2);ce(q,21,()=>v,pe,(s,p)=>{var b=yt(),_=a(b),M=a(_,!0);t(_);var c=r(_,2);ce(c,21,()=>e(p).keys,pe,(G,te)=>{var h=ht(),d=a(h,!0);t(h),V(()=>Q(d,e(te))),l(G,h)}),t(c),t(b),V(()=>Q(M,e(p).desc)),l(s,b)}),t(q);var Y=r(q,2),ee=a(Y),g=r(a(ee),2);ce(g,21,()=>n,pe,(s,p,b)=>{var _=wt(),M=a(_);M.textContent=b+1;var c=r(M,2),G=a(c,!0);t(c),t(_),V(()=>Q(G,e(p))),l(s,_)}),t(g),t(ee),t(Y),t(U),t(H),j("keydown",H,s=>{s.key==="Escape"&&m(!1)}),j("click",H,u),j("click",U,s=>s.stopPropagation()),j("click",Z,()=>m(!1)),l(C,H)};K(S,C=>{m()&&C(k)})}l(R,x),ve()}fe(["keydown","click"]);var Ct=f("<div></div>"),Mt=f(`<div class="space-y-4"><div><label for="setup-url" class="block text-sm font-medium text-text-secondary mb-2">Gateway URL</label> <input id="setup-url" type="text" placeholder="openclaw.example.com" class="w-full px-4 py-3 rounded-xl glass border border-border-default bg-bg-secondary
                       text-text-primary placeholder-text-muted text-center text-lg
                       focus:outline-none focus:border-accent-cyan focus:glow-cyan
                       transition-all duration-200"/> <p class="text-xs text-text-muted mt-2 text-center">The URL where your OpenClaw gateway is running</p></div> <div class="flex gap-3"><button class="flex-1 px-4 py-2.5 rounded-xl border border-border-default text-text-secondary
                       hover:bg-bg-hover transition-colors text-sm">Skip</button> <button class="flex-1 px-4 py-2.5 rounded-xl gradient-bg text-text-primary font-medium
                       hover:brightness-110 disabled:opacity-40 disabled:cursor-not-allowed
                       transition-all text-sm">Next ‚Üí</button></div></div>`),zt=f(`<div class="p-5 rounded-xl border border-accent-cyan/30 bg-accent-cyan/5 text-center space-y-3"><div class="flex justify-center"><svg class="w-8 h-8 animate-spin text-accent-cyan" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div> <p class="text-sm font-medium text-text-primary">Waiting for approval...</p> <p class="text-xs text-text-secondary">A pairing request has been sent to the gateway. The gateway owner needs to approve
                  this device from their Cortex UI or CLI.</p> <p class="text-xs text-text-muted">Auto-retrying every 5 seconds</p></div> <button class="w-full px-4 py-2.5 rounded-xl border border-border-default text-text-secondary
                       hover:bg-bg-hover transition-colors text-sm">Cancel</button>`,1),Lt=f(`<div><label for="setup-token" class="block text-sm font-medium text-text-secondary mb-2">Access Token</label> <input id="setup-token" type="password" placeholder="Paste gateway token" class="w-full px-4 py-3 rounded-xl glass border border-border-default bg-bg-secondary
                           text-text-primary placeholder-text-muted
                           focus:outline-none focus:border-accent-cyan focus:glow-cyan
                           transition-all duration-200"/></div>`),St=f('<button class="text-xs text-text-muted hover:text-accent-cyan transition-colors flex items-center gap-1 mx-auto"><svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path></svg> I have an access token</button>'),jt=f('<div class="p-3 rounded-xl border border-accent-red/30 bg-accent-red/10"><p class="text-sm text-accent-red"> </p></div>'),Tt=f('<span class="flex items-center justify-center gap-2"><svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Connecting...</span>'),At=f(`<div class="p-4 rounded-xl border border-accent-cyan/20 bg-accent-cyan/5"><p class="text-sm text-text-secondary"><strong class="text-text-primary">Two ways to connect:</strong></p> <ul class="text-sm text-text-secondary mt-2 space-y-1"><li>üîó <strong>Device pairing</strong> ‚Äî just click Connect, gateway owner approves</li> <li>üîë <strong>Token</strong> ‚Äî paste your gateway token for instant access</li></ul></div> <!> <!> <div class="flex gap-3"><button class="flex-1 px-4 py-2.5 rounded-xl border border-border-default text-text-secondary
                         hover:bg-bg-hover transition-colors text-sm">‚Üê Back</button> <button class="flex-1 px-4 py-2.5 rounded-xl gradient-bg text-text-primary font-medium
                         hover:brightness-110 disabled:opacity-40 disabled:cursor-not-allowed
                         transition-all text-sm"><!></button></div>`,1),Et=f('<div class="space-y-4"><!></div>'),Ot=f(`<div class="text-center space-y-4 py-4"><div class="text-5xl animate-bounce">üéâ</div> <h2 class="text-xl font-bold text-text-primary">Connected!</h2> <p class="text-text-secondary text-sm">You're all set. Your gateway is ready to go.</p> <div class="pt-2"><button class="px-6 py-2.5 rounded-xl gradient-bg text-text-primary font-medium
                       hover:brightness-110 transition-all text-sm">Let's go ‚Üí</button></div></div>`),Ht=f(`<div class="fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm"><div class="glass border border-border-default rounded-2xl max-w-lg w-full mx-4 overflow-hidden shadow-2xl" style="box-shadow: 0 0 60px rgba(124, 77, 255, 0.15), 0 0 120px rgba(0, 229, 255, 0.05);"><div class="px-8 pt-8 pb-4 text-center"><div class="text-5xl mb-3">üß†</div> <h1 class="text-2xl font-bold text-text-primary">Welcome to Cortex</h1> <p class="text-text-secondary mt-1 text-sm">Let's connect to your OpenClaw gateway</p></div> <div class="flex justify-center gap-2 py-3"></div> <div class="px-8 pb-8"><!></div></div></div>`);function Bt(R,O){de(O,!0);const m=ke(),P=Ce();let y=I(1),v=I(""),n=I(""),u=I(!1),x=I(!1),S=I(""),k=I(!1),C=I(!1),H=null;re(()=>{const s=localStorage.getItem("cortex:gatewayUrl"),p=localStorage.getItem("openclaw-setup-dismissed");!s&&!p&&m.state.status==="disconnected"&&(o(k,!0),Te().then(b=>{if(b.gatewayUrl){const _=b.gatewayWs||b.gatewayUrl.replace(/^http/,"ws");o(v,_,!0)}}))});function U(){o(k,!1),localStorage.setItem("openclaw-setup-dismissed","true")}function T(){H&&(clearInterval(H),H=null),o(C,!1)}async function Z(){if(!e(v).trim()){o(S,"Please enter your gateway URL");return}o(S,""),o(x,!0),T();try{const s=e(n).trim()||"__device_auth__";m.connect(e(v).trim(),s),await new Promise((p,b)=>{const _=setTimeout(()=>b(new Error("Connection timeout")),15e3),M=m.onStateChange(c=>{c.status==="connected"?(clearTimeout(_),M(),p()):c.status==="error"&&(clearTimeout(_),M(),b(new Error(c.error||"Connection failed")))})}),o(y,3),P.success("Connected!","You're all set."),setTimeout(()=>{o(k,!1)},3e3)}catch(s){const p=s instanceof Error?s.message:"Connection failed";if(p.toLowerCase().includes("pairing")||p.toLowerCase().includes("pair")){o(C,!0),o(S,"");const b=e(n).trim()||"__device_auth__";H=setInterval(()=>{m.connect(e(v).trim(),b);const _=m.onStateChange(M=>{M.status==="connected"?(_(),T(),o(x,!1),o(y,3),P.success("Device approved!","You're connected."),setTimeout(()=>{o(k,!1)},3e3)):M.status==="error"&&_()})},5e3);return}o(S,p,!0)}finally{e(C)||o(x,!1)}}function q(){let s=e(v).trim();s&&(s.match(/^(wss?|https?):\/\//)||(s="wss://"+s),s=s.replace(/^https:\/\//,"wss://").replace(/^http:\/\//,"ws://"),o(v,s,!0))}var Y=Le(),ee=oe(Y);{var g=s=>{var p=Ht(),b=a(p),_=r(a(b),2);ce(_,20,()=>[1,2,3],pe,(d,w)=>{var z=Ct();let D;V(()=>D=ie(z,1,"w-2 h-2 rounded-full transition-all duration-300",null,D,{"bg-accent-cyan":e(y)>=w,"scale-125":e(y)===w,"bg-border-default":e(y)<w})),l(d,z)}),t(_);var M=r(_,2),c=a(M);{var G=d=>{var w=Mt(),z=a(w),D=r(a(z),2);ye(D),he(2),t(z);var ae=r(z,2),N=a(ae),B=r(N,2);t(ae),t(w),V(L=>B.disabled=L,[()=>!e(v).trim()]),_e("blur",D,q),we(D,()=>e(v),L=>o(v,L)),j("click",N,U),j("click",B,()=>{q(),o(y,2)}),l(d,w)},te=d=>{var w=Et(),z=a(w);{var D=N=>{var B=zt(),L=r(oe(B),2);j("click",L,()=>{T(),o(x,!1)}),l(N,B)},ae=N=>{var B=At(),L=r(oe(B),2);{var $=E=>{var J=Lt(),xe=r(a(J),2);ye(xe),t(J),we(xe,()=>e(n),Me=>o(n,Me)),l(E,J)},W=E=>{var J=St();j("click",J,()=>o(u,!0)),l(E,J)};K(L,E=>{e(u)?E($):E(W,!1)})}var se=r(L,2);{var ne=E=>{var J=jt(),xe=a(J),Me=a(xe,!0);t(xe),t(J),V(()=>Q(Me,e(S))),l(E,J)};K(se,E=>{e(S)&&E(ne)})}var ue=r(se,2),le=a(ue),i=r(le,2),A=a(i);{var F=E=>{var J=Tt();l(E,J)},X=E=>{var J=be("Connect");l(E,J)};K(A,E=>{e(x)?E(F):E(X,!1)})}t(i),t(ue),V(()=>{le.disabled=e(x),i.disabled=e(x)}),j("click",le,()=>{o(y,1),o(S,"")}),j("click",i,Z),l(N,B)};K(z,N=>{e(C)?N(D):N(ae,!1)})}t(w),l(d,w)},h=d=>{var w=Ot(),z=r(a(w),6),D=a(z);t(z),t(w),j("click",D,()=>o(k,!1)),l(d,w)};K(c,d=>{e(y)===1?d(G):e(y)===2?d(te,1):e(y)===3&&d(h,2)})}t(M),t(b),t(p),l(s,p)};K(ee,s=>{e(k)&&s(g)})}l(R,Y),ve()}fe(["click"]);var Ut=f('<div class="fixed inset-0 bg-black/60 z-40 md:hidden backdrop-blur-sm" role="button" tabindex="0" aria-label="Close navigation"></div>'),Dt=f('<div class="h-screen w-screen overflow-hidden bg-bg-primary flex"><a href="#main-content" class="skip-to-content">Skip to content</a> <!> <!> <div id="main-content" class="flex-1 flex flex-col min-w-0 overflow-hidden" role="main"><header class="flex items-center gap-3 px-3 py-2 border-b border-border-default bg-bg-secondary/50 md:hidden flex-shrink-0"><button class="p-2 rounded-lg hover:bg-bg-hover text-text-muted hover:text-accent-cyan transition-colors" aria-label="Open navigation menu"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button> <img src="/logo.png" alt="Cortex" class="w-6 h-6 rounded-lg"/> <span class="text-sm font-bold gradient-text tracking-wider">CORTEX</span></header> <!></div> <!> <!> <!> <!> <!></div>');function Qt(R,O){de(O,!0);const m=ke(),P=De(),y=Ue(),v=Ce(),n=Ie();Ve();let u=I(!1),x=I(!1),S=I(!1),k=I(!1),C=I(!1);re(()=>{Te().then(()=>{m.init()})}),re(()=>{typeof window<"u"&&"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").catch(()=>{})}),re(()=>{if(m.state.status==="connected"&&!e(u)){o(u,!0),P.fetchSessions();const c=P.activeKey||m.state.mainSessionKey;c&&(P.setActiveSession(c),y.loadHistory(c))}m.state.status==="disconnected"&&o(u,!1)}),re(()=>{const c=P.activeKey;c&&c!==y.activeSessionKey&&Se.connected&&y.loadHistory(c)}),re(()=>{m.state.status==="error"&&m.state.error&&v.error("Connection Error",m.state.error,8e3)}),re(()=>{He(()=>n.init())}),re(()=>Se.on("chat",G=>{const te=G;if(te.state!=="final"||!n.notifyOnMessages)return;const h=te.message;if(!h||h.role!=="assistant")return;let d="";if(typeof h.content=="string"?d=h.content:Array.isArray(h.content)&&(d=h.content.filter(z=>z.type==="text"&&typeof z.text=="string").map(z=>z.text).join(" ")),!d)return;const w=d.length>100?d.slice(0,100)+"‚Ä¶":d;n.notify("Cortex ‚Äî New message",w)})),re(()=>m.onStateChange(G=>{G.status==="disconnected"&&n.notifyOnDisconnect&&n.notify("Cortex ‚Äî Connection lost","The gateway connection was lost. Attempting to reconnect‚Ä¶")}));var H=Dt();_e("keydown",je,c=>{c.key==="Escape"&&e(k)&&o(k,!1)});var U=r(a(H),2);{var T=c=>{var G=Ut();j("click",G,()=>o(k,!1)),j("keydown",G,te=>te.key==="Escape"&&o(k,!1)),l(c,G)};K(U,c=>{e(k)&&c(T)})}var Z=r(U,2);gt(Z,{onshortcuthelp:()=>o(C,!0),onnavigate:()=>o(k,!1),get collapsed(){return e(S)},set collapsed(c){o(S,c,!0)},get mobileOpen(){return e(k)},set mobileOpen(c){o(k,c,!0)}});var q=r(Z,2),Y=a(q),ee=a(Y);he(4),t(Y);var g=r(Y,2);Be(g,()=>O.children),t(q);var s=r(q,2);Xe(s,{});var p=r(s,2);rt(p,{get show(){return e(x)},set show(c){o(x,c,!0)}});var b=r(p,2);bt(b,{get showHelp(){return e(C)},set showHelp(c){o(C,c,!0)}});var _=r(b,2);kt(_,{get show(){return e(C)},set show(c){o(C,c,!0)}});var M=r(_,2);Bt(M,{}),t(H),j("click",ee,()=>o(k,!0)),l(R,H),ve()}fe(["click","keydown"]);export{Qt as component,Jt as universal};
