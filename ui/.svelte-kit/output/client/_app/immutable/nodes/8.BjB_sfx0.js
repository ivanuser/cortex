import{d as ve,a as z,b as i,f as c,s as b,c as Mt,t as ue}from"../chunks/B2A7gHtL.js";import{p as xe,s as y,a as Ct,u as pe,b as me,t as _,c as fe,g as t,d as v,e as be,f as l,$ as ge,h as s,n as Nt,r as a,j as K,k as _e,i as R,l as Ot}from"../chunks/qR_TM3YX.js";import{i as h}from"../chunks/DpBBTLWw.js";import{g as he,a as M,r as ye,b as Y,e as Z,s as Jt,i as $}from"../chunks/BhtVncI_.js";import{h as we}from"../chunks/CXQ1lKJR.js";import{b as jt}from"../chunks/nnazh41B.js";var ke=Mt('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>'),Se=c('<div class="rounded-xl border border-border-default bg-bg-secondary/50 p-8 text-center"><div class="text-text-muted text-sm">Connect to the gateway to use debug tools.</div></div>'),Ce=Mt('<svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg> Executing…',1),Ne=c('<div class="absolute top-2 right-2 px-2 py-0.5 rounded text-[10px] font-bold bg-red-500/20 text-red-400 uppercase tracking-wider">Error</div> <pre class="p-3 text-sm font-mono text-red-400 overflow-auto max-h-[280px] whitespace-pre-wrap"> </pre>',1),Oe=c('<div class="absolute top-2 right-2 px-2 py-0.5 rounded text-[10px] font-bold bg-accent-green/20 text-accent-green uppercase tracking-wider">OK</div> <pre class="p-3 text-sm font-mono text-accent-green/90 overflow-auto max-h-[280px] whitespace-pre-wrap"> </pre>',1),Je=c('<div class="h-full flex items-center justify-center text-text-muted/40 text-sm">Response will appear here</div>'),je=c("<button> </button>"),Me=c('<div class="mt-4 pt-3 border-t border-border-default"><div class="text-xs font-medium text-text-muted mb-2">Recent Calls</div> <div class="flex flex-wrap gap-2"></div></div>'),Ee=c('<div class="rounded-xl border border-red-500/30 bg-red-500/5 p-4 text-red-400 text-sm"> </div>'),He=c("<span> </span>"),We=c('<div><div class="text-[11px] text-text-muted uppercase tracking-wider"> </div> <div class="text-sm text-text-secondary font-mono truncate"> </div></div>'),De=c('<div class="mt-4 pt-3 border-t border-border-default"><details><summary class="text-xs text-text-muted cursor-pointer hover:text-text-secondary transition-colors">Full JSON</summary> <pre class="mt-2 p-3 bg-bg-input rounded-lg text-xs font-mono text-text-secondary overflow-auto max-h-48"> </pre></details></div>'),Re=c('<div class="grid grid-cols-2 gap-3"></div> <!>',1),Ae=c('<div class="text-sm text-text-muted">No data loaded</div>'),Pe=c('<div><div class="text-[11px] text-text-muted uppercase tracking-wider"> </div> <div class="text-sm text-text-secondary font-mono truncate"> </div></div>'),ze=c('<div class="mt-4 pt-3 border-t border-border-default"><details><summary class="text-xs text-text-muted cursor-pointer hover:text-text-secondary transition-colors">Full JSON</summary> <pre class="mt-2 p-3 bg-bg-input rounded-lg text-xs font-mono text-text-secondary overflow-auto max-h-48"> </pre></details></div>'),Ke=c('<div class="grid grid-cols-2 gap-3"></div> <!>',1),Be=c('<div class="text-sm text-text-muted">No data loaded</div>'),Le=c(`<div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-bg-input/50 border border-border-default/50
                            hover:border-accent-amber/30 transition-colors group"><span class="text-[10px] text-text-muted font-mono w-5 text-right"></span> <span class="text-sm font-mono text-text-secondary group-hover:text-accent-amber transition-colors truncate"> </span></div>`),Ve=c('<div class="space-y-1.5 max-h-64 overflow-y-auto"></div>'),Fe=c('<div class="text-sm text-text-muted">No models available</div>'),Te=c('<pre class="p-3 bg-bg-input rounded-lg text-xs font-mono text-text-secondary overflow-auto max-h-64 whitespace-pre-wrap"> </pre>'),Ge=c('<div class="text-sm text-text-muted">No heartbeat data</div>'),qe=c(`<div class="rounded-xl border border-accent-cyan/30 bg-bg-secondary/60 p-5
                  shadow-[0_0_30px_rgba(0,229,255,0.06)]"><div class="flex items-center justify-between mb-4"><div><h2 class="text-lg font-semibold text-accent-cyan flex items-center gap-2"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg> Manual RPC Console</h2> <p class="text-xs text-text-muted mt-0.5">Send raw gateway methods with JSON params. <kbd class="text-accent-cyan/70">Ctrl+Enter</kbd> to execute.</p></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-4"><div class="space-y-3"><div><label for="rpc-method" class="block text-xs font-medium text-text-muted mb-1.5">Method</label> <input id="rpc-method" placeholder="e.g. status, health, models.list" class="w-full bg-bg-input border border-border-default rounded-lg px-3 py-2.5
                       font-mono text-sm text-text-primary placeholder:text-text-muted/50
                       focus:outline-none focus:border-accent-cyan focus:shadow-[0_0_8px_rgba(0,229,255,0.15)]
                       transition-all"/></div> <div><label for="rpc-params" class="block text-xs font-medium text-text-muted mb-1.5">Params (JSON)</label> <textarea id="rpc-params" rows="6" class="w-full bg-bg-input border border-border-default rounded-lg px-3 py-2.5
                       font-mono text-sm text-text-primary placeholder:text-text-muted/50
                       focus:outline-none focus:border-accent-cyan focus:shadow-[0_0_8px_rgba(0,229,255,0.15)]
                       transition-all resize-y"></textarea></div> <button class="w-full py-2.5 rounded-lg text-sm font-medium transition-all
                     bg-accent-cyan/10 border border-accent-cyan/40 text-accent-cyan
                     hover:bg-accent-cyan/20 hover:border-accent-cyan hover:shadow-[0_0_15px_rgba(0,229,255,0.2)]
                     disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"><!></button></div> <div class="flex flex-col"><div class="text-xs font-medium text-text-muted mb-1.5">Result</div> <div class="flex-1 bg-bg-input border border-border-default rounded-lg overflow-hidden relative"><!></div></div></div> <!></div> <!> <div class="grid grid-cols-1 lg:grid-cols-2 gap-5"><div class="rounded-xl border border-border-default bg-bg-secondary/50 p-5"><div class="flex items-center justify-between mb-4"><h2 class="text-sm font-semibold text-text-primary flex items-center gap-2"><span class="w-2 h-2 rounded-full bg-accent-green animate-pulse"></span> Status</h2> <!></div> <!></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-5"><div class="flex items-center gap-2 mb-4"><span class="w-2 h-2 rounded-full bg-accent-purple"></span> <h2 class="text-sm font-semibold text-text-primary">Health</h2></div> <!></div></div> <div class="grid grid-cols-1 lg:grid-cols-2 gap-5"><div class="rounded-xl border border-border-default bg-bg-secondary/50 p-5"><div class="flex items-center gap-2 mb-4"><span class="w-2 h-2 rounded-full bg-accent-amber"></span> <h2 class="text-sm font-semibold text-text-primary">Models</h2> <span class="ml-auto text-xs text-text-muted font-mono"> </span></div> <!></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-5"><div class="flex items-center gap-2 mb-4"><span class="w-2 h-2 rounded-full bg-accent-pink animate-pulse"></span> <h2 class="text-sm font-semibold text-text-primary">Last Heartbeat</h2></div> <!></div></div>`,1),Ie=c(`<div class="h-full overflow-y-auto"><div class="max-w-7xl mx-auto p-4 md:p-6 space-y-6"><div class="flex items-center justify-between flex-wrap gap-3"><div><h1 class="text-2xl font-bold text-text-primary flex items-center gap-3"><span class="text-accent-cyan">⚡</span> Debug Console</h1> <p class="text-sm text-text-muted mt-1">Gateway diagnostics, snapshots, and raw RPC access.</p></div> <button class="px-4 py-2 rounded-lg text-sm border border-border-default hover:border-accent-cyan
               text-text-secondary hover:text-accent-cyan transition-all
               disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!> Refresh All</button></div> <!></div></div>`);function tr(Et,Ht){xe(Ht,!0);const tt=he();let A=y(!1),N=y(null),P=y(null),B=y(Ct([])),et=y(null),L=y(null),E=y("status"),V=y("{}"),F=y(null),T=y(null),G=y(!1),H=y(Ct([]));pe(()=>{tt.state.status==="connected"&&me(()=>{!t(A)&&!t(N)&&pt()})});async function pt(){if(M.connected){v(A,!0),v(L,null);try{const[o,x,m,C]=await Promise.all([M.call("status",{}).catch(()=>null),M.call("health",{}).catch(()=>null),M.call("models.list",{}).catch(()=>null),M.call("last-heartbeat",{}).catch(()=>null)]);v(N,o,!0),v(P,x,!0),v(B,Array.isArray(m?.models)?m.models:[],!0),v(et,C,!0)}catch(o){v(L,String(o),!0)}finally{v(A,!1)}}}async function mt(){if(!M.connected||!t(E).trim())return;v(G,!0),v(T,null),v(F,null);const o=t(E).trim(),x=t(V).trim();try{const m=x?JSON.parse(x):{},C=await M.call(o,m),D=JSON.stringify(C,null,2);v(F,D,!0),v(H,[{method:o,params:x,result:D,ts:Date.now()},...t(H)].slice(0,20),!0)}catch(m){const C=String(m);v(T,C,!0),v(H,[{method:o,params:x,error:C,ts:Date.now()},...t(H)].slice(0,20),!0)}finally{v(G,!1)}}function q(o){return o?Object.entries(o).map(([x,m])=>[x,typeof m=="object"?JSON.stringify(m,null,2):String(m)]):[]}function Wt(o){return o?JSON.stringify(o,null,2):"No heartbeat data"}function ft(o){(o.ctrlKey||o.metaKey)&&o.key==="Enter"&&(o.preventDefault(),mt())}function Dt(o){v(E,o.method,!0),v(V,o.params,!0)}let W=R(()=>!t(N)||typeof t(N)!="object"?null:t(N).securityAudit?.summary??null),I=R(()=>{if(!t(W))return"";const o=t(W).critical??0,x=t(W).warn??0;return o>0?"error":x>0?"warn":"ok"});var rt=Ie();we("1cmtigg",o=>{be(()=>{ge.title="Debug — Cortex"})});var bt=s(rt),at=s(bt),Q=l(s(at),2),Rt=s(Q);{var At=o=>{var x=ke();i(o,x)};h(Rt,o=>{t(A)&&o(At)})}Nt(),a(Q),a(at);var Pt=l(at,2);{var zt=o=>{var x=Se();i(o,x)},Kt=o=>{var x=qe(),m=K(x),C=l(s(m),2),D=s(C),st=s(D),ot=l(s(st),2);ye(ot),a(st);var lt=l(st,2),U=l(s(lt),2);_e(U),Y(U,"placeholder","{ }"),a(lt);var X=l(lt,2),Bt=s(X);{var Lt=e=>{var r=Ce();Nt(),i(e,r)},Vt=e=>{var r=ue("Execute");i(e,r)};h(Bt,e=>{t(G)?e(Lt):e(Vt,!1)})}a(X),a(D);var gt=l(D,2),_t=l(s(gt),2),Ft=s(_t);{var Tt=e=>{var r=Ne(),n=l(K(r),2),u=s(n,!0);a(n),_(()=>b(u,t(T))),i(e,r)},Gt=e=>{var r=Oe(),n=l(K(r),2),u=s(n,!0);a(n),_(()=>b(u,t(F))),i(e,r)},qt=e=>{var r=Je();i(e,r)};h(Ft,e=>{t(T)?e(Tt):t(F)?e(Gt,1):e(qt,!1)})}a(_t),a(gt),a(C);var It=l(C,2);{var Qt=e=>{var r=Me(),n=l(s(r),2);Z(n,21,()=>t(H).slice(0,8),$,(u,w)=>{var f=je(),d=s(f,!0);a(f),_(p=>{Jt(f,1,`px-2.5 py-1 rounded text-xs font-mono border transition-all
                         ${t(w).error?"border-red-500/30 text-red-400/70 hover:border-red-500/60 hover:text-red-400":"border-accent-green/30 text-accent-green/70 hover:border-accent-green/60 hover:text-accent-green"}
                         bg-bg-input hover:bg-bg-hover`),Y(f,"title",`${t(w).method??""} @ ${p??""}`),b(d,t(w).method)},[()=>new Date(t(w).ts).toLocaleTimeString()]),z("click",f,()=>Dt(t(w))),i(u,f)}),a(n),a(r),i(e,r)};h(It,e=>{t(H).length>0&&e(Qt)})}a(m);var ht=l(m,2);{var Ut=e=>{var r=Ee(),n=s(r,!0);a(r),_(()=>b(n,t(L))),i(e,r)};h(ht,e=>{t(L)&&e(Ut)})}var dt=l(ht,2),it=s(dt),nt=s(it),Xt=l(s(nt),2);{var Yt=e=>{var r=He(),n=s(r,!0);a(r),_(()=>{Jt(r,1,`px-2 py-0.5 rounded text-xs font-medium
                          ${t(I)==="error"?"bg-red-500/20 text-red-400":t(I)==="warn"?"bg-amber-500/20 text-amber-400":"bg-accent-green/20 text-accent-green"}`),b(n,t(I)==="error"?`${t(W).critical} critical`:t(I)==="warn"?`${t(W).warn} warnings`:"Clean")}),i(e,r)};h(Xt,e=>{t(W)&&e(Yt)})}a(nt);var Zt=l(nt,2);{var $t=e=>{var r=Re(),n=K(r);Z(n,21,()=>q(t(N)).filter(([,d])=>!d.startsWith("{")&&!d.startsWith("[")),$,(d,p)=>{var g=R(()=>Ot(t(p),2));let k=()=>t(g)[0],O=()=>t(g)[1];var S=We(),J=s(S),ut=s(J,!0);a(J);var j=l(J,2),xt=s(j,!0);a(j),a(S),_(()=>{b(ut,k()),Y(j,"title",O()),b(xt,O())}),i(d,S)}),a(n);var u=l(n,2);{var w=d=>{var p=De(),g=s(p),k=l(s(g),2),O=s(k,!0);a(k),a(g),a(p),_(S=>b(O,S),[()=>JSON.stringify(t(N),null,2)]),i(d,p)},f=R(()=>q(t(N)).some(([,d])=>d.startsWith("{")||d.startsWith("[")));h(u,d=>{t(f)&&d(w)})}i(e,r)},te=e=>{var r=Ae();i(e,r)};h(Zt,e=>{t(N)?e($t):e(te,!1)})}a(it);var yt=l(it,2),ee=l(s(yt),2);{var re=e=>{var r=Ke(),n=K(r);Z(n,21,()=>q(t(P)).filter(([,d])=>!d.startsWith("{")&&!d.startsWith("[")),$,(d,p)=>{var g=R(()=>Ot(t(p),2));let k=()=>t(g)[0],O=()=>t(g)[1];var S=Pe(),J=s(S),ut=s(J,!0);a(J);var j=l(J,2),xt=s(j,!0);a(j),a(S),_(()=>{b(ut,k()),Y(j,"title",O()),b(xt,O())}),i(d,S)}),a(n);var u=l(n,2);{var w=d=>{var p=ze(),g=s(p),k=l(s(g),2),O=s(k,!0);a(k),a(g),a(p),_(S=>b(O,S),[()=>JSON.stringify(t(P),null,2)]),i(d,p)},f=R(()=>q(t(P)).some(([,d])=>d.startsWith("{")||d.startsWith("[")));h(u,d=>{t(f)&&d(w)})}i(e,r)},ae=e=>{var r=Be();i(e,r)};h(ee,e=>{t(P)?e(re):e(ae,!1)})}a(yt),a(dt);var wt=l(dt,2),ct=s(wt),vt=s(ct),kt=l(s(vt),4),se=s(kt);a(kt),a(vt);var oe=l(vt,2);{var le=e=>{var r=Ve();Z(r,21,()=>t(B),$,(n,u,w)=>{var f=Le(),d=s(f);d.textContent=w+1;var p=l(d,2),g=s(p,!0);a(p),a(f),_(k=>b(g,k),[()=>typeof t(u)=="object"&&t(u)!==null?t(u).id??t(u).name??JSON.stringify(t(u)):String(t(u))]),i(n,f)}),a(r),i(e,r)},de=e=>{var r=Fe();i(e,r)};h(oe,e=>{t(B).length>0?e(le):e(de,!1)})}a(ct);var St=l(ct,2),ie=l(s(St),2);{var ne=e=>{var r=Te(),n=s(r,!0);a(r),_(u=>b(n,u),[()=>Wt(t(et))]),i(e,r)},ce=e=>{var r=Ge();i(e,r)};h(ie,e=>{t(et)?e(ne):e(ce,!1)})}a(St),a(wt),_(e=>{X.disabled=e,b(se,`${t(B).length??""} registered`)},[()=>t(G)||!t(E).trim()]),z("keydown",ot,ft),jt(ot,()=>t(E),e=>v(E,e)),z("keydown",U,ft),jt(U,()=>t(V),e=>v(V,e)),z("click",X,mt),i(o,x)};h(Pt,o=>{tt.state.status!=="connected"?o(zt):o(Kt,!1)})}a(bt),a(rt),_(()=>Q.disabled=t(A)||tt.state.status!=="connected"),z("click",Q,pt),i(Et,rt),fe()}ve(["click","keydown"]);export{tr as component};
