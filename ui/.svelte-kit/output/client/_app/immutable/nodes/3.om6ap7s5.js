import{d as aa,a as rt,b as l,f as n,s as d,c as ra,e as Se,t as sa}from"../chunks/B2A7gHtL.js";import{p as ia,s as S,a as Ut,u as da,b as Yt,t as _,c as la,e as oa,d as o,g as t,f as s,$ as na,h as a,n as Et,r as e,i as lt,j as qt,k as va}from"../chunks/qR_TM3YX.js";import{i as L}from"../chunks/DpBBTLWw.js";import{g as ca,e as ut,a as st,s as gt,i as wt,r as xa}from"../chunks/BhtVncI_.js";import{h as ua}from"../chunks/CXQ1lKJR.js";import{b as Ae}from"../chunks/nnazh41B.js";import{i as pa,s as fa,b as ma}from"../chunks/DVP7Iy08.js";import{g as ba}from"../chunks/Be_uRYmX.js";import{f as Ce}from"../chunks/DPrxUVm_.js";var _a=ra('<svg class="w-3.5 h-3.5 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>'),ga=n('<span class="inline-block mt-1 px-1.5 py-0.5 rounded text-[9px] uppercase tracking-wider font-semibold bg-accent-purple/20 text-accent-purple">default</span>'),ya=n('<button><div class="flex items-center gap-2"><span class="text-lg"> </span> <div class="min-w-0 flex-1"><div> </div> <div class="text-[10px] text-text-muted font-mono"> </div></div></div> <!></button>'),ha=n("<option> </option>"),ka=n('<div class="md:hidden flex-shrink-0 p-3 border-b border-border-default bg-bg-secondary/30"><select class="w-full px-3 py-2 text-sm rounded-lg border border-border-default bg-bg-tertiary text-text-primary focus:outline-none focus:border-accent-cyan"><option disabled="">Select agentâ€¦</option><!></select></div>'),wa=n('<div class="flex-1 flex items-center justify-center text-text-muted">Select an agent to view details</div>'),Sa=n('<span class="px-1.5 py-0.5 rounded bg-accent-purple/20 text-accent-purple text-[10px] uppercase font-semibold">default</span>'),Aa=n("<button> </button>"),Ca=n("<option> </option>"),ja=n("<option> </option>"),Fa=n(`<div class="p-6 space-y-6"><div class="glass rounded-xl border border-border-default p-5"><h3 class="text-sm font-semibold text-text-primary mb-1">Overview</h3> <p class="text-xs text-text-muted mb-4">Workspace paths and identity metadata.</p> <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4"><div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-1">Workspace</div> <div class="text-sm font-mono text-text-primary"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-1">Primary Model</div> <div class="text-sm font-mono text-text-primary"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-1">Identity Name</div> <div class="text-sm text-text-primary"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-1">Default</div> <div class="text-sm text-text-primary"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-1">Identity Emoji</div> <div class="text-lg"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-1">Skills Filter</div> <div class="text-sm text-text-primary"> </div></div></div></div> <div class="glass rounded-xl border border-border-default p-5"><h3 class="text-sm font-semibold text-text-primary mb-1">Model Selection</h3> <p class="text-xs text-text-muted mb-4">Primary model and fallback configuration.</p> <div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div><label class="block text-xs text-text-muted mb-1.5">Primary model (default)</label> <select class="w-full bg-bg-input border border-border-default rounded-lg px-3 py-2 text-sm text-text-primary
                             focus:outline-none focus:border-accent-cyan transition-all"><option>â€” select â€”</option><!><!></select></div> <div><label class="block text-xs text-text-muted mb-1.5">Fallbacks (comma-separated)</label> <input placeholder="provider/model, provider/model" class="w-full bg-bg-input border border-border-default rounded-lg px-3 py-2 text-sm text-text-primary
                             placeholder:text-text-muted/40 focus:outline-none focus:border-accent-cyan transition-all"/></div></div> <div class="flex justify-end gap-2 mt-4"><button class="px-3 py-1.5 rounded-lg text-xs border border-border-default text-text-secondary hover:text-text-primary transition-all">Reload Config</button> <button class="px-4 py-1.5 rounded-lg text-xs font-medium bg-accent-cyan/20 text-accent-cyan border border-accent-cyan/30
                           hover:bg-accent-cyan/30 transition-all disabled:opacity-50"> </button></div></div></div>`),La=n('<div class="px-3 py-1.5 text-[10px] font-mono text-text-muted/60 truncate border-b border-border-default/50"> </div>'),Ma=n('<div class="p-4 text-text-muted text-sm">Loadingâ€¦</div>'),Wa=n('<div class="p-4 text-text-muted text-sm">No workspace files</div>'),Ia=n('<span class="px-1 py-0.5 rounded text-[9px] bg-amber-500/20 text-amber-400">missing</span>'),Ra=n('<button><span class="text-xs"> </span> <div class="min-w-0 flex-1"><div class="truncate font-mono text-xs"> </div> <div class="text-[10px] text-text-muted"> <!></div></div> <!></button>'),Ta=n('<div class="flex-1 flex items-center justify-center text-text-muted text-sm">Select a file to view or edit</div>'),Na=n('<div class="flex-1 flex items-center justify-center text-text-muted text-sm"> </div>'),Oa=n('<span class="w-2 h-2 rounded-full bg-accent-amber"></span>'),Da=n('<div class="flex items-center justify-between px-4 py-2 border-b border-border-default bg-bg-secondary/30 flex-shrink-0"><div class="flex items-center gap-2"><span class="text-sm font-mono font-medium text-text-primary"> </span> <!></div> <div class="flex items-center gap-2"><button class="px-2.5 py-1 rounded text-xs text-text-muted hover:text-text-primary transition-all disabled:opacity-30">Reset</button> <button> </button></div></div> <textarea class="flex-1 w-full p-4 bg-bg-primary text-text-primary font-mono text-sm resize-none focus:outline-none border-none" spellcheck="false"></textarea>',1),Pa=n('<div class="flex-1 flex min-h-0 h-full"><div class="w-56 border-r border-border-default bg-bg-tertiary/30 overflow-y-auto flex-shrink-0"><div class="p-3 border-b border-border-default flex items-center justify-between"><span class="text-xs font-medium text-text-muted">Core Files</span> <button class="text-[10px] text-text-muted hover:text-accent-cyan transition-all"> </button></div> <!> <!></div> <div class="flex-1 flex flex-col min-w-0"><!></div></div>'),Ba=n('<span class="ml-1 px-1.5 py-0.5 rounded text-[10px] bg-accent-cyan/20 text-accent-cyan font-mono"> </span>'),Ea=n('<div class="flex items-center justify-between py-1"><span class="text-xs font-mono text-text-secondary"> </span> <span> </span></div>'),Ja=n('<div class="rounded-lg border border-border-default bg-bg-tertiary/30 p-3"><div class="text-xs font-semibold text-text-primary mb-2 uppercase tracking-wider"> </div> <div class="space-y-1"></div></div>'),za=n('<div class="p-6 space-y-4"><div class="glass rounded-xl border border-border-default p-5"><h3 class="text-sm font-semibold text-text-primary mb-1">Tool Policy</h3> <p class="text-xs text-text-muted mb-4">Tool access configuration for this agent. <!></p> <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div></div></div>'),$a=n('<div class="text-text-muted text-sm">Loading skillsâ€¦</div>'),Ga=n('<div class="text-text-muted text-sm">No skills installed.</div>'),Va=n('<span class="px-1 py-0.5 rounded text-[9px] bg-accent-purple/20 text-accent-purple">bundled</span>'),Ka=n('<div class="text-[10px] text-text-muted font-mono truncate"> </div>'),Ua=n('<div class="rounded-lg border border-border-default bg-bg-tertiary/30 p-3"><div class="flex items-center gap-2 mb-1"><span class="text-xs">âš¡</span> <span class="text-sm font-medium text-text-primary"> </span> <!></div> <!></div>'),Ya=n('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3"></div>'),qa=n('<div class="p-6 space-y-4"><div class="glass rounded-xl border border-border-default p-5"><div class="flex items-center justify-between mb-4"><div><h3 class="text-sm font-semibold text-text-primary">Skills</h3> <p class="text-xs text-text-muted">Installed skills available to this agent.</p></div> <button class="px-3 py-1.5 rounded-lg text-xs border border-border-default text-text-secondary hover:text-accent-cyan hover:border-accent-cyan/30 transition-all disabled:opacity-50"> </button></div> <!></div></div>'),Ha=n('<div class="glass rounded-xl border border-border-default p-5"><h3 class="text-sm font-semibold text-text-primary mb-1">Agent Context</h3> <p class="text-xs text-text-muted mb-4">Workspace, identity, and model configuration.</p> <div class="grid grid-cols-2 gap-3"><div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-0.5">Workspace</div> <div class="text-xs font-mono text-text-primary"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-0.5">Model</div> <div class="text-xs font-mono text-text-primary"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-0.5">Identity</div> <div class="text-xs font-mono text-text-primary"> </div></div> <div><div class="text-[10px] uppercase tracking-wider text-text-muted mb-0.5">Default</div> <div class="text-xs font-mono text-text-primary"> </div></div></div></div>'),Qa=n('<div class="text-text-muted text-sm">Load channels to see live status.</div>'),Xa=n('<div class="text-text-muted text-sm">No channels found.</div>'),Za=n('<div class="flex items-center justify-between py-1.5 border-b border-border-default/30 last:border-0"><div><div class="text-sm font-medium text-text-primary"> </div> <div class="text-[10px] text-text-muted"> </div></div> <span></span></div>'),tr=n('<div class="space-y-2"></div>'),er=n('<div class="p-6 space-y-4"><div class="grid grid-cols-1 lg:grid-cols-2 gap-4"><!> <div class="glass rounded-xl border border-border-default p-5"><div class="flex items-center justify-between mb-4"><div><h3 class="text-sm font-semibold text-text-primary">Channels</h3> <p class="text-xs text-text-muted">Gateway-wide channel status.</p></div> <button class="px-3 py-1.5 rounded-lg text-xs border border-border-default text-text-secondary hover:text-accent-cyan transition-all disabled:opacity-50"> </button></div> <!></div></div></div>'),ar=n('<div class="glass rounded-xl border border-border-default p-5"><h3 class="text-sm font-semibold text-text-primary mb-1">Agent Context</h3> <p class="text-xs text-text-muted mb-3">Workspace and scheduling targets.</p> <div class="grid grid-cols-2 gap-3 text-xs"><div><span class="text-text-muted">Workspace</span> <div class="font-mono text-text-primary"> </div></div> <div><span class="text-text-muted">Model</span> <div class="font-mono text-text-primary"> </div></div></div></div>'),rr=n('<div class="text-text-muted text-sm">Loadingâ€¦</div>'),sr=n('<div class="text-text-muted text-sm">No jobs assigned to this agent.</div>'),ir=n('<span class="px-1.5 py-0.5 rounded bg-bg-tertiary font-mono"> </span>'),dr=n('<span class="px-1.5 py-0.5 rounded bg-bg-tertiary font-mono"> </span>'),lr=n('<div class="rounded-lg border border-border-default bg-bg-tertiary/30 p-3"><div class="flex items-center justify-between mb-1"><span class="text-sm font-medium text-text-primary"> </span> <span> </span></div> <div class="flex items-center gap-2 text-[10px] text-text-muted"><span class="px-1.5 py-0.5 rounded bg-bg-tertiary font-mono"> </span> <!> <!></div></div>'),or=n('<div class="space-y-2"></div>'),nr=n('<div class="p-6 space-y-4"><div class="grid grid-cols-1 lg:grid-cols-2 gap-4"><!> <div class="glass rounded-xl border border-border-default p-5"><div class="flex items-center justify-between mb-3"><div><h3 class="text-sm font-semibold text-text-primary">Scheduler</h3> <p class="text-xs text-text-muted">Gateway cron status.</p></div> <button class="px-3 py-1.5 rounded-lg text-xs border border-border-default text-text-secondary hover:text-accent-cyan transition-all disabled:opacity-50"> </button></div> <div class="grid grid-cols-3 gap-4"><div class="text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-[10px] text-text-muted uppercase">Enabled</div></div> <div class="text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-[10px] text-text-muted uppercase">Jobs</div></div> <div class="text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-[10px] text-text-muted uppercase">Next Wake</div></div></div></div></div> <div class="glass rounded-xl border border-border-default p-5"><h3 class="text-sm font-semibold text-text-primary mb-1">Agent Cron Jobs</h3> <p class="text-xs text-text-muted mb-4">Scheduled jobs targeting this agent.</p> <!></div></div>'),vr=n('<div class="flex-shrink-0 border-b border-border-default"><div class="px-4 md:px-6 pt-4 pb-3 flex items-center justify-between flex-wrap gap-2"><div class="flex items-center gap-3"><span class="text-2xl"> </span> <div><h2 class="text-lg font-bold text-text-primary"> </h2> <p class="text-xs text-text-muted">Agent workspace and routing.</p></div></div> <div class="flex items-center gap-2 text-xs text-text-muted"><span class="font-mono"> </span> <!></div></div> <div class="flex gap-0 px-4 md:px-6 overflow-x-auto"></div></div> <div class="flex-1 overflow-y-auto"><!></div>',1),cr=n(`<div class="h-full flex flex-col overflow-hidden"><div class="px-4 md:px-6 py-4 border-b border-border-default flex items-center justify-between flex-shrink-0"><div><h1 class="text-xl font-bold text-text-primary flex items-center gap-2"><span class="text-accent-cyan">ðŸ¤–</span> Agents</h1> <p class="text-sm text-text-muted">Manage agent workspaces, tools, and identities.</p></div> <button class="px-3 py-1.5 rounded-lg text-sm border border-border-default hover:border-accent-cyan
             text-text-secondary hover:text-accent-cyan transition-all disabled:opacity-50 flex items-center gap-1.5"><!> Refresh</button></div> <div class="flex-1 flex min-h-0 overflow-hidden"><div class="hidden md:flex w-48 border-r border-border-default bg-bg-secondary/30 flex-col flex-shrink-0"><div class="p-3 border-b border-border-default"><div class="text-xs font-medium text-text-muted uppercase tracking-wider">Agents</div> <div class="text-xs text-text-muted mt-0.5"> </div></div> <div class="flex-1 overflow-y-auto"></div></div> <div class="flex-1 flex flex-col min-w-0 overflow-hidden"><!> <!></div></div></div>`);function hr(je,Fe){ia(Fe,!0);const Le=ca(),ct=ba();let mt=S(Ut([])),St=S(""),F=S(null),Jt=S(!1),pt=S("overview"),At=S(null),zt=S(null),Me=S(null),Ht=S(Ut([])),ot=S(""),Wt=S(""),Ct=S(!1),jt=S(null),It=S(!1),nt=S(null),Ft=S(""),bt=S(""),Qt=S(!1),Rt=S(!1),$t=S(Ut([])),Tt=S(!1),Nt=S(null),Gt=S(!1),Xt=S(Ut([])),Ot=S(null),Dt=S(!1),$=lt(()=>t(mt).find(r=>r.id===t(F))??null),H=lt(()=>{if(!t($))return null;const r=ne(t($).id),i=t(jt)?.workspace||r?.workspace||t($).workspace||"/home/ihoner",u=We(r?.model??t($).model),M=t(At)?.name||t($).identity?.name||t($).name||t($).id,g=t(At)?.emoji||t($).identity?.emoji||"-",G=r?.skills??t($).skills,V=Array.isArray(G)?`${G.length} selected`:"all skills",Q=t($).id===t(St);return{workspace:i,model:u,identityName:M,identityEmoji:g,skillsLabel:V,isDefault:Q}}),Vt=lt(()=>t(bt)!==t(Ft)&&t(nt)!==null),oe=lt(()=>t(Xt).filter(r=>r.agentId===t(F)||!r.agentId&&t(F)===t(St)));function ne(r){return t(zt)?(t(zt).agents?.list??[]).find(g=>g?.id===r)??null:null}function We(r){if(!r)return"-";if(typeof r=="string")return r.trim()||"-";if(typeof r=="object"&&r){const i=r,u=typeof i.primary=="string"?i.primary.trim():"";if(u){const M=Array.isArray(i.fallbacks)?i.fallbacks.length:0;return M>0?`${u} (+${M} fallback)`:u}}return"-"}function ve(r){return(t(At)?.emoji||r.identity?.emoji||"").trim()||"ðŸ¤–"}function Ie(r){return r?r<1024?`${r} B`:r<1048576?`${(r/1024).toFixed(1)} KB`:`${(r/1048576).toFixed(1)} MB`:"-"}function Re(r){return r.endsWith(".md")?"ðŸ“„":r.endsWith(".json")?"ðŸ“‹":r.endsWith(".yml")||r.endsWith(".yaml")?"âš™ï¸":r.endsWith(".ts")||r.endsWith(".js")?"ðŸ“œ":"ðŸ“Ž"}const Te=[{key:"overview",label:"Overview",icon:"ðŸ“Š"},{key:"files",label:"Files",icon:"ðŸ“"},{key:"tools",label:"Tools",icon:"ðŸ”§"},{key:"skills",label:"Skills",icon:"âš¡"},{key:"channels",label:"Channels",icon:"ðŸ’¬"},{key:"cron",label:"Cron Jobs",icon:"â°"}],Ne=[{id:"fs",label:"Files",tools:["read","write","edit","apply_patch"]},{id:"runtime",label:"Runtime",tools:["exec","process"]},{id:"web",label:"Web",tools:["web_search","web_fetch"]},{id:"sessions",label:"Sessions",tools:["sessions_list","sessions_history","sessions_send","sessions_spawn","session_status"]},{id:"ui",label:"UI",tools:["browser","canvas"]},{id:"messaging",label:"Messaging",tools:["message"]},{id:"automation",label:"Automation",tools:["cron","gateway"]},{id:"nodes",label:"Nodes",tools:["nodes"]},{id:"agents",label:"Agents",tools:["agents_list"]},{id:"media",label:"Media",tools:["image","tts"]}];async function ce(){o(Jt,!0);try{const r=await st.call("agents.list",{});o(mt,r?.agents??[],!0),o(St,r?.defaultId??"",!0),!t(F)&&t(mt).length&&o(F,t(St)||t(mt)[0]?.id||null,!0),Zt(),t(F)&&(xe(t(F)),te(t(F)))}catch(r){ct.error("Failed to load agents",String(r))}finally{o(Jt,!1)}}async function xe(r){try{const i=await st.call("agent.identity.get",{agentId:r});o(At,i??null,!0)}catch{o(At,null)}}async function Zt(){try{const[r,i,u]=await Promise.all([st.call("config.get",{}),st.call("config.schema",{}),st.call("models.list",{})]);o(zt,r?.config??r,!0),o(Me,i,!0);const M=u?.models??[];if(o(Ht,Array.isArray(M)?M.map(g=>({value:typeof g=="string"?g:g.id||g.value||String(g),label:typeof g=="string"?g:g.label||g.alias||g.id||String(g)})):[],!0),t(F)){const G=ne(t(F))?.model??t(zt)?.agents?.defaults?.model;if(typeof G=="string")o(ot,G,!0),o(Wt,"");else if(G&&typeof G=="object"){const V=G;o(ot,typeof V.primary=="string"?V.primary:"",!0),o(Wt,Array.isArray(V.fallbacks)?V.fallbacks.join(", "):"",!0)}}}catch(r){console.error("Config load error:",r)}}async function te(r){o(It,!0),o(nt,null),o(Ft,""),o(bt,"");try{const i=await st.call("agents.files.list",{agentId:r});o(jt,i??null,!0)}catch(i){ct.error("Failed to load files",String(i))}finally{o(It,!1)}}async function Oe(r){if(t(F)){o(nt,r,!0),o(Qt,!0);try{const i=await st.call("agents.files.get",{agentId:t(F),name:r});o(Ft,i?.file?.content??"",!0),o(bt,t(Ft),!0)}catch(i){ct.error("Failed to load file",String(i))}finally{o(Qt,!1)}}}async function De(){if(!(!t(F)||!t(nt)||t(Rt))){o(Rt,!0);try{await st.call("agents.files.set",{agentId:t(F),name:t(nt),content:t(bt)}),o(Ft,t(bt),!0),ct.success("Saved",`${t(nt)} saved successfully`)}catch(r){ct.error("Save failed",String(r))}finally{o(Rt,!1)}}}async function ue(){o(Tt,!0);try{const r=await st.call("skills.status",{});o($t,r?.skills??[],!0)}catch(r){ct.error("Failed to load skills",String(r))}finally{o(Tt,!1)}}async function pe(){o(Gt,!0);try{const r=await st.call("channels.status",{});o(Nt,r,!0)}catch(r){ct.error("Failed to load channels",String(r))}finally{o(Gt,!1)}}async function fe(){o(Dt,!0);try{const[r,i]=await Promise.all([st.call("cron.status",{}),st.call("cron.list",{})]);o(Ot,r,!0),o(Xt,i?.jobs??[],!0)}catch(r){ct.error("Failed to load cron",String(r))}finally{o(Dt,!1)}}async function Pe(){if(!(t(Ct)||!t(F))){o(Ct,!0);try{const r=t(Wt).split(",").map(u=>u.trim()).filter(Boolean),i=r.length>0?{primary:t(ot),fallbacks:r}:t(ot)||void 0;await st.call("config.set",{path:["agents","list"],match:{id:t(F)},patch:{model:i}}),ct.success("Saved","Agent config updated"),await Zt()}catch(r){ct.error("Save failed",String(r))}finally{o(Ct,!1)}}}function me(r){o(F,r,!0),o(pt,"overview"),o(nt,null),o(At,null),xe(r),te(r)}function Be(r){o(pt,r,!0),r==="skills"&&t($t).length===0&&Yt(()=>ue()),r==="channels"&&!t(Nt)&&Yt(()=>pe()),r==="cron"&&t(Xt).length===0&&Yt(()=>fe())}function Ee(r){const i=t($);if(!i?.tools)return"default";const u=i.tools.deny??[],M=i.tools.allow??[],g=i.tools.alsoAllow??[];return u.includes(r)||u.includes("*")?"denied":M.includes(r)||M.includes("*")||g.includes(r)?"allowed":"default"}function Je(r){const i=r.schedule;return i?i.kind==="cron"&&i.expr?`cron: ${i.expr}`:i.kind==="every"&&i.everyMs?`every ${Math.round(i.everyMs/6e4)}m`:i.kind==="at"&&i.at?`at: ${new Date(i.at).toLocaleString()}`:JSON.stringify(i):"-"}da(()=>{Le.state.status==="connected"&&Yt(()=>ce())});var ee=cr();ua("h3sa6j",r=>{oa(()=>{na.title="Agents â€” Cortex"})});var ae=a(ee),Kt=s(a(ae),2),ze=a(Kt);{var $e=r=>{var i=_a();l(r,i)};L(ze,r=>{t(Jt)&&r($e)})}Et(),e(Kt),e(ae);var be=s(ae,2),re=a(be),se=a(re),_e=s(a(se),2),Ge=a(_e);e(_e),e(se);var ge=s(se,2);ut(ge,21,()=>t(mt),r=>r.id,(r,i)=>{var u=ya(),M=a(u),g=a(M),G=a(g,!0);e(g);var V=s(g,2),Q=a(V),xt=a(Q,!0);e(Q);var Lt=s(Q,2),yt=a(Lt,!0);e(Lt),e(V),e(M);var Pt=s(M,2);{var ie=ht=>{var de=ga();l(ht,de)};L(Pt,ht=>{t(i).id===t(St)&&ht(ie)})}e(u),_(ht=>{gt(u,1,`w-full text-left px-3 py-3 transition-all border-l-2 group
                   ${t(F)===t(i).id?"border-accent-cyan bg-accent-cyan/5":"border-transparent hover:bg-bg-hover"}`),d(G,ht),gt(Q,1,`text-sm font-medium truncate ${t(F)===t(i).id?"text-accent-cyan":"text-text-primary group-hover:text-text-primary"}`),d(xt,t(i).identity?.name||t(i).name||t(i).id),d(yt,t(i).id)},[()=>ve(t(i))]),rt("click",u,()=>me(t(i).id)),l(r,u)}),e(ge),e(re);var ye=s(re,2),he=a(ye);{var Ve=r=>{var i=ka(),u=a(i),M=a(u);M.value=M.__value="";var g=s(M);ut(g,17,()=>t(mt),V=>V.id,(V,Q)=>{var xt=ha(),Lt=a(xt);e(xt);var yt={};_(()=>{d(Lt,`${t(Q).identity?.name??t(Q).name??t(Q).id??""}
                ${t(Q).id===t(St)?" (default)":""}`),yt!==(yt=t(Q).id)&&(xt.value=(xt.__value=t(Q).id)??"")}),l(V,xt)}),e(u);var G;pa(u),e(i),_(()=>{G!==(G=t(F)??"")&&(u.value=(u.__value=t(F)??"")??"",fa(u,t(F)??""))}),rt("change",u,V=>me(V.currentTarget.value)),l(r,i)};L(he,r=>{t(mt).length>0&&r(Ve)})}var Ke=s(he,2);{var Ue=r=>{var i=wa();l(r,i)},Ye=r=>{var i=vr(),u=qt(i),M=a(u),g=a(M),G=a(g),V=a(G,!0);e(G);var Q=s(G,2),xt=a(Q),Lt=a(xt,!0);e(xt),Et(2),e(Q),e(g);var yt=s(g,2),Pt=a(yt),ie=a(Pt,!0);e(Pt);var ht=s(Pt,2);{var de=y=>{var f=Sa();l(y,f)};L(ht,y=>{t(H)?.isDefault&&y(de)})}e(yt),e(M);var ke=s(M,2);ut(ke,21,()=>Te,wt,(y,f)=>{var h=Aa(),R=a(h,!0);e(h),_(()=>{gt(h,1,`px-4 py-2 text-sm font-medium transition-all border-b-2 whitespace-nowrap
                       ${t(pt)===t(f).key?"border-accent-cyan text-accent-cyan bg-accent-cyan/5":"border-transparent text-text-muted hover:text-text-secondary hover:border-border-default"}`),d(R,t(f).label)}),rt("click",h,()=>Be(t(f).key)),l(y,h)}),e(ke),e(u);var we=s(u,2),qe=a(we);{var He=y=>{var f=Fa(),h=a(f),R=s(a(h),4),B=a(R),tt=s(a(B),2),K=a(tt,!0);e(tt),e(B);var W=s(B,2),U=s(a(W),2),X=a(U,!0);e(U),e(W);var A=s(W,2),E=s(a(A),2),T=a(E,!0);e(E),e(A);var k=s(A,2),O=s(a(k),2),D=a(O,!0);e(O),e(k);var N=s(k,2),v=s(a(N),2),c=a(v,!0);e(v),e(N);var w=s(N,2),C=s(a(w),2),p=a(C,!0);e(C),e(w),e(R),e(h);var j=s(h,2),I=s(a(j),4),x=a(I),m=s(a(x),2),P=a(m);P.value=P.__value="";var b=s(P);ut(b,17,()=>t(Ht),wt,(at,vt)=>{var ft=Ca(),Mt=a(ft,!0);e(ft);var dt={};_(()=>{d(Mt,t(vt).label),dt!==(dt=t(vt).value)&&(ft.value=(ft.__value=t(vt).value)??"")}),l(at,ft)});var Y=s(b);{var q=at=>{var vt=ja(),ft=a(vt);e(vt);var Mt={};_(()=>{d(ft,`${t(ot)??""} (current)`),Mt!==(Mt=t(ot))&&(vt.value=(vt.__value=t(ot))??"")}),l(at,vt)},z=lt(()=>t(ot)&&!t(Ht).some(at=>at.value===t(ot)));L(Y,at=>{t(z)&&at(q)})}e(m),e(x);var et=s(x,2),it=s(a(et),2);xa(it),e(et),e(I);var _t=s(I,2),J=a(_t),Z=s(J,2),Bt=a(Z,!0);e(Z),e(_t),e(j),e(f),_(()=>{d(K,t(H)?.workspace),d(X,t(H)?.model),d(T,t(H)?.identityName),d(D,t(H)?.isDefault?"yes":"no"),d(c,t(H)?.identityEmoji),d(p,t(H)?.skillsLabel),J.disabled=t(Ct),Z.disabled=t(Ct),d(Bt,t(Ct)?"Savingâ€¦":"Save")}),ma(m,()=>t(ot),at=>o(ot,at)),Ae(it,()=>t(Wt),at=>o(Wt,at)),rt("click",J,()=>Zt()),rt("click",Z,Pe),l(y,f)},Qe=y=>{var f=Pa(),h=a(f),R=a(h),B=s(a(R),2),tt=a(B,!0);e(B),e(R);var K=s(R,2);{var W=v=>{var c=La(),w=a(c,!0);e(c),_(()=>d(w,t(jt).workspace)),l(v,c)};L(K,v=>{t(jt)?.workspace&&v(W)})}var U=s(K,2);{var X=v=>{var c=Ma();l(v,c)},A=v=>{var c=Wa();l(v,c)},E=v=>{var c=Se(),w=qt(c);ut(w,17,()=>t(jt).files,C=>C.name,(C,p)=>{var j=Ra(),I=a(j),x=a(I,!0);e(I);var m=s(I,2),P=a(m),b=a(P,!0);e(P);var Y=s(P,2),q=a(Y),z=s(q);{var et=J=>{var Z=sa();_(Bt=>d(Z,`Â· ${Bt??""}`),[()=>Ce(t(p).updatedAtMs)]),l(J,Z)};L(z,J=>{t(p).updatedAtMs&&!t(p).missing&&J(et)})}e(Y),e(m);var it=s(m,2);{var _t=J=>{var Z=Ia();l(J,Z)};L(it,J=>{t(p).missing&&J(_t)})}e(j),_((J,Z)=>{gt(j,1,`w-full text-left px-3 py-2 text-sm transition-all flex items-center gap-2
                             ${t(nt)===t(p).name?"bg-accent-cyan/10 text-accent-cyan":"hover:bg-bg-hover text-text-secondary"}`),d(x,J),d(b,t(p).name),d(q,`${Z??""} `)},[()=>Re(t(p).name),()=>t(p).missing?"missing":Ie(t(p).size)]),rt("click",j,()=>Oe(t(p).name)),l(C,j)}),l(v,c)};L(U,v=>{t(It)?v(X):t(jt)?.files?.length?v(E,!1):v(A,1)})}e(h);var T=s(h,2),k=a(T);{var O=v=>{var c=Ta();l(v,c)},D=v=>{var c=Na(),w=a(c);e(c),_(()=>d(w,`Loading ${t(nt)??""}â€¦`)),l(v,c)},N=v=>{var c=Da(),w=qt(c),C=a(w),p=a(C),j=a(p,!0);e(p);var I=s(p,2);{var x=z=>{var et=Oa();l(z,et)};L(I,z=>{t(Vt)&&z(x)})}e(C);var m=s(C,2),P=a(m),b=s(P,2),Y=a(b,!0);e(b),e(m),e(w);var q=s(w,2);va(q),_(()=>{d(j,t(nt)),P.disabled=!t(Vt),b.disabled=!t(Vt)||t(Rt),gt(b,1,`px-3 py-1 rounded text-xs transition-all
                               ${t(Vt)?"bg-accent-cyan/20 text-accent-cyan border border-accent-cyan/30 hover:bg-accent-cyan/30":"bg-bg-tertiary text-text-muted cursor-not-allowed"}`),d(Y,t(Rt)?"Savingâ€¦":"Save")}),rt("click",P,()=>{o(bt,t(Ft),!0)}),rt("click",b,De),Ae(q,()=>t(bt),z=>o(bt,z)),l(v,c)};L(k,v=>{t(nt)?t(Qt)?v(D,1):v(N,!1):v(O)})}e(T),e(f),_(()=>{B.disabled=t(It),d(tt,t(It)?"...":"â†»")}),rt("click",B,()=>t(F)&&te(t(F))),l(y,f)},Xe=y=>{var f=za(),h=a(f),R=s(a(h),2),B=s(a(R));{var tt=W=>{var U=Ba(),X=a(U);e(U),_(()=>d(X,`profile: ${t($).tools.profile??""}`)),l(W,U)};L(B,W=>{t($)?.tools?.profile&&W(tt)})}e(R);var K=s(R,2);ut(K,21,()=>Ne,wt,(W,U)=>{var X=Ja(),A=a(X),E=a(A,!0);e(A);var T=s(A,2);ut(T,21,()=>t(U).tools,wt,(k,O)=>{const D=lt(()=>Ee(t(O)));var N=Ea(),v=a(N),c=a(v,!0);e(v);var w=s(v,2),C=a(w,!0);e(w),e(N),_(()=>{d(c,t(O)),gt(w,1,`text-[10px] px-1.5 py-0.5 rounded font-medium
                                         ${t(D)==="allowed"?"bg-accent-green/15 text-accent-green":t(D)==="denied"?"bg-red-500/15 text-red-400":"bg-bg-tertiary text-text-muted"}`),d(C,t(D))}),l(k,N)}),e(T),e(X),_(()=>d(E,t(U).label)),l(W,X)}),e(K),e(h),e(f),l(y,f)},Ze=y=>{var f=qa(),h=a(f),R=a(h),B=s(a(R),2),tt=a(B,!0);e(B),e(R);var K=s(R,2);{var W=A=>{var E=$a();l(A,E)},U=A=>{var E=Ga();l(A,E)},X=A=>{var E=Ya();ut(E,21,()=>t($t),wt,(T,k)=>{var O=Ua(),D=a(O),N=s(a(D),2),v=a(N,!0);e(N);var c=s(N,2);{var w=j=>{var I=Va();l(j,I)};L(c,j=>{t(k).bundled&&j(w)})}e(D);var C=s(D,2);{var p=j=>{var I=Ka(),x=a(I,!0);e(I),_(()=>d(x,t(k).source)),l(j,I)};L(C,j=>{t(k).source&&j(p)})}e(O),_(()=>d(v,t(k).name)),l(T,O)}),e(E),l(A,E)};L(K,A=>{t(Tt)?A(W):t($t).length===0?A(U,1):A(X,!1)})}e(h),e(f),_(()=>{B.disabled=t(Tt),d(tt,t(Tt)?"Loadingâ€¦":"Refresh")}),rt("click",B,ue),l(y,f)},ta=y=>{var f=er(),h=a(f),R=a(h);{var B=T=>{var k=Ha(),O=s(a(k),4),D=a(O),N=s(a(D),2),v=a(N,!0);e(N),e(D);var c=s(D,2),w=s(a(c),2),C=a(w,!0);e(w),e(c);var p=s(c,2),j=s(a(p),2),I=a(j,!0);e(j),e(p);var x=s(p,2),m=s(a(x),2),P=a(m,!0);e(m),e(x),e(O),e(k),_(()=>{d(v,t(H).workspace),d(C,t(H).model),d(I,t(H).identityName),d(P,t(H).isDefault?"yes":"no")}),l(T,k)};L(R,T=>{t(H)&&T(B)})}var tt=s(R,2),K=a(tt),W=s(a(K),2),U=a(W,!0);e(W),e(K);var X=s(K,2);{var A=T=>{var k=Qa();l(T,k)},E=T=>{const k=lt(()=>t(Nt).channels??{}),O=lt(()=>t(Nt).channelAccounts??{}),D=lt(()=>Object.keys(t(k)).length?Object.keys(t(k)):Object.keys(t(O)));var N=Se(),v=qt(N);{var c=C=>{var p=Xa();l(C,p)},w=C=>{var p=tr();ut(p,21,()=>t(D),wt,(j,I)=>{const x=lt(()=>t(k)[t(I)]),m=lt(()=>t(O)[t(I)]??[]),P=lt(()=>t(m).filter(J=>J.connected||J.running).length);var b=Za(),Y=a(b),q=a(Y),z=a(q,!0);e(q);var et=s(q,2),it=a(et);e(et),e(Y);var _t=s(Y,2);e(b),_(()=>{d(z,t(I)),d(it,`${t(m).length?`${t(P)}/${t(m).length} connected`:"no accounts"}
                                Â· ${t(x)?.configured?"configured":"not configured"}`),gt(_t,1,`w-2 h-2 rounded-full ${t(x)?.configured||t(x)?.running?"bg-accent-green":"bg-text-muted/30"}`)}),l(j,b)}),e(p),l(C,p)};L(v,C=>{t(D).length===0?C(c):C(w,!1)})}l(T,N)};L(X,T=>{t(Nt)?T(E,!1):T(A)})}e(tt),e(h),e(f),_(()=>{W.disabled=t(Gt),d(U,t(Gt)?"Loadingâ€¦":"Refresh")}),rt("click",W,pe),l(y,f)},ea=y=>{var f=nr(),h=a(f),R=a(h);{var B=x=>{var m=ar(),P=s(a(m),4),b=a(P),Y=s(a(b),2),q=a(Y,!0);e(Y),e(b);var z=s(b,2),et=s(a(z),2),it=a(et,!0);e(et),e(z),e(P),e(m),_(()=>{d(q,t(H).workspace),d(it,t(H).model)}),l(x,m)};L(R,x=>{t(H)&&x(B)})}var tt=s(R,2),K=a(tt),W=s(a(K),2),U=a(W,!0);e(W),e(K);var X=s(K,2),A=a(X),E=a(A),T=a(E,!0);e(E),Et(2),e(A);var k=s(A,2),O=a(k),D=a(O,!0);e(O),Et(2),e(k);var N=s(k,2),v=a(N),c=a(v,!0);e(v),Et(2),e(N),e(X),e(tt),e(h);var w=s(h,2),C=s(a(w),4);{var p=x=>{var m=rr();l(x,m)},j=x=>{var m=sr();l(x,m)},I=x=>{var m=or();ut(m,21,()=>t(oe),wt,(P,b)=>{var Y=lr(),q=a(Y),z=a(q),et=a(z,!0);e(z);var it=s(z,2),_t=a(it,!0);e(it),e(q);var J=s(q,2),Z=a(J),Bt=a(Z,!0);e(Z);var at=s(Z,2);{var vt=dt=>{var kt=ir(),le=a(kt,!0);e(kt),_(()=>d(le,t(b).sessionTarget)),l(dt,kt)};L(at,dt=>{t(b).sessionTarget&&dt(vt)})}var ft=s(at,2);{var Mt=dt=>{var kt=dr(),le=a(kt,!0);e(kt),_(()=>d(le,t(b).payload.kind)),l(dt,kt)};L(ft,dt=>{t(b).payload?.kind&&dt(Mt)})}e(J),e(Y),_(dt=>{d(et,t(b).name||t(b).jobId||t(b).id),gt(it,1,`px-1.5 py-0.5 rounded text-[10px] font-medium
                                       ${t(b).enabled!==!1?"bg-accent-green/15 text-accent-green":"bg-amber-500/15 text-amber-400"}`),d(_t,t(b).enabled!==!1?"enabled":"disabled"),d(Bt,dt)},[()=>Je(t(b))]),l(P,Y)}),e(m),l(x,m)};L(C,x=>{t(Dt)?x(p):t(oe).length===0?x(j,1):x(I,!1)})}e(w),e(f),_(x=>{W.disabled=t(Dt),d(U,t(Dt)?"Loadingâ€¦":"Refresh"),d(T,t(Ot)?.enabled?"Yes":"No"),d(D,t(Ot)?.jobs??"-"),d(c,x)},[()=>t(Ot)?.nextWakeAtMs?Ce(t(Ot).nextWakeAtMs):"-"]),rt("click",W,fe),l(y,f)};L(qe,y=>{t(pt)==="overview"?y(He):t(pt)==="files"?y(Qe,1):t(pt)==="tools"?y(Xe,2):t(pt)==="skills"?y(Ze,3):t(pt)==="channels"?y(ta,4):t(pt)==="cron"&&y(ea,5)})}e(we),_(y=>{d(V,y),d(Lt,t(H)?.identityName??t($).id),d(ie,t($).id)},[()=>ve(t($))]),l(r,i)};L(Ke,r=>{t($)?r(Ye,!1):r(Ue)})}e(ye),e(be),e(ee),_(()=>{Kt.disabled=t(Jt),d(Ge,`${t(mt).length??""} configured`)}),rt("click",Kt,()=>ce()),l(je,ee),la()}aa(["click","change"]);export{hr as component};
