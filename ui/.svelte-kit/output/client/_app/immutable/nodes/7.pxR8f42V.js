import{d as nr,a as D,b as c,s as v,f as x,t as ct}from"../chunks/B2A7gHtL.js";import{p as or,s as m,a as $t,u as sr,b as lr,t as h,c as dr,d as o,e as ir,g as e,f as n,h as a,$ as cr,r,n as St,i as ye,l as ut,k as Mt}from"../chunks/qR_TM3YX.js";import{i as M}from"../chunks/DpBBTLWw.js";import{g as ur,a as ce,s as H,r as Z,e as ne,i as ge,b as vt}from"../chunks/BhtVncI_.js";import{h as vr}from"../chunks/CXQ1lKJR.js";import{b as j,a as Tt}from"../chunks/nnazh41B.js";import{b as Et}from"../chunks/DVP7Iy08.js";import{g as xr}from"../chunks/Be_uRYmX.js";var pr=x("<span> </span>"),br=x('<div class="p-3 rounded-lg bg-red-500/10 border border-red-500/30 text-red-400 text-sm"> </div>'),mr=x("<button> </button>"),fr=x(`<div><label class="block text-xs text-text-muted mb-1">Date & Time</label> <input type="datetime-local" class="px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                         text-text-primary text-sm focus:outline-none focus:border-accent-purple/60 transition-all"/></div>`),yr=x("<button> </button>"),gr=x(`<div><label class="block text-xs text-text-muted mb-1.5">Interval</label> <div class="flex flex-wrap gap-1.5 mb-2"></div> <div class="flex items-center gap-2"><input type="number" min="1000" step="1000" class="w-40 px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                           text-text-primary text-sm focus:outline-none focus:border-accent-purple/60 transition-all"/> <span class="text-xs text-text-muted"> </span></div></div>`),_r=x('<p class="mt-1 text-xs text-accent-cyan"> </p>'),hr=x("<button> </button>"),kr=x("<option> </option>"),wr=x(`<div class="space-y-3"><div><label class="block text-xs text-text-muted mb-1.5">Cron Expression</label> <input type="text" placeholder="*/5 * * * *" class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                           text-text-primary font-mono text-sm placeholder:text-text-muted/50
                           focus:outline-none focus:border-accent-purple/60 transition-all"/> <!></div> <div><label class="block text-xs text-text-muted mb-1.5">Presets</label> <div class="flex flex-wrap gap-1.5"></div></div> <div><label class="block text-xs text-text-muted mb-1">Timezone</label> <select class="px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                           text-text-primary text-sm focus:outline-none focus:border-accent-purple/60 transition-all"></select></div></div>`),$r=x('<button><div> </div> <div class="text-xs text-text-muted mt-0.5"> </div></button>'),Sr=x(`<textarea placeholder="System event text to send to main session..." class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                       text-text-primary text-sm placeholder:text-text-muted/50
                       focus:outline-none focus:border-accent-purple/60 transition-all resize-y"></textarea>`),Mr=x(`<div class="space-y-3"><textarea placeholder="Message for the agent turn..." class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                         text-text-primary text-sm placeholder:text-text-muted/50
                         focus:outline-none focus:border-accent-purple/60 transition-all resize-y"></textarea> <div class="grid grid-cols-1 md:grid-cols-3 gap-3"><div><label class="block text-xs text-text-muted mb-1">Model <span class="text-text-muted/60">(optional)</span></label> <input type="text" placeholder="e.g. claude-sonnet-4-20250514" class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                             text-text-primary text-sm placeholder:text-text-muted/50
                             focus:outline-none focus:border-accent-purple/60 transition-all"/></div> <div><label class="block text-xs text-text-muted mb-1">Thinking</label> <select class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                             text-text-primary text-sm focus:outline-none focus:border-accent-purple/60 transition-all"><option>Off</option><option>On</option><option>Stream</option></select></div> <div><label class="block text-xs text-text-muted mb-1">Timeout <span class="text-text-muted/60">(seconds)</span></label> <input type="number" min="0" placeholder="300" class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                             text-text-primary text-sm placeholder:text-text-muted/50
                             focus:outline-none focus:border-accent-purple/60 transition-all"/></div></div></div>`),Tr=x("<button> </button>"),Er=x(`<div class="grid grid-cols-1 md:grid-cols-2 gap-3"><div><label class="block text-xs text-text-muted mb-1">Channel <span class="text-text-muted/60">(optional)</span></label> <input type="text" placeholder="e.g. discord, telegram" class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                             text-text-primary text-sm placeholder:text-text-muted/50
                             focus:outline-none focus:border-accent-purple/60 transition-all"/></div> <div><label class="block text-xs text-text-muted mb-1">To <span class="text-text-muted/60">(optional)</span></label> <input type="text" placeholder="Channel ID or user" class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                             text-text-primary text-sm placeholder:text-text-muted/50
                             focus:outline-none focus:border-accent-purple/60 transition-all"/></div></div>`),Cr=x('<div><label class="block text-xs font-medium text-text-muted mb-2">Delivery</label> <div class="flex gap-3 mb-3"></div> <!></div>'),Dr=x(`<div class="rounded-xl border border-accent-purple/40 bg-bg-secondary/80 backdrop-blur-sm
                  shadow-[0_0_20px_rgba(124,77,255,0.15)]"><div class="flex items-center justify-between px-5 py-3 border-b border-border-default"><h2 class="text-lg font-semibold text-accent-purple"> </h2> <button class="text-text-muted hover:text-text-primary text-lg transition-colors">‚úï</button></div> <div class="p-5 space-y-5"><div><label class="block text-xs font-medium text-text-muted mb-1.5">Job Name</label> <input type="text" placeholder="e.g. daily-digest, heartbeat-check" class="w-full px-3 py-2 rounded-lg bg-bg-tertiary border border-border-default
                     text-text-primary placeholder:text-text-muted/50 text-sm
                     focus:outline-none focus:border-accent-purple/60 focus:shadow-[0_0_8px_rgba(124,77,255,0.2)]
                     transition-all"/></div> <div><label class="block text-xs font-medium text-text-muted mb-2">Schedule Type</label> <div class="flex gap-1 p-1 bg-bg-tertiary rounded-lg w-fit mb-3"></div> <!> <!> <!></div> <div><label class="block text-xs font-medium text-text-muted mb-2">Session Target</label> <div class="flex gap-3"></div></div> <div><label class="block text-xs font-medium text-text-muted mb-2">Payload ‚Äî <span class="text-accent-cyan"> </span></label> <!></div> <!> <div class="flex items-center gap-6"><label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 rounded border-border-default bg-bg-tertiary text-accent-cyan
                       focus:ring-accent-purple/50 focus:ring-offset-0"/> <span class="text-sm text-text-secondary">Enabled</span></label> <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="w-4 h-4 rounded border-border-default bg-bg-tertiary text-accent-cyan
                       focus:ring-accent-purple/50 focus:ring-offset-0"/> <span class="text-sm text-text-secondary">Notify on run</span></label></div> <div class="flex items-center justify-between pt-2 border-t border-border-default/50"><button class="px-4 py-2 rounded-lg text-sm text-text-muted hover:text-text-secondary transition-colors">Cancel</button> <button><!></button></div></div></div>`),Ar=x('<div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4 animate-pulse"><div class="h-5 w-48 bg-bg-tertiary rounded mb-2"></div> <div class="h-4 w-32 bg-bg-tertiary rounded"></div></div>'),Jr=x('<div class="space-y-3"></div>'),Nr=x(`<div class="text-center py-16 text-text-muted"><div class="text-4xl mb-3">‚è∞</div> <p class="text-lg mb-1">No cron jobs configured</p> <p class="text-sm mb-4">Create your first scheduled job to get started.</p> <button class="px-4 py-2 rounded-lg text-sm font-medium bg-accent-purple/20 text-accent-purple
                 border border-accent-purple/40 hover:bg-accent-purple/30 transition-all">+ Create Job</button></div>`),Rr=x('<span class="text-accent-cyan/70"> </span>'),Lr=x("<span> </span>"),zr=x("<span> </span>"),Fr=x('<div><span class="text-text-muted text-xs">Description</span> <p class="text-text-secondary"> </p></div>'),Pr=x('<div><span class="text-text-muted text-xs block mb-1">Delivery</span> <pre class="p-2 rounded bg-bg-tertiary text-text-secondary font-mono text-xs"> </pre></div>'),Ir=x('<div class="p-2 rounded bg-red-500/10 border border-red-500/30 text-red-400 text-xs"> </div>'),Or=x('<div class="border-t border-border-default p-4 space-y-3 text-sm"><!> <div class="grid grid-cols-2 md:grid-cols-4 gap-3"><div><span class="text-text-muted text-xs block">Schedule</span> <span class="text-text-secondary font-mono text-xs"> </span></div> <div><span class="text-text-muted text-xs block">Target</span> <span class="text-text-secondary"> </span></div> <div><span class="text-text-muted text-xs block">Notify</span> <span class="text-text-secondary"> </span></div> <div><span class="text-text-muted text-xs block">ID</span> <span class="text-text-secondary font-mono text-xs break-all"> </span></div></div> <div><span class="text-text-muted text-xs block mb-1">Payload</span> <pre class="p-2 rounded bg-bg-tertiary text-text-secondary font-mono text-xs overflow-x-auto"> </pre></div> <!> <!></div>'),Hr=x(`<div><div class="flex items-center gap-3 p-4"><button><div></div></button> <button class="flex-1 text-left min-w-0"><div class="flex items-center gap-2 flex-wrap"><span class="font-medium text-text-primary truncate"> </span> <span> </span> <span class="px-2 py-0.5 rounded text-xs bg-bg-tertiary text-text-muted"> </span></div> <div class="text-xs text-text-muted mt-1 flex items-center gap-3 flex-wrap"><span> </span> <!> <!> <!></div></button> <div class="flex items-center gap-1 flex-shrink-0"><button class="p-2 rounded-lg hover:bg-bg-hover text-text-muted hover:text-accent-purple transition-colors
                         disabled:opacity-50" title="Edit job"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg></button> <button class="p-2 rounded-lg hover:bg-bg-hover text-text-muted hover:text-accent-green transition-colors
                         disabled:opacity-50" title="Run now"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg></button> <button class="p-2 rounded-lg hover:bg-bg-hover text-text-muted hover:text-accent-cyan transition-colors
                         disabled:opacity-50" title="View run history"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></button> <button class="p-2 rounded-lg hover:bg-bg-hover text-text-muted hover:text-red-400 transition-colors
                         disabled:opacity-50" title="Delete job"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg></button></div></div> <!></div>`),Ur=x('<div class="space-y-3"></div>'),Br=x('<div class="text-text-muted text-sm py-4 text-center">Loading runs...</div>'),Wr=x('<div class="text-text-muted text-sm py-4 text-center">No run history available.</div>'),Vr=x('<div class="flex items-center gap-3 px-3 py-2 rounded-lg bg-bg-tertiary/50 text-xs"><span></span> <span class="text-text-muted w-28 flex-shrink-0"> </span> <span class="text-text-secondary flex-shrink-0 w-16"> </span> <span class="text-text-secondary flex-1 truncate font-mono"> </span></div>'),Yr=x('<div class="space-y-2 max-h-80 overflow-y-auto"></div>'),Kr=x(`<div class="rounded-xl border border-accent-cyan/30 bg-bg-secondary/50 p-4
                  shadow-[0_0_12px_rgba(0,229,255,0.08)]"><div class="flex items-center justify-between mb-3"><h2 class="text-sm font-semibold text-accent-cyan"> </h2> <div class="flex items-center gap-2"><button class="text-text-muted hover:text-accent-cyan text-xs transition-colors disabled:opacity-50">‚Üª Refresh</button> <button class="text-text-muted hover:text-text-primary text-xs transition-colors">‚úï Close</button></div></div> <!></div>`),qr=x(`<div class="h-full overflow-y-auto"><div class="max-w-6xl mx-auto p-4 md:p-6 space-y-6"><div class="flex items-center justify-between flex-wrap gap-3"><div><h1 class="text-2xl font-bold text-text-primary">Cron Jobs</h1> <p class="text-sm text-text-muted mt-1">Schedule wakeups and recurring agent runs.</p></div> <div class="flex items-center gap-3"><!> <button class="px-4 py-2 rounded-lg text-sm font-medium bg-accent-cyan/20 text-accent-cyan
                 border border-accent-cyan/40 hover:bg-accent-cyan/30 hover:shadow-[0_0_12px_rgba(0,229,255,0.25)]
                 transition-all disabled:opacity-50 disabled:cursor-not-allowed">+ Create Job</button> <button class="px-3 py-2 rounded-lg text-sm border border-border-default hover:border-accent-cyan
                 text-text-secondary hover:text-accent-cyan transition-all
                 disabled:opacity-50 disabled:cursor-not-allowed">‚Üª Refresh</button></div></div> <!> <div class="text-xs text-text-muted"> <!></div> <!> <!> <!></div></div>`);function aa(Ct,Dt){or(Dt,!0);const tt=ur(),K=xr();let ue=m($t([])),Ve=m(!1),z=m(!1),Ye=m(null),_e=m(null),oe=m(null),Re=m($t([])),Ke=m(!1),qe=m(null),Ge=m(!1),se=m(null),Le=m(!1),le=m(""),F=m("every"),he=m(""),q=m(3e5),G=m(""),ke=m(""),ee=m("main"),we=m(""),$e=m(""),Se=m(""),Me=m(""),ve=m(void 0),Te=m("none"),Ee=m(""),Ce=m(""),ze=m(!0),Fe=m(!1),Pe=ye(()=>e(ee)==="main"?"systemEvent":"agentTurn"),xt=ye(()=>e(G).trim()?Wt(e(G).trim()):""),rt=ye(()=>!(e(F)==="at"&&!e(he)||e(F)==="every"&&(!e(q)||e(q)<1e3)||e(F)==="cron"&&!e(G).trim()||e(Pe)==="systemEvent"&&!e(we).trim()||e(Pe)==="agentTurn"&&!e($e).trim()));const At=[{label:"Every minute",expr:"* * * * *"},{label:"Every 5 minutes",expr:"*/5 * * * *"},{label:"Every 15 minutes",expr:"*/15 * * * *"},{label:"Every hour",expr:"0 * * * *"},{label:"Daily at midnight",expr:"0 0 * * *"},{label:"Daily at 9am",expr:"0 9 * * *"},{label:"Weekly Mon 9am",expr:"0 9 * * 1"},{label:"Monthly 1st midnight",expr:"0 0 1 * *"}],Jt=[{label:"1m",ms:6e4},{label:"5m",ms:3e5},{label:"15m",ms:9e5},{label:"30m",ms:18e5},{label:"1h",ms:36e5},{label:"6h",ms:216e5},{label:"12h",ms:432e5},{label:"24h",ms:864e5}],Nt=["","UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Australia/Sydney","Pacific/Auckland"];sr(()=>{tt.state.status==="connected"&&lr(()=>Ie())});async function Ie(){o(Ve,!0),o(Ye,null);try{const[t,l]=await Promise.all([ce.call("cron.status",{}).catch(()=>null),ce.call("cron.list",{includeDisabled:!0}).catch(()=>({jobs:[]}))]);o(_e,t,!0),o(ue,Array.isArray(l?.jobs)?l.jobs:[],!0)}catch(t){o(Ye,String(t),!0)}finally{o(Ve,!1)}}async function Rt(t){if(!e(z)){o(z,!0);try{await ce.call("cron.update",{id:t.id,patch:{enabled:!t.enabled}}),K.success("Updated",`${t.name||t.id} ${t.enabled?"disabled":"enabled"}`),await Ie()}catch(l){K.error("Failed",String(l))}finally{o(z,!1)}}}async function Lt(t){if(!e(z)){o(z,!0);try{await ce.call("cron.run",{id:t.id,mode:"force"}),K.success("Triggered",`${t.name||t.id} running now`),await at(t.id)}catch(l){K.error("Failed",String(l))}finally{o(z,!1)}}}async function zt(t){if(!e(z)&&confirm(`Delete "${t.name||t.id}"? This cannot be undone.`)){o(z,!0);try{await ce.call("cron.remove",{id:t.id}),K.success("Deleted",`${t.name||t.id} removed`),e(oe)===t.id&&(o(oe,null),o(Re,[],!0)),await Ie()}catch(l){K.error("Failed",String(l))}finally{o(z,!1)}}}async function at(t){o(Ke,!0),o(oe,t,!0);try{const l=await ce.call("cron.runs",{id:t,limit:20});o(Re,Array.isArray(l?.entries)?l.entries:[],!0)}catch(l){K.error("Failed",String(l))}finally{o(Ke,!1)}}function pt(){o(se,null),Pt(),o(Ge,!0)}function Ft(t){o(se,t.id,!0),o(le,t.name||"",!0),o(F,t.schedule.kind,!0),o(he,t.schedule.at?Bt(t.schedule.at):"",!0),o(q,t.schedule.everyMs??3e5,!0),o(G,t.schedule.expr??"",!0),o(ke,t.schedule.tz??"",!0),o(ee,t.sessionTarget||"main",!0),o(we,t.payload.text??"",!0),o($e,t.payload.message??"",!0),o(Se,t.payload.model??"",!0),o(Me,t.payload.thinking||"",!0),o(ve,t.payload.timeoutSeconds,!0),o(Te,t.delivery?.mode||"none",!0),o(Ee,t.delivery?.channel??"",!0),o(Ce,t.delivery?.to??"",!0),o(ze,t.enabled??!0,!0),o(Fe,t.notify??!1,!0),o(Ge,!0)}function Pt(){o(le,""),o(F,"every"),o(he,""),o(q,3e5),o(G,""),o(ke,""),o(ee,"main"),o(we,""),o($e,""),o(Se,""),o(Me,""),o(ve,void 0),o(Te,"none"),o(Ee,""),o(Ce,""),o(ze,!0),o(Fe,!1)}function nt(){o(Ge,!1),o(se,null)}function It(){let t={kind:e(F)};e(F)==="at"?t.at=new Date(e(he)).toISOString():e(F)==="every"?t.everyMs=e(q):e(F)==="cron"&&(t.expr=e(G).trim(),e(ke)&&(t.tz=e(ke)));let l={};e(Pe)==="systemEvent"?l={kind:"systemEvent",text:e(we).trim()}:(l={kind:"agentTurn",message:e($e).trim()},e(Se).trim()&&(l.model=e(Se).trim()),e(Me)&&(l.thinking=e(Me)),e(ve)&&e(ve)>0&&(l.timeoutSeconds=e(ve)));let d;e(ee)==="isolated"&&(d={mode:e(Te)},e(Ee).trim()&&(d.channel=e(Ee).trim()),e(Ce).trim()&&(d.to=e(Ce).trim()));const s={schedule:t,payload:l,sessionTarget:e(ee),enabled:e(ze),notify:e(Fe)};return e(le).trim()&&(s.name=e(le).trim()),d&&(s.delivery=d),s}async function Ot(){if(!(!e(rt)||e(Le))){o(Le,!0);try{const t=It();e(se)?(await ce.call("cron.update",{id:e(se),patch:t}),K.success("Updated",`Job "${e(le)||e(se)}" updated`)):(await ce.call("cron.add",{job:t}),K.success("Created",`Job "${e(le)||"new job"}" created`)),nt(),await Ie()}catch(t){K.error("Save failed",String(t))}finally{o(Le,!1)}}}function bt(t){if(t.kind==="cron")return`cron: ${t.expr}${t.tz?` (${t.tz})`:""}`;if(t.kind==="every"){const l=t.everyMs??0;return l>=864e5?`every ${Math.round(l/864e5)}d`:l>=36e5?`every ${Math.round(l/36e5)}h`:l>=6e4?`every ${Math.round(l/6e4)}m`:`every ${Math.round(l/1e3)}s`}return t.kind==="at"?`at: ${t.at?new Date(t.at).toLocaleString():"n/a"}`:t.kind}function Qe(t){if(!t)return"never";const l=new Date(t),s=Date.now()-t;if(Math.abs(s)<6e4)return"just now";if(s>0&&s<36e5)return`${Math.floor(s/6e4)}m ago`;if(s>0&&s<864e5)return`${Math.floor(s/36e5)}h ago`;if(s<0){const y=Math.abs(s);if(y<36e5)return`in ${Math.floor(y/6e4)}m`;if(y<864e5)return`in ${Math.floor(y/36e5)}h`}return l.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ht(t){return t?t<1e3?`${t}ms`:t<6e4?`${(t/1e3).toFixed(1)}s`:`${Math.floor(t/6e4)}m ${Math.round(t%6e4/1e3)}s`:"n/a"}function Ut(t){return t>=864e5?`${t/864e5}d`:t>=36e5?`${t/36e5}h`:t>=6e4?`${t/6e4}m`:`${t/1e3}s`}function Bt(t){try{const l=new Date(t),d=s=>s.toString().padStart(2,"0");return`${l.getFullYear()}-${d(l.getMonth()+1)}-${d(l.getDate())}T${d(l.getHours())}:${d(l.getMinutes())}`}catch{return""}}function Wt(t){const l=t.split(/\s+/);if(l.length<5)return"Invalid cron expression";const[d,s,y,R,k]=l;return t==="* * * * *"?"Every minute":d.startsWith("*/")&&s==="*"&&y==="*"&&R==="*"&&k==="*"?`Every ${d.slice(2)} minutes`:d==="0"&&s.startsWith("*/")&&y==="*"&&R==="*"&&k==="*"?`Every ${s.slice(2)} hours`:d==="0"&&s==="*"&&y==="*"&&R==="*"&&k==="*"?"Every hour at :00":y==="*"&&R==="*"&&k==="*"?`Daily at ${s==="*"?"every hour":`${s}:${d.padStart(2,"0")}`}`:y==="*"&&R==="*"&&k!=="*"?`Weekly on ${["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][Number(k)]??k} at ${s}:${d.padStart(2,"0")}`:R==="*"&&k==="*"&&y!=="*"?`Monthly on day ${y} at ${s}:${d.padStart(2,"0")}`:`min:${d} hour:${s} dom:${y} mon:${R} dow:${k}`}var ot=qr();vr("up3gvt",t=>{ir(()=>{cr.title="Cron Jobs ‚Äî Cortex"})});var mt=a(ot),st=a(mt),ft=n(a(st),2),yt=a(ft);{var Vt=t=>{var l=pr(),d=a(l,!0);r(l),h(()=>{H(l,1,`px-3 py-1 rounded-full text-xs font-medium
                      ${e(_e).enabled?"bg-accent-green/20 text-accent-green border border-accent-green/30":"bg-red-500/20 text-red-400 border border-red-500/30"}`),v(d,e(_e).enabled?"‚óè Active":"‚óã Disabled")}),c(t,l)};M(yt,t=>{e(_e)&&t(Vt)})}var lt=n(yt,2),gt=n(lt,2);r(ft),r(st);var _t=n(st,2);{var Yt=t=>{var l=br(),d=a(l,!0);r(l),h(()=>v(d,e(Ye))),c(t,l)};M(_t,t=>{e(Ye)&&t(Yt)})}var dt=n(_t,2),ht=a(dt),Kt=n(ht);{var qt=t=>{var l=ct();h(d=>v(l,`¬∑ next tick ${d??""}`),[()=>Qe(Date.now()+e(_e).nextRunMs)]),c(t,l)};M(Kt,t=>{e(_e)?.nextRunMs&&t(qt)})}r(dt);var kt=n(dt,2);{var Gt=t=>{var l=Dr(),d=a(l),s=a(d),y=a(s,!0);r(s);var R=n(s,2);r(d);var k=n(d,2),B=a(k),Q=n(a(B),2);Z(Q),r(B);var te=n(B,2),re=n(a(te),2);ne(re,20,()=>[["at","üìÖ One-shot"],["every","üîÑ Recurring"],["cron","‚è± Cron"]],ge,(i,u)=>{var p=ye(()=>ut(u,2));let S=()=>e(p)[0],C=()=>e(p)[1];var _=mr(),g=a(_,!0);r(_),h(()=>{H(_,1,`px-3 py-1.5 rounded-md text-sm transition-all
                        ${e(F)===S()?"bg-accent-purple/30 text-accent-purple shadow-sm":"text-text-muted hover:text-text-secondary"}`),v(g,C())}),D("click",_,()=>o(F,S(),!0)),c(i,_)}),r(re);var De=n(re,2);{var de=i=>{var u=fr(),p=n(a(u),2);Z(p),r(u),j(p,()=>e(he),S=>o(he,S)),c(i,u)};M(De,i=>{e(F)==="at"&&i(de)})}var N=n(De,2);{var U=i=>{var u=gr(),p=n(a(u),2);ne(p,21,()=>Jt,ge,(f,T)=>{var w=yr(),b=a(w,!0);r(w),h(()=>{H(w,1,`px-3 py-1 rounded-md text-xs border transition-all
                            ${e(q)===e(T).ms?"border-accent-cyan/50 bg-accent-cyan/20 text-accent-cyan":"border-border-default text-text-muted hover:border-accent-cyan/30 hover:text-text-secondary"}`),v(b,e(T).label)}),D("click",w,()=>o(q,e(T).ms,!0)),c(f,w)}),r(p);var S=n(p,2),C=a(S);Z(C);var _=n(C,2),g=a(_);r(_),r(S),r(u),h(f=>v(g,`ms (${f??""})`),[()=>Ut(e(q))]),j(C,()=>e(q),f=>o(q,f)),c(i,u)};M(N,i=>{e(F)==="every"&&i(U)})}var xe=n(N,2);{var L=i=>{var u=wr(),p=a(u),S=n(a(p),2);Z(S);var C=n(S,2);{var _=b=>{var $=_r(),J=a($);r($),h(()=>v(J,`‚Üí ${e(xt)??""}`)),c(b,$)};M(C,b=>{e(xt)&&b(_)})}r(p);var g=n(p,2),f=n(a(g),2);ne(f,21,()=>At,ge,(b,$)=>{var J=hr(),P=a(J,!0);r(J),h(()=>{H(J,1,`px-2.5 py-1 rounded-md text-xs border transition-all
                              ${e(G)===e($).expr?"border-accent-cyan/50 bg-accent-cyan/20 text-accent-cyan":"border-border-default text-text-muted hover:border-accent-cyan/30 hover:text-text-secondary"}`),v(P,e($).label)}),D("click",J,()=>o(G,e($).expr,!0)),c(b,J)}),r(f),r(g);var T=n(g,2),w=n(a(T),2);ne(w,21,()=>Nt,ge,(b,$)=>{var J=kr(),P=a(J,!0);r(J);var et={};h(()=>{v(P,e($)||"(default / UTC)"),et!==(et=e($))&&(J.value=(J.__value=e($))??"")}),c(b,J)}),r(w),r(T),r(u),j(S,()=>e(G),b=>o(G,b)),Et(w,()=>e(ke),b=>o(ke,b)),c(i,u)};M(xe,i=>{e(F)==="cron"&&i(L)})}r(te);var W=n(te,2),pe=n(a(W),2);ne(pe,20,()=>[["main","üè† Main Session","System event in main context"],["isolated","üîí Isolated","Separate agent turn with its own session"]],ge,(i,u)=>{var p=ye(()=>ut(u,3));let S=()=>e(p)[0],C=()=>e(p)[1],_=()=>e(p)[2];var g=$r(),f=a(g),T=a(f,!0);r(f);var w=n(f,2),b=a(w,!0);r(w),r(g),h(()=>{H(g,1,`flex-1 p-3 rounded-lg border text-left transition-all
                        ${e(ee)===S()?"border-accent-purple/50 bg-accent-purple/10":"border-border-default hover:border-border-default/80"}`),H(f,1,`text-sm font-medium ${e(ee)===S()?"text-accent-purple":"text-text-secondary"}`),v(T,C()),v(b,_())}),D("click",g,()=>o(ee,S(),!0)),c(i,g)}),r(pe),r(W);var X=n(W,2),be=a(X),ae=n(a(be)),Oe=a(ae,!0);r(ae),r(be);var Ae=n(be,2);{var He=i=>{var u=Sr();Mt(u),vt(u,"rows",3),j(u,()=>e(we),p=>o(we,p)),c(i,u)},Je=i=>{var u=Mr(),p=a(u);Mt(p),vt(p,"rows",3);var S=n(p,2),C=a(S),_=n(a(C),2);Z(_),r(C);var g=n(C,2),f=n(a(g),2),T=a(f);T.value=T.__value="";var w=n(T);w.value=w.__value="on";var b=n(w);b.value=b.__value="stream",r(f),r(g);var $=n(g,2),J=n(a($),2);Z(J),r($),r(S),r(u),j(p,()=>e($e),P=>o($e,P)),j(_,()=>e(Se),P=>o(Se,P)),Et(f,()=>e(Me),P=>o(Me,P)),j(J,()=>e(ve),P=>o(ve,P)),c(i,u)};M(Ae,i=>{e(Pe)==="systemEvent"?i(He):i(Je,!1)})}r(X);var ie=n(X,2);{var Ue=i=>{var u=Cr(),p=n(a(u),2);ne(p,20,()=>[["none","None"],["announce","üì¢ Announce"]],ge,(_,g)=>{var f=ye(()=>ut(g,2));let T=()=>e(f)[0],w=()=>e(f)[1];var b=Tr(),$=a(b,!0);r(b),h(()=>{H(b,1,`px-4 py-1.5 rounded-lg text-sm border transition-all
                          ${e(Te)===T()?"border-accent-cyan/50 bg-accent-cyan/15 text-accent-cyan":"border-border-default text-text-muted hover:text-text-secondary"}`),v($,w())}),D("click",b,()=>o(Te,T(),!0)),c(_,b)}),r(p);var S=n(p,2);{var C=_=>{var g=Er(),f=a(g),T=n(a(f),2);Z(T),r(f);var w=n(f,2),b=n(a(w),2);Z(b),r(w),r(g),j(T,()=>e(Ee),$=>o(Ee,$)),j(b,()=>e(Ce),$=>o(Ce,$)),c(_,g)};M(S,_=>{e(Te)==="announce"&&_(C)})}r(u),c(i,u)};M(ie,i=>{e(ee)==="isolated"&&i(Ue)})}var me=n(ie,2),Ne=a(me),Xe=a(Ne);Z(Xe),St(2),r(Ne);var Ze=n(Ne,2),E=a(Ze);Z(E),St(2),r(Ze),r(me);var A=n(me,2),V=a(A),Y=n(V,2),Be=a(Y);{var We=i=>{var u=ct("Saving...");c(i,u)},je=i=>{var u=ct();h(()=>v(u,e(se)?"üíæ Update Job":"‚ú® Create Job")),c(i,u)};M(Be,i=>{e(Le)?i(We):i(je,!1)})}r(Y),r(A),r(k),r(l),h(()=>{v(y,e(se)?"‚úèÔ∏è Edit Job":"‚ú® Create Job"),v(Oe,e(Pe)),Y.disabled=!e(rt)||e(Le),H(Y,1,`px-6 py-2 rounded-lg text-sm font-medium transition-all
                     disabled:opacity-40 disabled:cursor-not-allowed
                     ${e(rt)?"bg-accent-purple/25 text-accent-purple border border-accent-purple/50 hover:bg-accent-purple/35 hover:shadow-[0_0_16px_rgba(124,77,255,0.3)]":"bg-bg-tertiary text-text-muted border border-border-default"}`)}),D("click",R,nt),j(Q,()=>e(le),i=>o(le,i)),Tt(Xe,()=>e(ze),i=>o(ze,i)),Tt(E,()=>e(Fe),i=>o(Fe,i)),D("click",V,nt),D("click",Y,Ot),c(t,l)};M(kt,t=>{e(Ge)&&t(Gt)})}var wt=n(kt,2);{var Qt=t=>{var l=Jr();ne(l,20,()=>Array(3),ge,(d,s)=>{var y=Ar();c(d,y)}),r(l),c(t,l)},Xt=t=>{var l=Nr(),d=n(a(l),6);r(l),D("click",d,pt),c(t,l)},Zt=t=>{var l=Ur();ne(l,21,()=>e(ue),d=>d.id,(d,s)=>{var y=Hr(),R=a(y),k=a(R),B=a(k);r(k);var Q=n(k,2),te=a(Q),re=a(te),De=a(re,!0);r(re);var de=n(re,2),N=a(de,!0);r(de);var U=n(de,2),xe=a(U,!0);r(U),r(te);var L=n(te,2),W=a(L),pe=a(W,!0);r(W);var X=n(W,2);{var be=E=>{var A=Rr(),V=a(A);r(A),h(Y=>v(V,`Next: ${Y??""}`),[()=>Qe(e(s).nextRunAt)]),c(E,A)};M(X,E=>{e(s).nextRunAt&&E(be)})}var ae=n(X,2);{var Oe=E=>{var A=Lr(),V=a(A);r(A),h(Y=>v(V,`Last: ${Y??""}`),[()=>Qe(e(s).lastRunAt)]),c(E,A)};M(ae,E=>{e(s).lastRunAt&&E(Oe)})}var Ae=n(ae,2);{var He=E=>{var A=zr(),V=a(A);r(A),h(()=>v(V,`${e(s).runCount??""} runs`)),c(E,A)};M(Ae,E=>{e(s).runCount&&E(He)})}r(L),r(Q);var Je=n(Q,2),ie=a(Je),Ue=n(ie,2),me=n(Ue,2),Ne=n(me,2);r(Je),r(R);var Xe=n(R,2);{var Ze=E=>{var A=Or(),V=a(A);{var Y=I=>{var O=Fr(),fe=n(a(O),2),it=a(fe,!0);r(fe),r(O),h(()=>v(it,e(s).description)),c(I,O)};M(V,I=>{e(s).description&&I(Y)})}var Be=n(V,2),We=a(Be),je=n(a(We),2),i=a(je,!0);r(je),r(We);var u=n(We,2),p=n(a(u),2),S=a(p,!0);r(p),r(u);var C=n(u,2),_=n(a(C),2),g=a(_,!0);r(_),r(C);var f=n(C,2),T=n(a(f),2),w=a(T,!0);r(T),r(f),r(Be);var b=n(Be,2),$=n(a(b),2),J=a($,!0);r($),r(b);var P=n(b,2);{var et=I=>{var O=Pr(),fe=n(a(O),2),it=a(fe,!0);r(fe),r(O),h(ar=>v(it,ar),[()=>JSON.stringify(e(s).delivery,null,2)]),c(I,O)};M(P,I=>{e(s).delivery&&I(et)})}var tr=n(P,2);{var rr=I=>{var O=Ir(),fe=a(O);r(O),h(()=>v(fe,`Last error: ${e(s).lastError??""}`)),c(I,O)};M(tr,I=>{e(s).lastError&&I(rr)})}r(A),h((I,O)=>{v(i,I),v(S,e(s).sessionTarget),v(g,e(s).notify?"Yes":"No"),v(w,e(s).id),v(J,O)},[()=>bt(e(s).schedule),()=>JSON.stringify(e(s).payload,null,2)]),c(E,A)};M(Xe,E=>{e(qe)===e(s).id&&E(Ze)})}r(y),h(E=>{H(y,1,`rounded-xl border bg-bg-secondary/50 transition-all duration-200
                      ${e(s).enabled?"border-border-default hover:border-border-default/80":"border-border-default/50 opacity-60"}
                      ${e(qe)===e(s).id?"shadow-[0_0_12px_rgba(0,229,255,0.1)]":""}`),k.disabled=e(z),H(k,1,`w-10 h-6 rounded-full transition-colors relative flex-shrink-0 cursor-pointer
                       ${e(s).enabled?"bg-accent-green/30":"bg-bg-tertiary"}`),vt(k,"title",`${e(s).enabled?"Disable":"Enable"} job`),H(B,1,`absolute top-1 w-4 h-4 rounded-full transition-all duration-200
                           ${e(s).enabled?"left-5 bg-accent-green":"left-1 bg-text-muted"}`),v(De,e(s).name||e(s).id),H(de,1,`px-2 py-0.5 rounded text-xs
                              ${e(s).payload.kind==="agentTurn"?"bg-accent-purple/20 text-accent-purple":"bg-accent-cyan/20 text-accent-cyan"}`),v(N,e(s).payload.kind==="agentTurn"?"agent":"event"),v(xe,e(s).sessionTarget),v(pe,E),ie.disabled=e(z),Ue.disabled=e(z),me.disabled=e(z),Ne.disabled=e(z)},[()=>bt(e(s).schedule)]),D("click",k,()=>Rt(e(s))),D("click",Q,()=>o(qe,e(qe)===e(s).id?null:e(s).id,!0)),D("click",ie,()=>Ft(e(s))),D("click",Ue,()=>Lt(e(s))),D("click",me,()=>at(e(s).id)),D("click",Ne,()=>zt(e(s))),c(d,y)}),r(l),c(t,l)};M(wt,t=>{e(Ve)?t(Qt):e(ue).length===0?t(Xt,1):t(Zt,!1)})}var jt=n(wt,2);{var er=t=>{const l=ye(()=>e(ue).find(N=>N.id===e(oe)));var d=Kr(),s=a(d),y=a(s),R=a(y);r(y);var k=n(y,2),B=a(k),Q=n(B,2);r(k),r(s);var te=n(s,2);{var re=N=>{var U=Br();c(N,U)},De=N=>{var U=Wr();c(N,U)},de=N=>{var U=Yr();ne(U,21,()=>e(Re),xe=>xe.id,(xe,L)=>{var W=Vr(),pe=a(W),X=n(pe,2),be=a(X,!0);r(X);var ae=n(X,2),Oe=a(ae,!0);r(ae);var Ae=n(ae,2),He=a(Ae);r(Ae),r(W),h((Je,ie)=>{H(pe,1,`w-2 h-2 rounded-full flex-shrink-0
                            ${e(L).status==="ok"||e(L).status==="success"?"bg-accent-green":e(L).status==="error"||e(L).status==="failed"?"bg-red-500":e(L).status==="running"?"bg-accent-cyan animate-pulse":"bg-text-muted"}`),v(be,Je),v(Oe,ie),v(He,`${e(L).status??""}${e(L).error?`: ${e(L).error}`:""}`)},[()=>Qe(e(L).startedAt),()=>Ht(e(L).durationMs)]),c(xe,W)}),r(U),c(N,U)};M(te,N=>{e(Ke)?N(re):e(Re).length===0?N(De,1):N(de,!1)})}r(d),h(()=>{v(R,`üìã Run History: ${e(l)?.name??e(oe)??""}`),B.disabled=e(Ke)}),D("click",B,()=>at(e(oe))),D("click",Q,()=>{o(oe,null),o(Re,[],!0)}),c(t,d)};M(jt,t=>{e(oe)&&t(er)})}r(mt),r(ot),h(t=>{lt.disabled=tt.state.status!=="connected",gt.disabled=e(Ve)||tt.state.status!=="connected",v(ht,`${e(ue).length??""} job${e(ue).length!==1?"s":""} ¬∑ ${t??""} enabled `)},[()=>e(ue).filter(t=>t.enabled).length]),D("click",lt,pt),D("click",gt,Ie),c(Ct,ot),dr()}nr(["click"]);export{aa as component};
