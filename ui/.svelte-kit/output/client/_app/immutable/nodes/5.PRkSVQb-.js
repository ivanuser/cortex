import{d as Xe,a as it,b as d,f as v,s as l,t as Et,c as ie}from"../chunks/B2A7gHtL.js";import{p as Ze,s as q,a as tr,u as er,b as rr,t as g,c as ar,e as sr,g as t,d as m,f as s,$ as or,h as r,r as e,i as F,j as Rt,n as Dt}from"../chunks/qR_TM3YX.js";import{i as x}from"../chunks/DpBBTLWw.js";import{g as nr,a as at,s as j,e as Tt,i as ne,b as de}from"../chunks/BhtVncI_.js";import{h as dr}from"../chunks/CXQ1lKJR.js";import{g as ir}from"../chunks/Be_uRYmX.js";import{f as lt}from"../chunks/DPrxUVm_.js";var lr=v('<span class="text-xs text-text-muted font-mono"> </span>'),cr=v('<div class="flex items-center gap-1.5 text-xs"><span class="w-2 h-2 rounded-full bg-red-500"></span> <span class="text-text-muted">Errors</span> <span class="text-red-400 font-mono font-semibold"> </span></div>'),vr=v('<div class="flex items-center gap-4 mt-4"><div class="flex items-center gap-1.5 text-xs"><span class="w-2 h-2 rounded-full bg-accent-cyan"></span> <span class="text-text-muted">Total</span> <span class="text-text-primary font-mono font-semibold"> </span></div> <div class="flex items-center gap-1.5 text-xs"><span class="w-2 h-2 rounded-full bg-accent-green glow-pulse"></span> <span class="text-text-muted">Connected</span> <span class="text-accent-green font-mono font-semibold"> </span></div> <div class="flex items-center gap-1.5 text-xs"><span class="w-2 h-2 rounded-full bg-accent-amber"></span> <span class="text-text-muted">Configured</span> <span class="text-text-secondary font-mono font-semibold"> </span></div> <!></div>'),ur=v('<div class="flex flex-col items-center justify-center h-full text-center"><div class="w-16 h-16 rounded-2xl bg-bg-tertiary border border-border-default flex items-center justify-center mb-4"><svg class="w-8 h-8 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636a9 9 0 010 12.728m-2.829-2.829a5 5 0 000-7.07m-4.243 9.9a9 9 0 01-4.242-1.757"></path></svg></div> <p class="text-text-muted text-sm">Connect to the gateway to view channel status.</p></div>'),pr=v('<div class="glass rounded-xl p-4 border border-accent-pink/30 mb-4"><div class="flex items-center gap-2 text-accent-pink text-sm"><svg class="w-4 h-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg> <span> </span></div></div>'),xr=v('<div class="glass rounded-xl p-5 border border-border-default animate-pulse"><div class="flex items-center gap-3 mb-4"><div class="w-10 h-10 rounded-xl bg-bg-tertiary"></div> <div><div class="h-4 w-24 bg-bg-tertiary rounded mb-1.5"></div> <div class="h-3 w-36 bg-bg-tertiary rounded"></div></div></div> <div class="space-y-2.5"><div class="h-3 w-full bg-bg-tertiary rounded"></div> <div class="h-3 w-3/4 bg-bg-tertiary rounded"></div> <div class="h-3 w-1/2 bg-bg-tertiary rounded"></div></div></div>'),gr=v('<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"></div>'),br=v('<div class="flex flex-col items-center justify-center h-64 text-center"><div class="w-14 h-14 rounded-2xl bg-bg-tertiary border border-border-default flex items-center justify-center mb-4"><svg class="w-7 h-7 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div> <p class="text-text-muted text-sm">No channels configured. Add channels in your gateway config.</p></div>'),fr=v("<div> </div>"),mr=v('<div class="flex justify-between"><span class="text-text-muted">Linked</span> <span> </span></div>'),_r=v('<div class="flex justify-between"><span class="text-text-muted">Mode</span> <span class="text-text-primary font-mono"> </span></div>'),hr=v('<div class="mx-4 mb-3 p-2.5 rounded-lg bg-red-500/8 border border-red-500/20"><p class="text-xs text-red-400 leading-relaxed break-words"> </p></div>'),wr=v("<div><p> <!> <!> <!></p></div>"),yr=v('<div class="mx-4 mb-3 p-2.5 rounded-lg bg-accent-cyan/8 border border-accent-cyan/20"><p class="text-xs text-accent-cyan"> </p></div>'),kr=v('<div class="mx-4 mb-3 p-2.5 rounded-lg bg-accent-green/8 border border-accent-green/20"><div class="flex items-center gap-2"><svg class="w-4 h-4 text-accent-green" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <p class="text-xs text-accent-green font-medium">WhatsApp connected successfully!</p></div></div>'),Mr=v('<div class="mx-4 mb-3 text-center"><p class="text-xs text-text-muted animate-pulse">Waiting for scan…</p></div>'),Cr=v('<div class="mx-4 mb-3 flex justify-center"><div><img alt="WhatsApp QR Code" class="w-48 h-48"/></div></div> <!>',1),Ar=ie('<svg class="w-3.5 h-3.5 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> Working…',1),zr=ie('<svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"></path></svg> Show QR',1),Lr=v(`<button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-all
                           bg-bg-tertiary text-text-secondary border border-border-default
                           hover:text-accent-cyan hover:border-accent-cyan/30
                           disabled:opacity-40 disabled:cursor-not-allowed">Wait for scan</button>`),jr=v(`<!> <!> <!> <div class="px-4 pb-3 flex flex-wrap gap-2"><button class="flex items-center gap-1.5 px-3 py-1.5 text-xs font-medium rounded-lg transition-all
                         bg-[#25d366]/15 text-[#25d366] border border-[#25d366]/25
                         hover:bg-[#25d366]/25 hover:border-[#25d366]/40
                         disabled:opacity-40 disabled:cursor-not-allowed"><!></button> <button class="px-3 py-1.5 text-xs font-medium rounded-lg transition-all
                         bg-bg-tertiary text-text-secondary border border-border-default
                         hover:text-accent-cyan hover:border-accent-cyan/30
                         disabled:opacity-40 disabled:cursor-not-allowed">Relink</button> <!></div>`,1),$r=v('<p class="mt-1.5 text-[11px] text-red-400 break-words"> </p>'),Sr=v('<div class="p-2.5 rounded-lg bg-bg-tertiary/50 border border-border-default"><div class="flex items-center justify-between mb-1.5"><span class="text-xs font-medium text-text-primary"> </span> <span class="text-[10px] font-mono text-text-muted"> </span></div> <div class="grid grid-cols-3 gap-2 text-[11px]"><div><span class="text-text-muted">Running</span> <span> </span></div> <div><span class="text-text-muted">Config</span> <span> </span></div> <div><span class="text-text-muted">Inbound</span> <span class="ml-1 text-text-primary"> </span></div></div> <!></div>'),Br=v('<div class="px-4 pb-3 space-y-2"></div>'),Hr=v(`<button class="flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium rounded-lg transition-all
                         text-red-400/80 hover:text-red-400 hover:bg-red-500/10 border border-transparent hover:border-red-500/20
                         disabled:opacity-40 disabled:cursor-not-allowed"><svg class="w-3.5 h-3.5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> </button>`),Wr=v('<div><span class="text-text-muted block mb-0.5">Last connected</span> <span class="text-text-primary"> </span></div>'),Vr=v('<div><span class="text-text-muted block mb-0.5">Last message</span> <span class="text-text-primary"> </span></div>'),Nr=v('<div><span class="text-text-muted block mb-0.5">Last start</span> <span class="text-text-primary"> </span></div>'),Er=v('<div><span class="text-text-muted block mb-0.5">Last probe</span> <span class="text-text-primary"> </span></div>'),Rr=v('<div><span class="text-text-muted block mb-0.5">Auth age</span> <span class="text-text-primary font-mono"> </span></div>'),Dr=v('<div><span class="text-text-muted block mb-0.5">Base URL</span> <span class="text-text-primary font-mono text-[11px] break-all"> </span></div>'),Tr=v('<div><span class="text-text-muted block mb-0.5">Mode</span> <span class="text-text-primary font-mono"> </span></div>'),Ur=v('<div class="border-t border-border-default p-4 animate-slide-in-up"><div class="grid grid-cols-2 lg:grid-cols-3 gap-4 text-xs"><!> <!> <!> <!> <!> <!> <!></div> <details class="mt-4"><summary class="text-[11px] text-text-muted cursor-pointer hover:text-text-secondary transition-colors">Raw status JSON</summary> <pre class="mt-2 p-3 rounded-lg bg-bg-tertiary/60 border border-border-default text-[11px] text-text-secondary font-mono overflow-x-auto max-h-64 overflow-y-auto leading-relaxed"> </pre></details></div>'),Or=v(`<div><div class="p-4 pb-3"><div class="flex items-start justify-between gap-3"><div class="flex items-center gap-3 min-w-0"><div><svg viewBox="0 0 24 24" fill="currentColor"><path></path></svg></div> <div class="min-w-0"><h3 class="text-sm font-semibold text-text-primary truncate"> </h3> <p class="text-xs text-text-muted truncate"> </p></div></div> <span><span class="inline-flex items-center gap-1"><span></span> </span></span></div> <!></div> <div class="px-4 pb-3"><div class="grid grid-cols-2 gap-x-4 gap-y-1.5 text-xs"><div class="flex justify-between"><span class="text-text-muted">Configured</span> <span> </span></div> <div class="flex justify-between"><span class="text-text-muted">Running</span> <span> </span></div> <div class="flex justify-between"><span class="text-text-muted">Connected</span> <span> </span></div> <!> <!></div></div> <!> <!> <!> <!> <div class="px-4 pb-4 pt-1 flex items-center gap-2 border-t border-border-default mt-1"><button class="flex items-center gap-1 px-2.5 py-1.5 text-xs font-medium rounded-lg transition-all
                       text-text-muted hover:text-text-primary hover:bg-bg-hover"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg> Details</button> <div class="flex-1"></div> <!></div> <!></div>`),Yr=v('<span class="text-xs text-text-muted font-mono ml-2"> </span>'),Qr=v('<div class="p-2.5 rounded-lg bg-red-500/8 border border-red-500/20 mb-3"><p class="text-xs text-red-400"> </p></div>'),Pr=v('<details class="mt-6"><summary class="glass rounded-xl p-4 border border-border-default cursor-pointer hover:border-accent-cyan/20 transition-all"><div class="inline-flex items-center gap-2"><svg class="w-4 h-4 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg> <span class="text-sm text-text-muted">Channel health snapshot</span> <!></div></summary> <div class="mt-2 glass rounded-xl p-4 border border-border-default"><!> <pre class="text-[11px] text-text-secondary font-mono overflow-x-auto max-h-96 overflow-y-auto leading-relaxed"> </pre></div></details>'),Jr=v('<div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4"></div> <!>',1),qr=v('<div class="h-full flex flex-col overflow-hidden"><div class="flex-shrink-0 p-4 md:p-6 pb-4 border-b border-border-default"><div class="flex items-start justify-between gap-4 flex-wrap"><div><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-xl gradient-bg border border-border-glow flex items-center justify-center flex-shrink-0"><svg class="w-5 h-5 text-accent-cyan" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div> <div><h1 class="text-xl font-bold text-text-primary glow-text-cyan">Channels</h1> <p class="text-sm text-text-muted">Messaging platform connections and health</p></div></div></div> <div class="flex items-center gap-2"><!> <button class="flex items-center gap-1.5 px-3 py-1.5 text-sm bg-bg-tertiary border border-border-default rounded-lg text-text-secondary hover:text-accent-cyan hover:border-accent-cyan/30 transition-all disabled:opacity-40 disabled:cursor-not-allowed"><svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path></svg> </button> <button class="flex items-center gap-1.5 px-3 py-1.5 text-sm bg-accent-cyan/10 border border-accent-cyan/25 rounded-lg text-accent-cyan hover:bg-accent-cyan/20 hover:border-accent-cyan/40 transition-all disabled:opacity-40 disabled:cursor-not-allowed"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg> Probe All</button></div></div> <!></div> <div class="flex-1 overflow-y-auto p-4 md:p-6"><!></div></div>');function ea(le,ce){Ze(ce,!0);const wt=nr(),G=ir(),ve={discord:{color:"text-[#7289da]",bg:"bg-[#7289da]/10",border:"border-[#7289da]/25",glow:"shadow-[0_0_12px_rgba(114,137,218,0.2)]",icon:"M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 00.031.057 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03z"},telegram:{color:"text-[#0088cc]",bg:"bg-[#0088cc]/10",border:"border-[#0088cc]/25",glow:"shadow-[0_0_12px_rgba(0,136,204,0.2)]",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"},whatsapp:{color:"text-[#25d366]",bg:"bg-[#25d366]/10",border:"border-[#25d366]/25",glow:"shadow-[0_0_12px_rgba(37,211,102,0.2)]",icon:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z M12 2C6.477 2 2 6.477 2 12c0 1.89.525 3.66 1.438 5.168L2 22l4.832-1.438A9.955 9.955 0 0012 22c5.523 0 10-4.477 10-10S17.523 2 12 2z"},signal:{color:"text-[#3a76f0]",bg:"bg-[#3a76f0]/10",border:"border-[#3a76f0]/25",glow:"shadow-[0_0_12px_rgba(58,118,240,0.2)]",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15l-4-4 1.41-1.41L11 14.17l6.59-6.59L19 9l-8 8z"},slack:{color:"text-[#e01e5a]",bg:"bg-[#e01e5a]/10",border:"border-[#e01e5a]/25",glow:"shadow-[0_0_12px_rgba(224,30,90,0.2)]",icon:"M5.042 15.165a2.528 2.528 0 01-2.52 2.523A2.528 2.528 0 010 15.165a2.527 2.527 0 012.522-2.52h2.52v2.52zm1.271 0a2.527 2.527 0 012.521-2.52 2.527 2.527 0 012.521 2.52v6.313A2.528 2.528 0 018.834 24a2.528 2.528 0 01-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 01-2.521-2.52A2.528 2.528 0 018.834 0a2.528 2.528 0 012.521 2.522v2.52H8.834zm0 1.271a2.528 2.528 0 012.521 2.521 2.528 2.528 0 01-2.521 2.521H2.522A2.528 2.528 0 010 8.834a2.528 2.528 0 012.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 012.522-2.521A2.528 2.528 0 0124 8.834a2.528 2.528 0 01-2.522 2.521h-2.522V8.834zm-1.271 0a2.528 2.528 0 01-2.521 2.521 2.528 2.528 0 01-2.521-2.521V2.522A2.528 2.528 0 0115.164 0a2.528 2.528 0 012.521 2.522v6.312zM15.164 18.956a2.528 2.528 0 012.521 2.522A2.528 2.528 0 0115.164 24a2.528 2.528 0 01-2.521-2.522v-2.522h2.521zm0-1.271a2.528 2.528 0 01-2.521-2.521 2.528 2.528 0 012.521-2.521h6.314A2.528 2.528 0 0124 15.164a2.528 2.528 0 01-2.522 2.521h-6.314z"},imessage:{color:"text-[#34c759]",bg:"bg-[#34c759]/10",border:"border-[#34c759]/25",glow:"shadow-[0_0_12px_rgba(52,199,89,0.2)]",icon:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"},nostr:{color:"text-accent-purple",bg:"bg-accent-purple/10",border:"border-accent-purple/25",glow:"shadow-[0_0_12px_rgba(124,77,255,0.2)]",icon:"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"},googlechat:{color:"text-[#00ac47]",bg:"bg-[#00ac47]/10",border:"border-[#00ac47]/25",glow:"shadow-[0_0_12px_rgba(0,172,71,0.2)]",icon:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"},"nextcloud-talk":{color:"text-[#0082c9]",bg:"bg-[#0082c9]/10",border:"border-[#0082c9]/25",glow:"shadow-[0_0_12px_rgba(0,130,201,0.2)]",icon:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.41 16.09V20H8.54v-1.91c-1.75-.32-3.29-1.46-3.4-3.33h1.82c.13 1.05.97 1.72 2.59 1.72 1.72 0 2.1-.81 2.1-1.32 0-.69-.42-1.33-2.17-1.79C7.76 12.91 6 12.15 6 10.24c0-1.57 1.27-2.66 2.54-2.98V5.35h2.05v1.93c1.61.42 2.57 1.66 2.62 3.03h-1.82c-.05-.96-.73-1.72-2.12-1.72-1.32 0-2.21.59-2.21 1.48 0 .93.65 1.28 2.42 1.76 1.96.53 3.83 1.14 3.83 3.41 0 1.78-1.36 2.76-2.72 3.15V18.09z"}},ue={color:"text-accent-cyan",bg:"bg-accent-cyan/10",border:"border-accent-cyan/25",glow:"shadow-[0_0_12px_rgba(0,229,255,0.2)]",icon:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"},pe={discord:"Bot status and server configuration",telegram:"Bot status and message polling",whatsapp:"WhatsApp Web link and connection health",signal:"signal-cli daemon status",slack:"Slack app and workspace connection",imessage:"iMessage bridge status",nostr:"Nostr relay and profile management",googlechat:"Google Chat app status","nextcloud-talk":"Nextcloud Talk webhook bot"};let B=q(null),I=q(!1),ct=q(null),xt=q(null),E=q(!1),K=q(null),X=q(null),gt=q(null),st=q(tr({})),kt=q(null),xe=F(()=>t(B)?.channelMeta?.length?t(B).channelMeta.map(a=>a.id):t(B)?.channelOrder?.length?t(B).channelOrder:["whatsapp","telegram","discord","googlechat","slack","signal","imessage","nostr"]),ot=F(()=>{const a=t(B)?.channels??{},n=t(B)?.channelAccounts??{};return t(xe).map((u,k)=>{const C=a[u],H=n[u]??[],o=!!(C?.configured||C?.running||C?.connected||H.some(A=>A.configured||A.running||A.connected));return{key:u,status:C,accounts:H,enabled:o,order:k}}).toSorted((u,k)=>u.enabled!==k.enabled?u.enabled?-1:1:u.order-k.order)}),bt=F(()=>{const a=t(ot).length,n=t(ot).filter(C=>Qt(C.status,C.accounts)==="connected").length,u=t(ot).filter(C=>C.enabled).length,k=t(ot).filter(C=>C.status?.lastError).length;return{total:a,connected:n,configured:u,errors:k}});async function ft(a=!1){if(!(!at.connected||t(I))){m(I,!0),m(ct,null);try{const n=await at.call("channels.status",{probe:a,timeoutMs:8e3});m(B,n,!0),m(xt,Date.now(),!0),a&&G.success("Channels probed","All channel statuses refreshed")}catch(n){m(ct,String(n),!0),G.error("Failed to load channels",String(n))}finally{m(I,!1)}}}async function ge(a){if(!(!at.connected||t(st)[a])){m(st,{...t(st),[a]:!0},!0);try{await at.call("channels.logout",{channelId:a}),G.success("Logged out",`${Yt(a)} has been disconnected`),a==="whatsapp"&&(m(K,"Logged out."),m(X,null),m(gt,null)),await ft(!1)}catch(n){G.error("Logout failed",String(n))}finally{m(st,{...t(st),[a]:!1},!0)}}}async function Ut(a=!1){if(!(!at.connected||t(E))){m(E,!0),m(K,null),m(X,null),m(gt,null);try{const n=await at.call("web.login.start",{force:a,timeoutMs:3e4});m(K,n.message??null,!0),m(X,n.qrDataUrl??null,!0),t(X)&&(G.info("QR Code ready","Scan with WhatsApp to connect"),Ot())}catch(n){m(K,String(n),!0),G.error("WhatsApp login failed",String(n))}finally{m(E,!1)}}}async function Ot(){if(!(!at.connected||t(E))){m(E,!0);try{const a=await at.call("web.login.wait",{timeoutMs:12e4});m(K,a.message??null,!0),m(gt,a.connected??null,!0),a.connected?(m(X,null),G.success("WhatsApp connected","Successfully linked via QR scan"),await ft(!1)):a.error&&G.error("WhatsApp login failed",a.error)}catch(a){m(K,String(a),!0),m(gt,null)}finally{m(E,!1)}}}function Yt(a){return t(B)?.channelMeta?.find(u=>u.id===a)?.label??t(B)?.channelLabels?.[a]??a.charAt(0).toUpperCase()+a.slice(1)}function be(a){return ve[a]??ue}function Qt(a,n){return a?.connected||n?.some(u=>u.connected)||a?.running&&a?.configured||a?.configured&&!a?.lastError?"connected":a?.running?"connecting":(a?.configured&&a?.lastError,"disconnected")}function fe(a){switch(a){case"connected":return"bg-accent-green";case"connecting":return"bg-accent-amber";default:return"bg-red-500"}}function me(a){switch(a){case"connected":return"bg-accent-green/15 text-accent-green border border-accent-green/20";case"connecting":return"bg-accent-amber/15 text-accent-amber border border-accent-amber/20";default:return"bg-red-500/10 text-red-400 border border-red-500/20"}}function _e(a){m(kt,t(kt)===a?null:a,!0)}function he(a){const n=Math.floor(a/1e3);if(n<60)return`${n}s`;const u=Math.floor(n/60);if(u<60)return`${u}m`;const k=Math.floor(u/60);return k<24?`${k}h ${u%60}m`:`${Math.floor(k/24)}d ${k%24}h`}er(()=>{wt.state.status==="connected"&&rr(()=>ft(!1))});var Mt=qr();dr("1psf3x9",a=>{sr(()=>{or.title="Channels — Cortex"})});var Ct=r(Mt),At=r(Ct),Pt=s(r(At),2),Jt=r(Pt);{var we=a=>{var n=lr(),u=r(n,!0);e(n),g(k=>l(u,k),[()=>lt(t(xt))]),d(a,n)};x(Jt,a=>{t(xt)&&a(we)})}var mt=s(Jt,2),qt=r(mt),ye=s(qt);e(mt);var Ft=s(mt,2);e(Pt),e(At);var ke=s(At,2);{var Me=a=>{var n=vr(),u=r(n),k=s(r(u),4),C=r(k,!0);e(k),e(u);var H=s(u,2),o=s(r(H),4),A=r(o,!0);e(o),e(H);var R=s(H,2),Z=s(r(R),4),vt=r(Z,!0);e(Z),e(R);var ut=s(R,2);{var pt=T=>{var U=cr(),tt=s(r(U),4),$=r(tt,!0);e(tt),e(U),g(()=>l($,t(bt).errors)),d(T,U)};x(ut,T=>{t(bt).errors>0&&T(pt)})}e(n),g(()=>{l(C,t(bt).total),l(A,t(bt).connected),l(vt,t(bt).configured)}),d(a,n)};x(ke,a=>{t(B)&&t(ot).length>0&&a(Me)})}e(Ct);var Gt=s(Ct,2),Ce=r(Gt);{var Ae=a=>{var n=ur();d(a,n)},ze=a=>{var n=pr(),u=r(n),k=s(r(u),2),C=r(k,!0);e(k),e(u),e(n),g(()=>l(C,t(ct))),d(a,n)},Le=a=>{var n=gr();Tt(n,20,()=>Array(4),ne,(u,k)=>{var C=xr();d(u,C)}),e(n),d(a,n)},je=a=>{var n=br();d(a,n)},$e=a=>{var n=Jr(),u=Rt(n);Tt(u,21,()=>t(ot),H=>H.key,(H,o)=>{const A=F(()=>be(t(o).key)),R=F(()=>Qt(t(o).status,t(o).accounts)),Z=F(()=>t(kt)===t(o).key),vt=F(()=>t(o).key==="whatsapp"),ut=F(()=>Yt(t(o).key)),pt=F(()=>pe[t(o).key]??"Channel status and configuration");var T=Or(),U=r(T),tt=r(U),$=r(tt),V=r($),et=r(V),_t=r(et);e(et),e(V);var It=s(V,2),zt=r(It),Se=r(zt,!0);e(zt);var Kt=s(zt,2),Be=r(Kt,!0);e(Kt),e(It),e($);var Lt=s($,2),Xt=r(Lt),Zt=r(Xt),He=s(Zt);e(Xt),e(Lt),e(tt);var We=s(tt,2);{var Ve=c=>{var i=fr(),_=r(i);e(i),g(()=>{j(i,1,`mt-2 text-[10px] font-medium uppercase tracking-wider text-text-muted ${t(A).color??""}`),l(_,`${t(o).accounts.length??""} accounts`)}),d(c,i)};x(We,c=>{t(o).accounts.length>1&&c(Ve)})}e(U);var jt=s(U,2),te=r(jt),$t=r(te),St=s(r($t),2),Ne=r(St,!0);e(St),e($t);var Bt=s($t,2),Ht=s(r(Bt),2),Ee=r(Ht,!0);e(Ht),e(Bt);var Wt=s(Bt,2),Vt=s(r(Wt),2),Re=r(Vt,!0);e(Vt),e(Wt);var ee=s(Wt,2);{var De=c=>{var i=mr(),_=s(r(i),2),h=r(_,!0);e(_),e(i),g(()=>{j(_,1,t(o).status?.linked?"text-accent-green":"text-text-secondary"),l(h,t(o).status?.linked?"Yes":"No")}),d(c,i)};x(ee,c=>{t(vt)&&t(o).status?.linked!==void 0&&c(De)})}var Te=s(ee,2);{var Ue=c=>{var i=_r(),_=s(r(i),2),h=r(_,!0);e(_),e(i),g(()=>l(h,t(o).status.mode)),d(c,i)};x(Te,c=>{t(o).status?.mode&&c(Ue)})}e(te),e(jt);var re=s(jt,2);{var Oe=c=>{var i=hr(),_=r(i),h=r(_,!0);e(_),e(i),g(()=>l(h,t(o).status.lastError)),d(c,i)};x(re,c=>{t(o).status?.lastError&&c(Oe)})}var ae=s(re,2);{var Ye=c=>{var i=wr(),_=r(i),h=r(_),O=s(h);{var Y=z=>{var L=Et();g(()=>l(L,`· ${t(o).status.probe.status??""}`)),d(z,L)};x(O,z=>{t(o).status.probe.status&&z(Y)})}var D=s(O,2);{var Q=z=>{var L=Et();g(()=>l(L,`· ${t(o).status.probe.error??""}`)),d(z,L)};x(D,z=>{t(o).status.probe.error&&z(Q)})}var rt=s(D,2);{var W=z=>{var L=Et();g(()=>l(L,`· @${t(o).status.probe.bot.username??""}`)),d(z,L)};x(rt,z=>{t(o).status.probe.bot?.username&&z(W)})}e(_),e(i),g(()=>{j(i,1,`mx-4 mb-3 p-2.5 rounded-lg ${t(o).status.probe.ok?"bg-accent-green/8 border border-accent-green/20":"bg-accent-amber/8 border border-accent-amber/20"}`),j(_,1,`text-xs ${t(o).status.probe.ok?"text-accent-green":"text-accent-amber"}`),l(h,`Probe ${t(o).status.probe.ok?"ok":"failed"} `)}),d(c,i)};x(ae,c=>{t(o).status?.probe&&c(Ye)})}var se=s(ae,2);{var Qe=c=>{var i=jr(),_=Rt(i);{var h=f=>{var M=yr(),N=r(M),J=r(N,!0);e(N),e(M),g(()=>l(J,t(K))),d(f,M)};x(_,f=>{t(K)&&f(h)})}var O=s(_,2);{var Y=f=>{var M=kr();d(f,M)};x(O,f=>{t(gt)&&f(Y)})}var D=s(O,2);{var Q=f=>{var M=Cr(),N=Rt(M),J=r(N),p=r(J);e(J),e(N);var b=s(N,2);{var w=y=>{var S=Mr();d(y,S)};x(b,y=>{t(E)&&y(w)})}g(()=>{j(J,1,`p-3 bg-white rounded-xl border-2 ${t(A).border??""}`),de(p,"src",t(X))}),d(f,M)};x(D,f=>{t(X)&&f(Q)})}var rt=s(D,2),W=r(rt),z=r(W);{var L=f=>{var M=Ar();Dt(),d(f,M)},nt=f=>{var M=zr();Dt(),d(f,M)};x(z,f=>{t(E)?f(L):f(nt,!1)})}e(W);var P=s(W,2),ht=s(P,2);{var dt=f=>{var M=Lr();g(()=>M.disabled=t(E)),it("click",M,Ot),d(f,M)};x(ht,f=>{t(X)||f(dt)})}e(rt),g(()=>{W.disabled=t(E),P.disabled=t(E)}),it("click",W,()=>Ut(!1)),it("click",P,()=>Ut(!0)),d(c,i)};x(se,c=>{t(vt)&&c(Qe)})}var oe=s(se,2);{var Pe=c=>{var i=Br();Tt(i,21,()=>t(o).accounts,ne,(_,h)=>{const O=F(()=>t(h).probe?.bot?.username);var Y=Sr(),D=r(Y),Q=r(D),rt=r(Q,!0);e(Q);var W=s(Q,2),z=r(W,!0);e(W),e(D);var L=s(D,2),nt=r(L),P=s(r(nt),2),ht=r(P,!0);e(P),e(nt);var dt=s(nt,2),f=s(r(dt),2),M=r(f,!0);e(f),e(dt);var N=s(dt,2),J=s(r(N),2),p=r(J,!0);e(J),e(N),e(L);var b=s(L,2);{var w=y=>{var S=$r(),Ke=r(S,!0);e(S),g(()=>l(Ke,t(h).lastError)),d(y,S)};x(b,y=>{t(h).lastError&&y(w)})}e(Y),g(y=>{l(rt,t(O)?`@${t(O)}`:t(h).name||t(h).accountId),l(z,t(h).accountId),j(P,1,`ml-1 ${t(h).running?"text-accent-green":"text-text-secondary"}`),l(ht,t(h).running?"Yes":"No"),j(f,1,`ml-1 ${t(h).configured?"text-accent-green":"text-text-secondary"}`),l(M,t(h).configured?"Yes":"No"),l(p,y)},[()=>t(h).lastInboundAt?lt(t(h).lastInboundAt):"n/a"]),d(_,Y)}),e(i),d(c,i)};x(oe,c=>{t(o).accounts.length>1&&c(Pe)})}var Nt=s(oe,2),yt=r(Nt),Je=r(yt);Dt(),e(yt);var qe=s(yt,4);{var Fe=c=>{var i=Hr(),_=s(r(i));e(i),g(()=>{i.disabled=t(st)[t(o).key],l(_,` ${t(st)[t(o).key]?"Logging out…":"Logout"}`)}),it("click",i,()=>ge(t(o).key)),d(c,i)};x(qe,c=>{(t(o).status?.connected||t(o).status?.running)&&c(Fe)})}e(Nt);var Ge=s(Nt,2);{var Ie=c=>{var i=Ur(),_=r(i),h=r(_);{var O=p=>{var b=Wr(),w=s(r(b),2),y=r(w,!0);e(w),e(b),g(S=>l(y,S),[()=>lt(t(o).status.lastConnectedAt)]),d(p,b)};x(h,p=>{t(o).status?.lastConnectedAt&&p(O)})}var Y=s(h,2);{var D=p=>{var b=Vr(),w=s(r(b),2),y=r(w,!0);e(w),e(b),g(S=>l(y,S),[()=>lt(t(o).status.lastMessageAt)]),d(p,b)};x(Y,p=>{t(o).status?.lastMessageAt&&p(D)})}var Q=s(Y,2);{var rt=p=>{var b=Nr(),w=s(r(b),2),y=r(w,!0);e(w),e(b),g(S=>l(y,S),[()=>lt(t(o).status.lastStartAt)]),d(p,b)};x(Q,p=>{t(o).status?.lastStartAt&&p(rt)})}var W=s(Q,2);{var z=p=>{var b=Er(),w=s(r(b),2),y=r(w,!0);e(w),e(b),g(S=>l(y,S),[()=>lt(t(o).status.lastProbeAt)]),d(p,b)};x(W,p=>{t(o).status?.lastProbeAt&&p(z)})}var L=s(W,2);{var nt=p=>{var b=Rr(),w=s(r(b),2),y=r(w,!0);e(w),e(b),g(S=>l(y,S),[()=>he(t(o).status.authAgeMs)]),d(p,b)};x(L,p=>{t(o).status?.authAgeMs!=null&&p(nt)})}var P=s(L,2);{var ht=p=>{var b=Dr(),w=s(r(b),2),y=r(w,!0);e(w),e(b),g(()=>l(y,t(o).status.baseUrl)),d(p,b)};x(P,p=>{t(o).status?.baseUrl&&p(ht)})}var dt=s(P,2);{var f=p=>{var b=Tr(),w=s(r(b),2),y=r(w,!0);e(w),e(b),g(()=>l(y,t(o).status.mode)),d(p,b)};x(dt,p=>{t(o).status?.mode&&p(f)})}e(_);var M=s(_,2),N=s(r(M),2),J=r(N,!0);e(N),e(M),e(i),g(p=>l(J,p),[()=>JSON.stringify(t(o).status,null,2)]),d(c,i)};x(Ge,c=>{t(Z)&&c(Ie)})}e(T),g((c,i)=>{j(T,1,`glass rounded-xl border transition-all duration-300 animate-fade-in
                   ${t(o).enabled?t(A).border+" "+t(A).glow:"border-border-default opacity-60"}
                   ${t(Z)?"md:col-span-2 xl:col-span-2":""}
                   hover:border-opacity-50`),j(V,1,`w-10 h-10 rounded-xl ${t(A).bg??""} ${t(A).border??""} border flex items-center justify-center flex-shrink-0`),j(et,0,`w-5 h-5 ${t(A).color??""}`),de(_t,"d",t(A).icon),l(Se,t(ut)),l(Be,t(pt)),j(Lt,1,`flex-shrink-0 text-[10px] font-semibold uppercase tracking-wider px-2 py-0.5 rounded-full ${c??""}`),j(Zt,1,`w-1.5 h-1.5 rounded-full ${i??""} ${t(R)==="connected"?"glow-pulse":""}`),l(He,` ${t(R)??""}`),j(St,1,t(o).status?.configured?"text-accent-green":"text-text-secondary"),l(Ne,t(o).status?.configured?"Yes":"No"),j(Ht,1,t(o).status?.running?"text-accent-green":"text-text-secondary"),l(Ee,t(o).status?.running?"Yes":"No"),j(Vt,1,t(o).status?.connected?"text-accent-green":"text-text-secondary"),l(Re,t(o).status?.connected?"Yes":"No"),j(Je,0,`w-3.5 h-3.5 transition-transform duration-200 ${t(Z)?"rotate-180":""}`)},[()=>me(t(R)),()=>fe(t(R))]),it("click",yt,()=>_e(t(o).key)),d(H,T)}),e(u);var k=s(u,2);{var C=H=>{var o=Pr(),A=r(o),R=r(A),Z=s(r(R),4);{var vt=$=>{var V=Yr(),et=r(V,!0);e(V),g(_t=>l(et,_t),[()=>lt(t(xt))]),d($,V)};x(Z,$=>{t(xt)&&$(vt)})}e(R),e(A);var ut=s(A,2),pt=r(ut);{var T=$=>{var V=Qr(),et=r(V),_t=r(et,!0);e(et),e(V),g(()=>l(_t,t(ct))),d($,V)};x(pt,$=>{t(ct)&&$(T)})}var U=s(pt,2),tt=r(U,!0);e(U),e(ut),e(o),g($=>l(tt,$),[()=>JSON.stringify(t(B),null,2)]),d(H,o)};x(k,H=>{t(B)&&H(C)})}d(a,n)};x(Ce,a=>{wt.state.status!=="connected"?a(Ae):t(ct)&&!t(B)?a(ze,1):t(I)&&!t(B)?a(Le,2):t(ot).length===0?a(je,3):a($e,!1)})}e(Gt),e(Mt),g(()=>{mt.disabled=t(I)||wt.state.status!=="connected",j(qt,0,`w-4 h-4 ${t(I)?"animate-spin":""}`),l(ye,` ${t(I)?"Loading…":"Refresh"}`),Ft.disabled=t(I)||wt.state.status!=="connected"}),it("click",mt,()=>ft(!1)),it("click",Ft,()=>ft(!0)),d(le,Mt),ar()}Xe(["click"]);export{ea as component};
