import{d as pr,a as gt,b as n,f as i,s as o,c as mr,t as ua}from"../chunks/B2A7gHtL.js";import{p as gr,s as rt,a as pa,u as _r,b as br,t as p,g as t,c as fr,e as hr,f as r,d as h,h as a,$ as yr,r as e,n as Wt,i as k,j as jt}from"../chunks/qR_TM3YX.js";import{i as m}from"../chunks/DpBBTLWw.js";import{g as kr,a as Qt,r as ma,s as _t,e as bt,i as Ct,b as ut}from"../chunks/BhtVncI_.js";import{h as wr}from"../chunks/CXQ1lKJR.js";import{s as st}from"../chunks/tr5b7CMr.js";import{b as ga}from"../chunks/nnazh41B.js";import{b as $r}from"../chunks/DVP7Iy08.js";import{g as Cr}from"../chunks/Be_uRYmX.js";var Tr=mr('<svg class="w-4 h-4 animate-spin inline mr-1" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg>'),Dr=i('<span class="text-accent-amber ml-1">(limit reached)</span>'),Mr=i('<span class="text-xs text-text-muted ml-auto"> <!></span>'),Sr=i('<div class="rounded-xl border border-status-error/30 bg-status-error/10 p-4"><p class="text-sm text-status-error"> </p></div>'),Rr=i('<div class="text-center py-16"><div class="w-16 h-16 rounded-2xl bg-bg-tertiary border border-border-default flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg></div> <p class="text-text-muted text-sm">Connect to the gateway to view usage analytics.</p></div>'),Ur=i('<div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4 animate-pulse"><div class="h-3 w-16 bg-bg-tertiary rounded mb-3"></div> <div class="h-7 w-24 bg-bg-tertiary rounded mb-2"></div> <div class="h-3 w-32 bg-bg-tertiary rounded"></div></div>'),Wr=i('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"></div>'),jr=i('<div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3"><div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-xs text-text-muted">Messages</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-xs text-text-muted">User Msgs</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-xs text-text-muted">Assistant Msgs</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-xs text-text-muted">Tool Calls</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-lg font-bold text-text-primary"> </div> <div class="text-xs text-text-muted">Unique Tools</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div> </div> <div class="text-xs text-text-muted">Errors</div></div></div>'),Lr=i('<div class="bg-accent-pink/80 transition-all"></div> <div class="bg-accent-cyan/80 transition-all"></div> <div class="bg-accent-purple/80 transition-all"></div> <div class="bg-accent-green/80 transition-all"></div>',1),Pr=i('<div class="bg-accent-pink/80 transition-all"></div> <div class="bg-accent-cyan/80 transition-all"></div> <div class="bg-accent-purple/80 transition-all"></div> <div class="bg-accent-green/80 transition-all"></div>',1),Ar=i('<div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4"><h3 class="text-sm font-semibold text-text-primary mb-3"> </h3> <div class="h-4 rounded-full overflow-hidden flex bg-bg-tertiary mb-3"><!></div> <div class="flex flex-wrap gap-x-5 gap-y-1 text-xs"><span class="flex items-center gap-1.5"><span class="w-2.5 h-2.5 rounded-sm bg-accent-pink/80"></span> <span class="text-text-muted">Output</span> <span class="text-text-secondary font-medium"> </span></span> <span class="flex items-center gap-1.5"><span class="w-2.5 h-2.5 rounded-sm bg-accent-cyan/80"></span> <span class="text-text-muted">Input</span> <span class="text-text-secondary font-medium"> </span></span> <span class="flex items-center gap-1.5"><span class="w-2.5 h-2.5 rounded-sm bg-accent-purple/80"></span> <span class="text-text-muted">Cache Write</span> <span class="text-text-secondary font-medium"> </span></span> <span class="flex items-center gap-1.5"><span class="w-2.5 h-2.5 rounded-sm bg-accent-green/80"></span> <span class="text-text-muted">Cache Read</span> <span class="text-text-secondary font-medium"> </span></span></div></div>'),Ir=i('<div class="flex-1 flex flex-col items-center group relative min-w-0"><div class="w-full rounded-t transition-all bg-accent-cyan/60 hover:bg-accent-cyan/90 cursor-default"></div> <div class="absolute bottom-full mb-2 hidden group-hover:block z-10"><div class="glass rounded-lg px-3 py-2 text-xs whitespace-nowrap shadow-lg border border-border-default"><div class="font-medium text-text-primary"> </div> <div class="text-text-secondary"> </div> <div class="text-text-secondary"> </div></div></div></div>'),Br=i("<span> </span>"),Or=i('<div class="flex justify-between mt-1.5 text-[10px] text-text-muted px-1"><span> </span> <!> <span> </span></div>'),zr=i('<div class="flex items-end gap-px h-36"></div> <!>',1),Fr=i('<div class="h-36 flex items-center justify-center text-text-muted text-sm">No daily data</div>'),Vr=i('<div><div class="flex justify-between text-xs mb-1"><span class="text-text-secondary truncate mr-2 font-mono"> </span> <span class="text-text-muted whitespace-nowrap"> </span></div> <div class="h-1.5 rounded-full bg-bg-tertiary overflow-hidden"><div class="h-full rounded-full bg-gradient-to-r from-accent-cyan to-accent-purple transition-all"></div></div> <div class="text-[10px] text-text-muted mt-0.5"> </div></div>'),Nr=i('<div class="space-y-3"></div>'),qr=i('<div class="flex items-center justify-center h-24 text-text-muted text-sm">No model data</div>'),Hr=i('<div class="flex justify-between text-xs"><span class="text-text-secondary font-mono"> </span> <span class="text-text-muted"> </span></div>'),Kr=i('<h3 class="text-sm font-semibold text-text-primary mt-5 mb-2">Top Providers</h3> <div class="space-y-1.5"></div>',1),Yr=i('<div class="text-center py-8 text-text-muted text-sm">No sessions in this date range.</div>'),Er=i('<span class="px-1.5 py-0.5 rounded text-[10px] bg-bg-tertiary text-text-muted flex-shrink-0"> </span>'),Gr=i('<span class="px-1.5 py-0.5 rounded text-[10px] bg-accent-purple/10 text-purple-300 flex-shrink-0 truncate max-w-32"> </span>'),Jr=i("<span> </span>"),Qr=i('<span class="text-accent-pink"> </span>'),Xr=i("<span> </span> <span> </span> <!> <!>",1),Zr=i('<div class="flex items-center gap-2 text-sm text-text-muted py-4"><svg class="w-4 h-4 animate-spin" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"></path></svg> Loading session details...</div>'),ts=i('<div class="text-[10px] text-text-muted"> </div>'),es=i('<div class="text-[10px] text-text-muted"> </div>'),as=i('<div class="text-[10px] text-text-muted"> </div>'),rs=i('<div class="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4"><div class="rounded-lg bg-bg-tertiary/50 p-2.5"><div class="text-[10px] text-text-muted uppercase">Input</div> <div class="text-sm font-bold text-accent-cyan"> </div> <!></div> <div class="rounded-lg bg-bg-tertiary/50 p-2.5"><div class="text-[10px] text-text-muted uppercase">Output</div> <div class="text-sm font-bold text-accent-pink"> </div> <!></div> <div class="rounded-lg bg-bg-tertiary/50 p-2.5"><div class="text-[10px] text-text-muted uppercase">Duration</div> <div class="text-sm font-bold text-text-primary"> </div> <!></div> <div class="rounded-lg bg-bg-tertiary/50 p-2.5"><div class="text-[10px] text-text-muted uppercase">Tools</div> <div class="text-sm font-bold text-text-primary"> </div> <div class="text-[10px] text-text-muted"> </div></div></div>'),ss=i('<span class="px-2 py-0.5 rounded text-[10px] bg-accent-cyan/10 text-accent-cyan"> </span>'),os=i('<span class="px-2 py-0.5 rounded text-[10px] bg-accent-purple/10 text-accent-purple"> </span>'),ds=i('<span class="px-2 py-0.5 rounded text-[10px] bg-accent-amber/10 text-accent-amber"> </span>'),ns=i('<div class="rounded-lg bg-bg-tertiary/50 px-2.5 py-1.5 text-xs"><span class="text-text-secondary font-mono"> </span> <span class="text-text-muted ml-1.5"> </span></div>'),is=i('<div class="mb-3"><h4 class="text-xs font-medium text-text-muted mb-1.5">Model Mix</h4> <div class="flex flex-wrap gap-2"></div></div>'),vs=i('<span class="px-2 py-0.5 rounded text-[10px] bg-accent-green/10 text-accent-green"> </span>'),ls=i('<div class="mb-3"><h4 class="text-xs font-medium text-text-muted mb-1.5">Top Tools</h4> <div class="flex flex-wrap gap-1.5"></div></div>'),cs=i('<div class="flex-1 rounded-t bg-accent-cyan/40 hover:bg-accent-cyan/70 transition-all min-w-[1px]"></div>'),xs=i('<div class="mb-3"><h4 class="text-xs font-medium text-text-muted mb-1.5">Usage Over Time</h4> <div class="flex items-end gap-px h-16"></div> <div class="text-[10px] text-text-muted mt-1"> </div></div>'),us=i('<span class="text-text-muted flex-shrink-0"> </span>'),ps=i('<div><span> </span> <span class="text-text-secondary truncate flex-1"> </span> <!></div>'),ms=i('<div class="text-[10px] text-text-muted text-center py-1"> </div>'),gs=i('<div><h4 class="text-xs font-medium text-text-muted mb-1.5"> </h4> <div class="space-y-1 max-h-48 overflow-y-auto rounded-lg border border-border-default bg-bg-primary/50 p-2"><!> <!></div></div>'),_s=i('<!> <div class="flex flex-wrap gap-1.5 mb-3"><!> <!> <!> <span class="px-2 py-0.5 rounded text-[10px] bg-bg-tertiary text-text-muted font-mono truncate max-w-80"> </span></div> <!> <!> <!> <!>',1),bs=i('<div class="mt-3 pt-3 border-t border-border-default"><!></div>'),fs=i('<button><div class="flex items-start gap-3"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-0.5"><span class="text-sm font-medium text-text-primary truncate"> </span> <!> <!></div> <div class="h-1 rounded-full bg-bg-tertiary overflow-hidden mt-1.5 mb-1"><div></div></div> <div class="flex items-center gap-3 text-[11px] text-text-muted"><!> <span class="ml-auto"> </span></div></div> <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div> <!></button>'),hs=i('<div class="text-center text-xs text-text-muted py-3"> </div>'),ys=i('<div class="space-y-1"><!> <!></div>'),ks=i('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"><div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4 glow-cyan"><div class="text-xs font-medium text-text-muted uppercase tracking-wider mb-2">Total Tokens</div> <div class="text-2xl font-bold text-accent-cyan"> </div> <div class="text-xs text-text-muted mt-1"> </div></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4 glow-purple"><div class="text-xs font-medium text-text-muted uppercase tracking-wider mb-2">Total Cost</div> <div class="text-2xl font-bold text-accent-purple"> </div> <div class="text-xs text-text-muted mt-1"> </div></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4"><div class="text-xs font-medium text-text-muted uppercase tracking-wider mb-2">Sessions</div> <div class="text-2xl font-bold text-accent-green"> </div> <div class="text-xs text-text-muted mt-1"><!></div></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4"><div class="text-xs font-medium text-text-muted uppercase tracking-wider mb-2">Cache Hit Rate</div> <div> </div> <div class="text-xs text-text-muted mt-1"> </div></div></div> <!> <!> <div class="grid grid-cols-1 lg:grid-cols-3 gap-4"><div class="lg:col-span-2 rounded-xl border border-border-default bg-bg-secondary/50 p-4"><h3 class="text-sm font-semibold text-text-primary mb-3"> </h3> <!></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4"><h3 class="text-sm font-semibold text-text-primary mb-3">Top Models</h3> <!> <!></div></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4"><div class="flex items-center justify-between mb-4"><h3 class="text-sm font-semibold text-text-primary">Sessions</h3> <div class="flex items-center gap-2"><select class="px-2 py-1 text-xs rounded-lg border border-border-default bg-bg-tertiary text-text-secondary"><option>Sort: Tokens</option><option>Sort: Cost</option><option>Sort: Recent</option></select> <span class="text-xs text-text-muted"> </span></div></div> <!></div>',1),ws=i('<div class="text-center py-16"><div class="w-16 h-16 rounded-2xl bg-bg-tertiary border border-border-default flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg></div> <p class="text-text-muted text-sm">No usage data found for this date range.</p> <p class="text-text-muted text-xs mt-1">Try expanding the date range or check that sessions have been active.</p></div>'),$s=i(`<div class="h-full overflow-y-auto"><div class="max-w-7xl mx-auto p-4 md:p-6 space-y-6"><div class="flex items-center justify-between flex-wrap gap-3"><div><h1 class="text-2xl font-bold text-text-primary">Usage Analytics</h1> <p class="text-sm text-text-muted mt-1">Track tokens, costs, and session activity across your gateway.</p></div> <div class="flex items-center gap-2"><div class="flex rounded-lg border border-border-default overflow-hidden"><button>Tokens</button> <button>Cost</button></div> <button class="px-3 py-2 rounded-lg text-sm border border-border-default hover:border-accent-cyan
                 text-text-secondary hover:text-accent-cyan transition-all disabled:opacity-50"><!> Refresh</button></div></div> <div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4"><div class="flex items-center flex-wrap gap-3"><div class="flex items-center gap-2"><span class="text-xs text-text-muted uppercase tracking-wider font-medium">Range</span> <input type="date" class="px-3 py-1.5 rounded-lg border border-border-default bg-bg-tertiary text-sm
                   text-text-primary focus:outline-none focus:border-accent-cyan transition-all"/> <span class="text-text-muted text-sm">to</span> <input type="date" class="px-3 py-1.5 rounded-lg border border-border-default bg-bg-tertiary text-sm
                   text-text-primary focus:outline-none focus:border-accent-cyan transition-all"/></div> <div class="flex items-center gap-1.5"><button class="px-2.5 py-1 rounded-md text-xs border border-border-default text-text-muted
                   hover:border-accent-cyan hover:text-accent-cyan transition-all">Today</button> <button class="px-2.5 py-1 rounded-md text-xs border border-border-default text-text-muted
                   hover:border-accent-cyan hover:text-accent-cyan transition-all">7d</button> <button class="px-2.5 py-1 rounded-md text-xs border border-border-default text-text-muted
                   hover:border-accent-cyan hover:text-accent-cyan transition-all">30d</button> <button class="px-2.5 py-1 rounded-md text-xs border border-border-default text-text-muted
                   hover:border-accent-cyan hover:text-accent-cyan transition-all">90d</button></div> <!></div></div> <!> <!></div></div>`);function Ls(_a,ba){gr(ba,!0);const ve=kr(),fa=Cr();let Tt=rt(!1),Xt=rt(null),Ot=rt(pa(te(ha(6)))),zt=rt(pa(te(new Date))),Zt=rt(null),le=rt(null),Ft=rt(null),ce=rt(!1),Lt=rt(null),it=rt(null),P=rt("tokens"),xe=rt("tokens");function ha(s){const d=new Date;return d.setDate(d.getDate()-s),d}function te(s){return`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`}function w(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:String(Math.round(s))}function M(s,d=2){return`$${s.toFixed(d)}`}function ya(s){if(!s)return"n/a";const d=new Date(s),u=Date.now()-d.getTime();return u<6e4?"just now":u<36e5?`${Math.floor(u/6e4)}m ago`:u<864e5?`${Math.floor(u/36e5)}h ago`:d.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function ka(s){if(!s||s<=0)return"—";const d=Math.floor(s/1e3);if(d<60)return`${d}s`;const u=Math.floor(d/60);return u<60?`${u}m ${d%60}s`:`${Math.floor(u/60)}h ${u%60}m`}function vt(s,d){return d>0?s/d*100:0}function wa(s){const d=s.label||s.key;return d.startsWith("agent:")&&d.includes("?token=")?d.slice(0,d.indexOf("?token=")):d.length>60?d.slice(0,60)+"…":d}async function ue(){if(!(!Qt.connected||t(Tt))){h(Tt,!0),h(Xt,null),h(Ft,null),h(Lt,null),h(it,null);try{const[s,d]=await Promise.all([Qt.call("sessions.usage",{startDate:t(Ot),endDate:t(zt),limit:1e3,includeContextWeight:!0}),Qt.call("usage.cost",{startDate:t(Ot),endDate:t(zt)})]);h(Zt,s,!0),h(le,d,!0)}catch(s){h(Xt,String(s),!0),fa.error("Usage Load Failed",String(s))}finally{h(Tt,!1)}}}async function $a(s){if(t(Ft)===s){h(Ft,null),h(Lt,null),h(it,null);return}h(Ft,s,!0),h(ce,!0),h(Lt,null),h(it,null);try{const[d,u]=await Promise.all([Qt.call("sessions.usage.timeseries",{key:s}).catch(()=>null),Qt.call("sessions.usage.logs",{key:s,limit:200}).catch(()=>null)]);d&&h(Lt,d,!0),u?.logs&&h(it,u.logs,!0)}catch{}finally{h(ce,!1)}}function ee(s){const d=new Date,u=new Date;u.setDate(u.getDate()-(s-1)),h(Ot,te(u),!0),h(zt,te(d),!0),ue()}_r(()=>{ve.state.status==="connected"&&br(()=>ue())});let c=k(()=>t(Zt)?.totals??null),ft=k(()=>t(Zt)?.sessions??[]),H=k(()=>t(Zt)?.aggregates??null),ot=k(()=>t(le)?.daily??[]),Pt=k(()=>{const s=[...t(ft)];switch(t(xe)){case"cost":return s.sort((d,u)=>(u.usage?.totalCost??0)-(d.usage?.totalCost??0));case"recent":return s.sort((d,u)=>(u.updatedAt??0)-(d.updatedAt??0));default:return s.sort((d,u)=>(u.usage?.totalTokens??0)-(d.usage?.totalTokens??0))}}),pe=k(()=>(t(H)?.byModel??[]).slice(0,5).map(s=>({name:s.model??"unknown",provider:s.provider??"",cost:s.totals.totalCost,tokens:s.totals.totalTokens,count:s.count}))),ze=k(()=>(t(H)?.byProvider??[]).slice(0,5).map(s=>({name:s.provider??"unknown",cost:s.totals.totalCost,tokens:s.totals.totalTokens,count:s.count}))),K=k(()=>{if(!t(c))return null;const s=t(c).totalCost||1;return{input:{tokens:t(c).input,cost:t(c).inputCost,pct:vt(t(c).inputCost,s)},output:{tokens:t(c).output,cost:t(c).outputCost,pct:vt(t(c).outputCost,s)},cacheRead:{tokens:t(c).cacheRead,cost:t(c).cacheReadCost,pct:vt(t(c).cacheReadCost,s)},cacheWrite:{tokens:t(c).cacheWrite,cost:t(c).cacheWriteCost,pct:vt(t(c).cacheWriteCost,s)}}}),ae=k(()=>{if(!t(c))return 0;const s=t(c).input+t(c).cacheRead;return s>0?t(c).cacheRead/s:0}),Ca=k(()=>{if(!t(ot).length)return 1;const s=t(P)==="tokens",d=t(ot).map(u=>s?u.totalTokens:u.totalCost);return Math.max(...d,s?1:.001)}),ht=k(()=>{if(!t(Lt)?.points?.length)return[];let s=0,d=0;return t(Lt).points.map(u=>(s+=u.totalTokens,d+=u.cost,{...u,cumulativeTokens:s,cumulativeCost:d}))});var me=$s();wr("1y1fchs",s=>{hr(()=>{yr.title="Usage — Cortex"})});var Fe=a(me),ge=a(Fe),Ve=r(a(ge),2),_e=a(Ve),be=a(_e),Ne=r(be,2);e(_e);var re=r(_e,2),Ta=a(re);{var Da=s=>{var d=Tr();n(s,d)};m(Ta,s=>{t(Tt)&&s(Da)})}Wt(),e(re),e(Ve),e(ge);var fe=r(ge,2),qe=a(fe),he=a(qe),ye=r(a(he),2);ma(ye);var He=r(ye,4);ma(He),e(he);var ke=r(he,2),Ke=a(ke),Ye=r(Ke,2),Ee=r(Ye,2),Ma=r(Ee,2);e(ke);var Sa=r(ke,2);{var Ra=s=>{var d=Mr(),u=a(d),pt=r(u);{var Dt=Vt=>{var se=Dr();n(Vt,se)};m(pt,Vt=>{t(ft).length>=1e3&&Vt(Dt)})}e(d),p(()=>o(u,`${t(ft).length??""} session${t(ft).length!==1?"s":""} in range `)),n(s,d)};m(Sa,s=>{t(ft).length>0&&s(Ra)})}e(qe),e(fe);var Ge=r(fe,2);{var Ua=s=>{var d=Sr(),u=a(d),pt=a(u,!0);e(u),e(d),p(()=>o(pt,t(Xt))),n(s,d)};m(Ge,s=>{t(Xt)&&s(Ua)})}var Wa=r(Ge,2);{var ja=s=>{var d=Rr();n(s,d)},La=s=>{var d=Wr();bt(d,20,()=>Array(4),Ct,(u,pt)=>{var Dt=Ur();n(u,Dt)}),e(d),n(s,d)},Pa=s=>{var d=ks(),u=jt(d),pt=a(u),Dt=r(a(pt),2),Vt=a(Dt,!0);e(Dt);var se=r(Dt,2),Ia=a(se);e(se),e(pt);var we=r(pt,2),$e=r(a(we),2),Ba=a($e,!0);e($e);var Je=r($e,2),Oa=a(Je);e(Je),e(we);var Ce=r(we,2),Te=r(a(Ce),2),za=a(Te,!0);e(Te);var Qe=r(Te,2),Fa=a(Qe);{var Va=x=>{var g=ua();p(()=>o(g,`${t(H).messages.total??""} messages · ${t(H).messages.errors??""} errors`)),n(x,g)},Na=x=>{var g=ua("In selected range");n(x,g)};m(Fa,x=>{t(H)?x(Va):x(Na,!1)})}e(Qe),e(Ce);var Xe=r(Ce,2),oe=r(a(Xe),2),qa=a(oe,!0);e(oe);var Ze=r(oe,2),Ha=a(Ze);e(Ze),e(Xe),e(u);var ta=r(u,2);{var Ka=x=>{var g=jr(),T=a(g),W=a(T),A=a(W,!0);e(W),Wt(2),e(T);var f=r(T,2),v=a(f),y=a(v,!0);e(v),Wt(2),e(f);var l=r(f,2),j=a(l),I=a(j,!0);e(j),Wt(2),e(l);var L=r(l,2),D=a(L),S=a(D,!0);e(D),Wt(2),e(L);var C=r(L,2),O=a(C),z=a(O,!0);e(O),Wt(2),e(C);var lt=r(C,2),J=a(lt),yt=a(J,!0);e(J),Wt(2),e(lt),e(g),p(()=>{o(A,t(H).messages.total),o(y,t(H).messages.user),o(I,t(H).messages.assistant),o(S,t(H).tools.totalCalls),o(z,t(H).tools.uniqueTools),_t(J,1,`text-lg font-bold ${t(H).messages.errors>0?"text-accent-pink":"text-text-primary"}`),o(yt,t(H).messages.errors)}),n(x,g)};m(ta,x=>{t(H)&&x(Ka)})}var ea=r(ta,2);{var Ya=x=>{var g=Ar(),T=a(g),W=a(T);e(T);var A=r(T,2),f=a(A);{var v=Q=>{var Y=Lr(),X=jt(Y),Z=r(X,2),ct=r(Z,2),Mt=r(ct,2);p((At,qt,Ht,Kt,je,R,U,dt)=>{st(X,`width: ${At??""}%`),ut(X,"title",`Output: ${qt??""}`),st(Z,`width: ${Ht??""}%`),ut(Z,"title",`Input: ${Kt??""}`),st(ct,`width: ${je??""}%`),ut(ct,"title",`Cache Write: ${R??""}`),st(Mt,`width: ${U??""}%`),ut(Mt,"title",`Cache Read: ${dt??""}`)},[()=>vt(t(c).output,t(c).totalTokens),()=>w(t(c).output),()=>vt(t(c).input,t(c).totalTokens),()=>w(t(c).input),()=>vt(t(c).cacheWrite,t(c).totalTokens),()=>w(t(c).cacheWrite),()=>vt(t(c).cacheRead,t(c).totalTokens),()=>w(t(c).cacheRead)]),n(Q,Y)},y=Q=>{var Y=Pr(),X=jt(Y),Z=r(X,2),ct=r(Z,2),Mt=r(ct,2);p((At,qt,Ht,Kt)=>{st(X,`width: ${t(K).output.pct??""}%`),ut(X,"title",`Output: ${At??""}`),st(Z,`width: ${t(K).input.pct??""}%`),ut(Z,"title",`Input: ${qt??""}`),st(ct,`width: ${t(K).cacheWrite.pct??""}%`),ut(ct,"title",`Cache Write: ${Ht??""}`),st(Mt,`width: ${t(K).cacheRead.pct??""}%`),ut(Mt,"title",`Cache Read: ${Kt??""}`)},[()=>M(t(K).output.cost),()=>M(t(K).input.cost),()=>M(t(K).cacheWrite.cost),()=>M(t(K).cacheRead.cost)]),n(Q,Y)};m(f,Q=>{t(P)==="tokens"?Q(v):Q(y,!1)})}e(A);var l=r(A,2),j=a(l),I=r(a(j),4),L=a(I,!0);e(I),e(j);var D=r(j,2),S=r(a(D),4),C=a(S,!0);e(S),e(D);var O=r(D,2),z=r(a(O),4),lt=a(z,!0);e(z),e(O);var J=r(O,2),yt=r(a(J),4),Nt=a(yt,!0);e(yt),e(J),e(l),e(g),p((Q,Y,X,Z)=>{o(W,`${t(P)==="tokens"?"Token":"Cost"} Breakdown`),o(L,Q),o(C,Y),o(lt,X),o(Nt,Z)},[()=>t(P)==="tokens"?w(t(c).output):M(t(K).output.cost),()=>t(P)==="tokens"?w(t(c).input):M(t(K).input.cost),()=>t(P)==="tokens"?w(t(c).cacheWrite):M(t(K).cacheWrite.cost),()=>t(P)==="tokens"?w(t(c).cacheRead):M(t(K).cacheRead.cost)]),n(x,g)};m(ea,x=>{t(K)&&t(c).totalCost>0&&x(Ya)})}var De=r(ea,2),Me=a(De),Se=a(Me),Ea=a(Se);e(Se);var Ga=r(Se,2);{var Ja=x=>{var g=zr(),T=jt(g);bt(T,21,()=>t(ot),Ct,(f,v)=>{const y=k(()=>t(P)==="tokens"?t(v).totalTokens:t(v).totalCost),l=k(()=>Math.max(t(y)/t(Ca)*100,1)),j=k(()=>new Date(t(v).date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"}));var I=Ir(),L=a(I),D=r(L,2),S=a(D),C=a(S),O=a(C,!0);e(C);var z=r(C,2),lt=a(z);e(z);var J=r(z,2),yt=a(J,!0);e(J),e(S),e(D),e(I),p((Nt,Q,Y)=>{st(L,`height: ${t(l)??""}%`),ut(L,"title",`${t(j)??""}: ${Nt??""}`),o(O,t(j)),o(lt,`${Q??""} tokens`),o(yt,Y)},[()=>t(P)==="tokens"?w(t(y)):M(t(y)),()=>w(t(v).totalTokens),()=>M(t(v).totalCost)]),n(f,I)}),e(T);var W=r(T,2);{var A=f=>{var v=Or(),y=a(v),l=a(y,!0);e(y);var j=r(y,2);{var I=S=>{var C=Br(),O=a(C,!0);e(C),p(z=>o(O,z),[()=>new Date(t(ot)[Math.floor(t(ot).length/2)].date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})]),n(S,C)};m(j,S=>{t(ot).length>2&&S(I)})}var L=r(j,2),D=a(L,!0);e(L),e(v),p((S,C)=>{o(l,S),o(D,C)},[()=>new Date(t(ot)[0].date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"}),()=>new Date(t(ot)[t(ot).length-1].date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})]),n(f,v)};m(W,f=>{t(ot).length>=2&&f(A)})}n(x,g)},Qa=x=>{var g=Fr();n(x,g)};m(Ga,x=>{t(ot).length>0?x(Ja):x(Qa,!1)})}e(Me);var aa=r(Me,2),ra=r(a(aa),2);{var Xa=x=>{var g=Nr();bt(g,21,()=>t(pe),Ct,(T,W)=>{const A=k(()=>t(pe)[0]?.cost||1),f=k(()=>vt(t(W).cost,t(A)));var v=Vr(),y=a(v),l=a(y),j=a(l,!0);e(l);var I=r(l,2),L=a(I,!0);e(I),e(y);var D=r(y,2),S=a(D);e(D);var C=r(D,2),O=a(C);e(C),e(v),p((z,lt)=>{o(j,t(W).name),o(L,z),st(S,`width: ${t(f)??""}%`),o(O,`${lt??""} tokens · ${t(W).count??""} msgs`)},[()=>M(t(W).cost),()=>w(t(W).tokens)]),n(T,v)}),e(g),n(x,g)},Za=x=>{var g=qr();n(x,g)};m(ra,x=>{t(pe).length>0?x(Xa):x(Za,!1)})}var tr=r(ra,2);{var er=x=>{var g=Kr(),T=r(jt(g),2);bt(T,21,()=>t(ze),Ct,(W,A)=>{var f=Hr(),v=a(f),y=a(v,!0);e(v);var l=r(v,2),j=a(l);e(l),e(f),p((I,L)=>{o(y,t(A).name),o(j,`${I??""} · ${L??""}`)},[()=>M(t(A).cost),()=>w(t(A).tokens)]),n(W,f)}),e(T),n(x,g)};m(tr,x=>{t(ze).length>0&&x(er)})}e(aa),e(De);var sa=r(De,2),Re=a(sa),oa=r(a(Re),2),de=a(oa),Ue=a(de);Ue.value=Ue.__value="tokens";var We=r(Ue);We.value=We.__value="cost";var da=r(We);da.value=da.__value="recent",e(de);var na=r(de,2),ar=a(na);e(na),e(oa),e(Re);var rr=r(Re,2);{var sr=x=>{var g=Yr();n(x,g)},or=x=>{var g=ys(),T=a(g);bt(T,17,()=>t(Pt).slice(0,50),f=>f.key,(f,v)=>{const y=k(()=>t(Ft)===t(v).key),l=k(()=>t(v).usage),j=k(()=>t(P)==="tokens"?t(l)?.totalTokens??0:t(l)?.totalCost??0),I=k(()=>t(P)==="tokens"?t(Pt)[0]?.usage?.totalTokens??1:t(Pt)[0]?.usage?.totalCost??1),L=k(()=>vt(t(j),t(I)));var D=fs(),S=a(D),C=a(S),O=a(C),z=a(O),lt=a(z,!0);e(z);var J=r(z,2);{var yt=R=>{var U=Er(),dt=a(U,!0);e(U),p(()=>o(dt,t(v).channel)),n(R,U)};m(J,R=>{t(v).channel&&R(yt)})}var Nt=r(J,2);{var Q=R=>{var U=Gr(),dt=a(U,!0);e(U),p(()=>o(dt,t(v).model)),n(R,U)};m(Nt,R=>{t(v).model&&R(Q)})}e(O);var Y=r(O,2),X=a(Y);e(Y);var Z=r(Y,2),ct=a(Z);{var Mt=R=>{var U=Xr(),dt=jt(U),Le=a(dt);e(dt);var Yt=r(dt,2),xt=a(Yt,!0);e(Yt);var St=r(Yt,2);{var ne=tt=>{var nt=Jr(),It=a(nt);e(nt),p(()=>o(It,`${t(l).messageCounts.total??""} msgs`)),n(tt,nt)};m(St,tt=>{t(l).messageCounts&&tt(ne)})}var Pe=r(St,2);{var Et=tt=>{var nt=Qr(),It=a(nt);e(nt),p(()=>o(It,`${t(l).messageCounts.errors??""} errors`)),n(tt,nt)};m(Pe,tt=>{t(l).messageCounts?.errors&&tt(Et)})}p((tt,nt)=>{o(Le,`${tt??""} tokens`),o(xt,nt)},[()=>w(t(l).totalTokens),()=>M(t(l).totalCost)]),n(R,U)};m(ct,R=>{t(l)&&R(Mt)})}var At=r(ct,2),qt=a(At,!0);e(At),e(Z),e(C);var Ht=r(C,2);e(S);var Kt=r(S,2);{var je=R=>{var U=bs(),dt=a(U);{var Le=xt=>{var St=Zr();n(xt,St)},Yt=xt=>{var St=_s(),ne=jt(St);{var Pe=_=>{var b=rs(),$=a(b),et=r(a($),2),E=a(et,!0);e(et);var F=r(et,2);{var V=N=>{var G=ts(),Ut=a(G,!0);e(G),p(Oe=>o(Ut,Oe),[()=>M(t(l).inputCost,4)]),n(N,G)};m(F,N=>{t(l).inputCost&&N(V)})}e($);var mt=r($,2),q=r(a(mt),2),B=a(q,!0);e(q);var at=r(q,2);{var kt=N=>{var G=es(),Ut=a(G,!0);e(G),p(Oe=>o(Ut,Oe),[()=>M(t(l).outputCost,4)]),n(N,G)};m(at,N=>{t(l).outputCost&&N(kt)})}e(mt);var wt=r(mt,2),$t=r(a(wt),2),Ae=a($t,!0);e($t);var Gt=r($t,2);{var Ie=N=>{var G=as(),Ut=a(G);e(G),p(()=>o(Ut,`${t(l).messageCounts.total??""} messages`)),n(N,G)};m(Gt,N=>{t(l).messageCounts&&N(Ie)})}e(wt);var ie=r(wt,2),Jt=r(a(ie),2),Rt=a(Jt,!0);e(Jt);var Bt=r(Jt,2),Be=a(Bt);e(Bt),e(ie),e(b),p((N,G,Ut)=>{o(E,N),o(B,G),o(Ae,Ut),o(Rt,t(l).toolUsage?.totalCalls??0),o(Be,`${t(l).toolUsage?.uniqueTools??0??""} unique`)},[()=>w(t(l).input),()=>w(t(l).output),()=>ka(t(l).durationMs)]),n(_,b)};m(ne,_=>{t(l)&&_(Pe)})}var Et=r(ne,2),tt=a(Et);{var nt=_=>{var b=ss(),$=a(b);e(b),p(()=>o($,`agent:${t(v).agentId??""}`)),n(_,b)};m(tt,_=>{t(v).agentId&&_(nt)})}var It=r(tt,2);{var dr=_=>{var b=os(),$=a(b);e(b),p(()=>o($,`provider:${t(v).modelProvider??t(v).providerOverride??""}`)),n(_,b)};m(It,_=>{(t(v).modelProvider||t(v).providerOverride)&&_(dr)})}var ia=r(It,2);{var nr=_=>{var b=ds(),$=a(b);e(b),p(()=>o($,`model:${t(v).model??""}`)),n(_,b)};m(ia,_=>{t(v).model&&_(nr)})}var va=r(ia,2),ir=a(va,!0);e(va),e(Et);var la=r(Et,2);{var vr=_=>{var b=is(),$=r(a(b),2);bt($,21,()=>t(l).modelUsage.slice(0,6),Ct,(et,E)=>{var F=ns(),V=a(F),mt=a(V,!0);e(V);var q=r(V,2),B=a(q);e(q),e(F),p((at,kt)=>{o(mt,t(E).model??"unknown"),o(B,`${at??""} · ${kt??""}`)},[()=>M(t(E).totals.totalCost),()=>w(t(E).totals.totalTokens)]),n(et,F)}),e($),e(b),n(_,b)};m(la,_=>{t(l)?.modelUsage&&t(l).modelUsage.length>0&&_(vr)})}var ca=r(la,2);{var lr=_=>{var b=ls(),$=r(a(b),2);bt($,21,()=>t(l).toolUsage.tools.slice(0,8),Ct,(et,E)=>{var F=vs(),V=a(F);e(F),p(()=>o(V,`${t(E).name??""} ×${t(E).count??""}`)),n(et,F)}),e($),e(b),n(_,b)};m(ca,_=>{t(l)?.toolUsage?.tools&&t(l).toolUsage.tools.length>0&&_(lr)})}var xa=r(ca,2);{var cr=_=>{var b=xs(),$=r(a(b),2);bt($,21,()=>t(ht),Ct,(F,V)=>{const mt=k(()=>Math.max(...t(ht).map(at=>at.totalTokens),1)),q=k(()=>Math.max(t(V).totalTokens/t(mt)*100,2));var B=cs();p((at,kt)=>{st(B,`height: ${t(q)??""}%`),ut(B,"title",`${at??""}: ${kt??""} tokens`)},[()=>new Date(t(V).timestamp).toLocaleString(),()=>w(t(V).totalTokens)]),n(F,B)}),e($);var et=r($,2),E=a(et);e(et),e(b),p((F,V)=>o(E,`${t(ht).length??""} turns ·
                            ${F??""} total ·
                            ${V??""}`),[()=>w(t(ht)[t(ht).length-1]?.cumulativeTokens??0),()=>M(t(ht)[t(ht).length-1]?.cumulativeCost??0)]),n(_,b)};m(xa,_=>{t(ht).length>=2&&_(cr)})}var xr=r(xa,2);{var ur=_=>{var b=gs(),$=a(b),et=a($);e($);var E=r($,2),F=a(E);bt(F,17,()=>t(it).slice(0,30),Ct,(q,B)=>{const at=k(()=>t(B).role==="user"),kt=k(()=>t(B).role==="assistant");var wt=ps();_t(wt,1,"flex gap-2 text-xs py-1 ");var $t=a(wt),Ae=a($t,!0);e($t);var Gt=r($t,2),Ie=a(Gt,!0);e(Gt);var ie=r(Gt,2);{var Jt=Rt=>{var Bt=us(),Be=a(Bt,!0);e(Bt),p(N=>o(Be,N),[()=>w(t(B).tokens)]),n(Rt,Bt)};m(ie,Rt=>{t(B).tokens&&Rt(Jt)})}e(wt),p(Rt=>{_t($t,1,`font-medium flex-shrink-0 w-14 text-right
                                  ${t(at)?"text-accent-cyan":t(kt)?"text-accent-purple":"text-accent-amber"}`),o(Ae,t(at)?"You":t(kt)?"AI":"Tool"),o(Ie,Rt)},[()=>t(B).content?.slice(0,200)??""]),n(q,wt)});var V=r(F,2);{var mt=q=>{var B=ms(),at=a(B);e(B),p(()=>o(at,`+${t(it).length-30} more messages`)),n(q,B)};m(V,q=>{t(it).length>30&&q(mt)})}e(E),e(b),p(()=>o(et,`Conversation (${t(it).length??""} messages)`)),n(_,b)};m(xr,_=>{t(it)&&t(it).length>0&&_(ur)})}p(()=>o(ir,t(v).key)),n(xt,St)};m(dt,xt=>{t(ce)?xt(Le):xt(Yt,!1)})}e(U),gt("click",U,xt=>xt.stopPropagation()),n(R,U)};m(Kt,R=>{t(y)&&R(je)})}e(D),p((R,U)=>{_t(D,1,`w-full text-left rounded-lg p-3 transition-all border
                       ${t(y)?"border-accent-cyan/50 bg-accent-cyan/5 glow-cyan":"border-transparent hover:bg-bg-hover"}`),o(lt,R),_t(X,1,`h-full rounded-full transition-all ${t(P)==="tokens"?"bg-accent-cyan/60":"bg-accent-purple/60"}`),st(X,`width: ${t(L)??""}%`),o(qt,U),_t(Ht,0,`w-4 h-4 text-text-muted flex-shrink-0 mt-1 transition-transform ${t(y)?"rotate-180":""}`)},[()=>wa(t(v)),()=>ya(t(v).updatedAt)]),gt("click",D,()=>$a(t(v).key)),n(f,D)});var W=r(T,2);{var A=f=>{var v=hs(),y=a(v);e(v),p(()=>o(y,`Showing 50 of ${t(Pt).length??""} sessions. Narrow the date range for more detail.`)),n(f,v)};m(W,f=>{t(Pt).length>50&&f(A)})}e(g),n(x,g)};m(rr,x=>{t(Pt).length===0?x(sr):x(or,!1)})}e(sa),p((x,g,T,W,A,f,v,y)=>{o(Vt,x),o(Ia,`${g??""} in · ${T??""} out`),o(Ba,W),o(Oa,`${t(le)?.currency??"USD"??""} · ${A??""} avg/session`),o(za,t(ft).length),_t(oe,1,`text-2xl font-bold ${t(ae)>.6?"text-accent-green":t(ae)>.3?"text-accent-amber":"text-accent-pink"}`),o(qa,f),o(Ha,`${v??""} cached · ${y??""} uncached`),o(Ea,`Daily ${t(P)==="tokens"?"Token":"Cost"} Usage`),o(ar,`${t(ft).length??""} total`)},[()=>w(t(c).totalTokens),()=>w(t(c).input),()=>w(t(c).output),()=>M(t(c).totalCost),()=>M(t(c).totalCost/Math.max(t(ft).length,1),3),()=>t(ae)>0?`${(t(ae)*100).toFixed(1)}%`:"—",()=>w(t(c).cacheRead),()=>w(t(c).input)]),$r(de,()=>t(xe),x=>h(xe,x)),n(s,d)},Aa=s=>{var d=ws();n(s,d)};m(Wa,s=>{ve.state.status!=="connected"?s(ja):t(Tt)&&!t(c)?s(La,1):t(c)?s(Pa,2):t(Tt)||s(Aa,3)})}e(Fe),e(me),p(()=>{_t(be,1,`px-3 py-1.5 text-xs font-medium transition-all
                   ${t(P)==="tokens"?"bg-accent-cyan/20 text-accent-cyan":"text-text-muted hover:text-text-secondary"}`),_t(Ne,1,`px-3 py-1.5 text-xs font-medium transition-all
                   ${t(P)==="cost"?"bg-accent-purple/20 text-accent-purple":"text-text-muted hover:text-text-secondary"}`),re.disabled=t(Tt)||ve.state.status!=="connected"}),gt("click",be,()=>h(P,"tokens")),gt("click",Ne,()=>h(P,"cost")),gt("click",re,()=>ue()),ga(ye,()=>t(Ot),s=>h(Ot,s)),ga(He,()=>t(zt),s=>h(zt,s)),gt("click",Ke,()=>ee(1)),gt("click",Ye,()=>ee(7)),gt("click",Ee,()=>ee(30)),gt("click",Ma,()=>ee(90)),n(_a,me),fr()}pr(["click"]);export{Ls as component};
