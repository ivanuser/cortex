import{d as Je,a as C,b as u,f as x,s as c}from"../chunks/B2A7gHtL.js";import{p as Ke,s as g,a as Oe,u as ge,g as t,d as v,b as Ve,t as b,c as Xe,e as Ye,h as d,f as s,$ as Ze,r as a,n as A,i as me,j as et}from"../chunks/qR_TM3YX.js";import{i as w}from"../chunks/DpBBTLWw.js";import{g as tt,a as _e,r as ye,e as he,i as rt,s as at,b as dt}from"../chunks/BhtVncI_.js";import{h as st}from"../chunks/CXQ1lKJR.js";import{b as we}from"../chunks/nnazh41B.js";import{b as ot}from"../chunks/DVP7Iy08.js";import{g as lt}from"../chunks/Be_uRYmX.js";var nt=x(`<div class="rounded-xl border border-accent-green/30 bg-bg-secondary/50 p-4"><h3 class="text-sm font-medium text-accent-green mb-3">Install Skill from ClawHub</h3> <div class="flex gap-2"><input type="text" placeholder="Skill name or URL..." class="flex-1 px-3 py-2 text-sm rounded-lg border border-border-default bg-bg-tertiary
                   text-text-primary placeholder-text-muted focus:outline-none focus:border-accent-green transition-all"/> <button class="px-4 py-2 rounded-lg text-sm bg-accent-green/20 text-accent-green border border-accent-green/30
                   hover:bg-accent-green/30 transition-all disabled:opacity-50"> </button></div></div>`),it=x('<div class="rounded-lg border border-red-500/30 bg-red-500/5 px-4 py-3 text-red-400 text-sm"><strong>Failed to load skills:</strong> <button class="ml-2 underline hover:text-red-300">Retry</button></div>'),ct=x('<div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4 animate-pulse"><div class="h-4 w-48 bg-bg-tertiary rounded mb-2"></div> <div class="h-3 w-96 bg-bg-tertiary rounded"></div></div>'),vt=x('<div class="space-y-2"></div>'),ut=x('<div class="text-center py-12 text-text-muted"> </div>'),xt=x('<div class="text-center py-12 text-text-muted"> </div>'),bt=x('<span class="text-xs text-text-muted font-mono"> </span>'),pt=x('<p class="text-xs text-text-secondary leading-relaxed mb-1.5"> </p>'),ft=x('<div class="text-[10px] text-text-muted/40 font-mono truncate"> </div>'),gt=x('<div class="mt-2 text-xs text-red-400 bg-red-500/10 rounded px-2 py-1"> </div>'),mt=x('<div class="rounded-xl border border-border-default bg-bg-secondary/50 p-4 transition-all hover:border-border-default/80"><div class="flex items-start gap-3"><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1 flex-wrap"><span class="font-medium text-text-primary"> </span> <span> </span> <!></div> <!> <!> <!></div></div></div>'),_t=x('<div class="space-y-2"></div> <div class="text-xs text-text-muted/40 text-center pt-2"> </div>',1),yt=x(`<div class="h-full overflow-y-auto"><div class="max-w-6xl mx-auto p-4 md:p-6 space-y-6"><div class="flex items-center justify-between flex-wrap gap-3"><div><h1 class="text-2xl font-bold text-text-primary">Skills</h1> <p class="text-sm text-text-muted mt-1">Agent skill library — bundled, workspace, and installed skills.</p></div> <div class="flex gap-2"><button class="px-3 py-2 rounded-lg text-sm border border-accent-green/30 text-accent-green
                 hover:bg-accent-green/10 transition-all">+ Install</button> <button class="px-3 py-2 rounded-lg text-sm border border-border-default hover:border-accent-cyan
                 text-text-secondary hover:text-accent-cyan transition-all disabled:opacity-50"> </button></div></div> <!> <div class="grid grid-cols-4 gap-3"><div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-xl font-bold text-text-primary"> </div> <div class="text-xs text-text-muted">Total</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-xl font-bold text-accent-purple"> </div> <div class="text-xs text-text-muted">Bundled</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-xl font-bold text-accent-cyan"> </div> <div class="text-xs text-text-muted">Workspace</div></div> <div class="rounded-lg border border-border-default bg-bg-secondary/50 p-3 text-center"><div class="text-xl font-bold text-accent-green"> </div> <div class="text-xs text-text-muted">Managed</div></div></div> <div class="flex gap-3"><div class="relative flex-1"><input type="text" placeholder="Search skills..." class="w-full pl-9 pr-3 py-2 text-sm rounded-lg border border-border-default bg-bg-tertiary
                 text-text-primary placeholder-text-muted focus:outline-none focus:border-accent-cyan transition-all"/> <svg class="absolute left-3 top-2.5 w-4 h-4 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div> <select class="px-3 py-2 text-sm rounded-lg border border-border-default bg-bg-tertiary text-text-secondary"><option>All Sources</option><option>Bundled</option><option>Workspace</option><option>Managed</option></select></div> <!> <!></div></div>`);function $t(ke,Se){Ke(Se,!0);const Z=tt(),N=lt();let f=g(Oe([])),_=g(!1),L=g(null),I=g(""),P=g(""),k=g("all"),$=g(!1),y=g(""),M=g(!1);ge(()=>{const e=t(I),r=setTimeout(()=>{v(P,e,!0)},200);return()=>clearTimeout(r)}),ge(()=>{Z.state.status==="connected"&&Ve(()=>T())});async function T(){if(!t(_)){v(_,!0),v(L,null);try{const e=await _e.call("skills.status",{}),r=Array.isArray(e?.skills)?e.skills:Array.isArray(e?.entries)?e.entries:Array.isArray(e)?e:[];v(f,r,!0)}catch(e){const r=String(e);console.error("skills.status failed:",r),v(L,r,!0),N.error("Skills Load Failed",r)}finally{v(_,!1)}}}async function ee(){if(t(y).trim()){v(M,!0);try{const e=await _e.call("skills.install",{name:t(y).trim(),timeoutMs:12e4});N.success("Installed",e?.message??`${t(y)} installed`),v(y,""),v($,!1),await T()}catch(e){N.error("Install Failed",String(e))}finally{v(M,!1)}}}let R=me(()=>{let e=t(f);if(t(P).trim()){const r=t(P).toLowerCase();e=e.filter(l=>l.name.toLowerCase().includes(r)||(l.description?.toLowerCase().includes(r)??!1)||(l.source?.toLowerCase().includes(r)??!1))}return t(k)==="bundled"&&(e=e.filter(r=>r.bundled)),t(k)==="workspace"&&(e=e.filter(r=>r.source==="workspace")),t(k)==="managed"&&(e=e.filter(r=>r.source==="managed"||r.source==="clawhub")),e}),j=me(()=>({total:t(f).length,bundled:t(f).filter(e=>e.bundled).length,workspace:t(f).filter(e=>e.source==="workspace").length,managed:t(f).filter(e=>e.source==="managed"||e.source==="clawhub").length}));function Ce(e,r){return r?"bundled":e==="workspace"?"workspace":e==="managed"||e==="clawhub"?"managed":e??"unknown"}function Ae(e,r){return r?"bg-accent-purple/20 text-accent-purple border-accent-purple/30":e==="workspace"?"bg-accent-cyan/20 text-accent-cyan border-accent-cyan/30":e==="managed"||e==="clawhub"?"bg-accent-green/20 text-accent-green border-accent-green/30":"bg-bg-tertiary text-text-muted border-border-default"}var q=yt();st("1g4s34r",e=>{Ye(()=>{Ze.title="Skills — Cortex"})});var te=d(q),E=d(te),re=s(d(E),2),ae=d(re),B=s(ae,2),Le=d(B,!0);a(B),a(re),a(E);var de=s(E,2);{var Ie=e=>{var r=nt(),l=s(d(r),2),p=d(l);ye(p);var m=s(p,2),S=d(m,!0);a(m),a(l),a(r),b(o=>{m.disabled=o,c(S,t(M)?"Installing...":"Install")},[()=>t(M)||!t(y).trim()]),C("keydown",p,o=>o.key==="Enter"&&ee()),we(p,()=>t(y),o=>v(y,o)),C("click",m,ee),u(e,r)};w(de,e=>{t($)&&e(Ie)})}var W=s(de,2),z=d(W),se=d(z),$e=d(se,!0);a(se),A(2),a(z);var H=s(z,2),oe=d(H),Me=d(oe,!0);a(oe),A(2),a(H);var Q=s(H,2),le=d(Q),Te=d(le,!0);a(le),A(2),a(Q);var ne=s(Q,2),ie=d(ne),je=d(ie,!0);a(ie),A(2),a(ne),a(W);var U=s(W,2),D=d(U),ce=d(D);ye(ce),A(2),a(D);var G=s(D,2),J=d(G);J.value=J.__value="all";var K=s(J);K.value=K.__value="bundled";var O=s(K);O.value=O.__value="workspace";var ve=s(O);ve.value=ve.__value="managed",a(G),a(U);var ue=s(U,2);{var Be=e=>{var r=it(),l=s(d(r)),p=s(l);a(r),b(()=>c(l,` ${t(L)??""} `)),C("click",p,T),u(e,r)};w(ue,e=>{t(L)&&e(Be)})}var Fe=s(ue,2);{var Ne=e=>{var r=vt();he(r,20,()=>Array(5),rt,(l,p)=>{var m=ct();u(l,m)}),a(r),u(e,r)},Pe=e=>{var r=ut(),l=d(r,!0);a(r),b(()=>c(l,Z.state.status!=="connected"?"Connect to the gateway to view skills.":"No skills found.")),u(e,r)},Re=e=>{var r=xt(),l=d(r);a(r),b(()=>c(l,`No skills match "${t(I)??""}"`)),u(e,r)},qe=e=>{var r=_t(),l=et(r);he(l,23,()=>t(R),(S,o)=>S.name+"-"+o,(S,o)=>{var V=mt(),xe=d(V),be=d(xe),X=d(be),Y=d(X),Ee=d(Y,!0);a(Y);var F=s(Y,2),We=d(F,!0);a(F);var ze=s(F,2);{var He=i=>{var n=bt(),h=d(n);a(n),b(()=>c(h,`v${t(o).version??""}`)),u(i,n)};w(ze,i=>{t(o).version&&i(He)})}a(X);var pe=s(X,2);{var Qe=i=>{var n=pt(),h=d(n,!0);a(n),b(()=>c(h,t(o).description)),u(i,n)};w(pe,i=>{t(o).description&&i(Qe)})}var fe=s(pe,2);{var Ue=i=>{var n=ft(),h=d(n,!0);a(n),b(()=>{dt(n,"title",t(o).filePath),c(h,t(o).filePath)}),u(i,n)};w(fe,i=>{t(o).filePath&&i(Ue)})}var De=s(fe,2);{var Ge=i=>{var n=gt(),h=d(n,!0);a(n),b(()=>c(h,t(o).error)),u(i,n)};w(De,i=>{t(o).error&&i(Ge)})}a(be),a(xe),a(V),b((i,n)=>{c(Ee,t(o).name),at(F,1,`px-1.5 py-0.5 rounded text-[10px] font-mono border ${i??""}`),c(We,n)},[()=>Ae(t(o).source,t(o).bundled),()=>Ce(t(o).source,t(o).bundled)]),u(S,V)}),a(l);var p=s(l,2),m=d(p);a(p),b(()=>c(m,`Showing ${t(R).length??""} of ${t(f).length??""} skills`)),u(e,r)};w(Fe,e=>{t(_)&&t(f).length===0?e(Ne):t(f).length===0&&!t(_)?e(Pe,1):t(R).length===0?e(Re,2):e(qe,!1)})}a(te),a(q),b(()=>{B.disabled=t(_),c(Le,t(_)?"Loading...":"Refresh"),c($e,t(j).total),c(Me,t(j).bundled),c(Te,t(j).workspace),c(je,t(j).managed)}),C("click",ae,()=>v($,!t($))),C("click",B,T),we(ce,()=>t(I),e=>v(I,e)),ot(G,()=>t(k),e=>v(k,e)),u(ke,q),Xe()}Je(["click","keydown"]);export{$t as component};
